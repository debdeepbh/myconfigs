<!DOCTYPE html>
<html  dir="ltr">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon-precomposed" href="images/apple-touch-icon.png">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.26.4/css/uikit.gradient.css">

        <!-- <link rel="stylesheet" href="style.css"> -->
        <link rel="stylesheet" href="https://cdn.rawgit.com/diversen/pandoc-uikit/master/style.css">
        <link href="https://vjs.zencdn.net/5.4.4/video-js.css" rel="stylesheet" />
        <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
        <!-- <script src="uikit.js"></script> -->
        <script src="https://cdn.rawgit.com/diversen/pandoc-uikit/master/uikit.js"></script>
        <!-- <script src="scripts.js"></script> -->
        <script src="https://cdn.rawgit.com/diversen/pandoc-uikit/master/scripts.js"></script>
        <!-- <script src="jquery.sticky-kit.js "></script> -->
        <script src="https://cdn.rawgit.com/diversen/pandoc-uikit/master/jquery.sticky-kit.js"></script>

        <meta name="generator" content="pandoc-uikit" />
                        <title>TODO new_installation</title>
        <style type="text/css">code{white-space: pre;}</style>
                        <style type="text/css">
            a.sourceLine { display: inline-block; line-height: 1.25; }
            a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
            a.sourceLine:empty { height: 1.2em; }
            .sourceCode { overflow: visible; }
            code.sourceCode { white-space: pre; position: relative; }
            div.sourceCode { margin: 1em 0; }
            pre.sourceCode { margin: 0; }
            @media screen {
            div.sourceCode { overflow: auto; }
            }
            @media print {
            code.sourceCode { white-space: pre-wrap; }
            a.sourceLine { text-indent: -1em; padding-left: 1em; }
            }
            pre.numberSource a.sourceLine
              { position: relative; left: -4em; }
            pre.numberSource a.sourceLine::before
              { content: attr(title);
                position: relative; left: -1em; text-align: right; vertical-align: baseline;
                border: none; pointer-events: all; display: inline-block;
                -webkit-touch-callout: none; -webkit-user-select: none;
                -khtml-user-select: none; -moz-user-select: none;
                -ms-user-select: none; user-select: none;
                padding: 0 4px; width: 4em;
                color: #aaaaaa;
              }
            pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
            div.sourceCode
              { background-color: #f8f8f8; }
            @media screen {
            a.sourceLine::before { text-decoration: underline; }
            }
            code span.al { color: #ef2929; } /* Alert */
            code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
            code span.at { color: #c4a000; } /* Attribute */
            code span.bn { color: #0000cf; } /* BaseN */
            code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
            code span.ch { color: #4e9a06; } /* Char */
            code span.cn { color: #000000; } /* Constant */
            code span.co { color: #8f5902; font-style: italic; } /* Comment */
            code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
            code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
            code span.dt { color: #204a87; } /* DataType */
            code span.dv { color: #0000cf; } /* DecVal */
            code span.er { color: #a40000; font-weight: bold; } /* Error */
            code span.ex { } /* Extension */
            code span.fl { color: #0000cf; } /* Float */
            code span.fu { color: #000000; } /* Function */
            code span.im { } /* Import */
            code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
            code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
            code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
            code span.ot { color: #8f5902; } /* Other */
            code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
            code span.sc { color: #000000; } /* SpecialChar */
            code span.ss { color: #4e9a06; } /* SpecialString */
            code span.st { color: #4e9a06; } /* String */
            code span.va { color: #000000; } /* Variable */
            code span.vs { color: #4e9a06; } /* VerbatimString */
            code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
        </style>
                                                </head>

    <body>


        <div class="uk-container uk-container-center uk-margin-top uk-margin-large-bottom">

            
            <div class="uk-grid" data-uk-grid-margin >          
                <div class="uk-width-medium-1-4">
                    <div class="uk-overflow-container" data-uk-sticky="{top:25,media: 768}">
                        <div class="uk-panel uk-panel-box menu-begin" >

                                                        <ul>
                            <li><a href="#folding-help">Folding Help:</a></li>
                            <li><a href="#install-broadcom-wifi-driver-and-restart-to-get-internet-access.">Install Broadcom WiFi Driver and restart to get internet access.</a></li>
                            <li><a href="#goto-terminal-and-install">Goto terminal and install:</a></li>
                            <li><a href="#create-a-startup-script-to-mount-hard-disk-drives">Create a startup script to mount Hard disk drives:</a></li>
                            <li><a href="#enable-visual-effects">Enable Visual Effects:</a></li>
                            <li><a href="#installing-sound-driver">Installing sound driver:</a></li>
                            <li><a href="#recording-sound-from-output-stream">Recording sound from output stream:</a></li>
                            <li><a href="#converting-media">Converting media:</a><ul>
                            <li><a href="#mp4-encoding-for-mac-and-incorrect-color-in-subsequent-gif">mp4 encoding for mac and incorrect color in subsequent gif</a></li>
                            </ul></li>
                            <li><a href="#printing">Printing:</a></li>
                            <li><a href="#ip-and-hostname-resolution">IP and hostname resolution</a></li>
                            <li><a href="#live-ports">Live ports:</a></li>
                            <li><a href="#boot-from-livecd-iso-using-grub">Boot from LiveCD iso using GRUB:</a></li>
                            <li><a href="#handy-commands">Handy Commands:</a></li>
                            <li><a href="#manually-download-flash-videos">Manually download Flash Videos:</a></li>
                            <li><a href="#peforming-xserver-activities-through-tty-or-remote-ssh-shells">Peforming xserver activities through tty or remote ssh shells:</a></li>
                            <li><a href="#simple-gtk-pop-ups">Simple GTK pop-ups:</a></li>
                            <li><a href="#send-messages-to-other-users-in-terminal">Send messages to other users in terminal:</a></li>
                            <li><a href="#lock-screen-from-terminal">Lock screen from terminal:</a></li>
                            <li><a href="#convert-m4a-to-mp3">Convert m4a to mp3</a></li>
                            <li><a href="#taking-pictures-through-webcam">Taking pictures through webcam</a></li>
                            <li><a href="#streaming-audio-using-cvlc-not-tested-yet.-gui-vlc-streaming-is-straightforward-and-works">Streaming audio using cvlc: (not tested yet. GUI vlc streaming is straightforward and works :))</a></li>
                            <li><a href="#adding-environment-variables-like-proxy-etc-permanently">Adding environment variables like proxy etc permanently</a></li>
                            <li><a href="#adjusting-brightness-the-ultimate-method">Adjusting brightness (The ultimate method)</a></li>
                            <li><a href="#touchpad-and-vertical-scrolling">Touchpad and vertical scrolling</a></li>
                            <li><a href="#systemctl-command">systemctl command</a></li>
                            <li><a href="#vim-helps">Vim helps:</a><ul>
                            <li><a href="#newer-vim-moves">Newer vim moves</a></li>
                            <li><a href="#vim-window-splitting">vim window splitting</a></li>
                            <li><a href="#vim-ex-commands">vim Ex commands</a></li>
                            <li><a href="#basic-vim">Basic vim</a></li>
                            </ul></li>
                            <li><a href="#copying-some-stuff-to-all-users-that-are-created">Copying some stuff to all users that are created</a></li>
                            <li><a href="#search-for-all-http-links-in-a-file-by-grep">Search for all http links in a file by grep</a></li>
                            <li><a href="#lock-screen-for-terminal">Lock screen for terminal</a></li>
                            <li><a href="#vimperator-matters">Vimperator matters:</a></li>
                            <li><a href="#wireless-mouse-and-usb-speaker">Wireless mouse and USB speaker</a></li>
                            <li><a href="#password-protecting-text-files-in-vim">Password protecting text files in VIM:</a></li>
                            <li><a href="#detect-filetype-even-without-the-extension">Detect filetype even without the extension:</a></li>
                            <li><a href="#incremental-terminal-history-search">Incremental terminal history search:</a></li>
                            <li><a href="#few-terminal-keyboard-shortcuts">Few Terminal keyboard shortcuts</a></li>
                            <li><a href="#copy-the-content-of-a-file-to-the-x-clipboard-so-that-right-click---paste-works">Copy the content of a file to the X clipboard (so that right click - paste works)</a></li>
                            <li><a href="#git-tutorial">Git tutorial</a><ul>
                            <li><a href="#removing-a-large-file-from-the-commit-history">Removing a large file from the commit history</a></li>
                            <li><a href="#create-a-respository">Create a respository</a><ul>
                            <li><a href="#ssh-access-to-github">SSH access to github</a></li>
                            <li><a href="#to-pushpull-git-repository-without-password">To push/pull git repository without password</a></li>
                            <li><a href="#back-to-creating-a-repository">Back to creating a repository</a></li>
                            </ul></li>
                            <li><a href="#maintaining-the-local-repo">Maintaining the local repo:</a></li>
                            <li><a href="#adding-and-committing-only-the-files-that-are-in-the-git-ls-files-list">Adding and committing only the files that are in the git ls-files list:</a></li>
                            <li><a href="#merging-branches">Merging branches</a><ul>
                            <li><a href="#replacing-all-files-without-resolving-conflicts">Replacing <em>all</em> files without resolving conflicts</a></li>
                            </ul></li>
                            <li><a href="#using-vimdiff-as-a-mergetool">Using <code>vimdiff</code> as a mergetool:</a></li>
                            <li><a href="#scenarios">Scenarios</a></li>
                            <li><a href="#rebasing-basing-the-current-commit-on-seems-irrelevant-and-confusing-to-mess-with-history">Rebasing (basing the current commit on) seems irrelevant and confusing to mess with history</a></li>
                            <li><a href="#removing-sensitive-information-from-github-repo">Removing sensitive information from github repo</a></li>
                            </ul></li>
                            <li><a href="#all-about-wifi">All about wifi</a></li>
                            <li><a href="#enabling-cron-job-for-arch-linux">Enabling cron job for arch linux</a></li>
                            <li><a href="#microphone-recording">Microphone recording</a></li>
                            <li><a href="#sharing-keyboard-and-mouse-between-multiple-computers">Sharing keyboard and mouse between multiple computers:</a></li>
                            <li><a href="#a-fun-script-to-rotate-the-mouse-pointer-10-times-in-a-circle-of-radius-250-in-clockwise-direction.-needs-xdotool-package.">A fun script to rotate the mouse pointer (10 times) in a circle of radius 250 in clockwise direction. Needs xdotool package.</a></li>
                            <li><a href="#detaching-a-process-from-terminal">Detaching a process from terminal:</a></li>
                            <li><a href="#auto-login-to-arch">Auto login to arch</a></li>
                            <li><a href="#making-the-default-font-of-arch-linux-pretty">Making the default font of Arch linux pretty</a></li>
                            <li><a href="#uninstall-infinality-font-sets">Uninstall infinality font sets:</a></li>
                            <li><a href="#calibre-setup-with-kobo-glo">Calibre setup with Kobo glo</a></li>
                            <li><a href="#rules-to-ensure-that-files-stay-in-certain-directory-with-the-same-book-shelf-name">Rules to ensure that files stay in certain directory with the same Book Shelf name:</a></li>
                            <li><a href="#batch-resize-images-before-i-forget-how-to">Batch resize images before I forget how to:</a></li>
                            <li><a href="#delete-all-even-or-odd-numbered-file-in-the-directory">Delete all even or odd numbered file in the directory</a></li>
                            <li><a href="#disk-repairerror-check">Disk repair/error check</a></li>
                            <li><a href="#very-light-http-server-lightpd">Very light http server: lightpd</a></li>
                            <li><a href="#creating-an-access-point-in-your-system">Creating an access point in your system</a></li>
                            <li><a href="#mounting-unclean-ntfs-partition-caused-by-windows">Mounting unclean ntfs partition caused by windows</a></li>
                            <li><a href="#reconnect-wifi-and-reload-firefoxs-latest-tab">Reconnect wifi and reload firefox’s latest tab</a></li>
                            <li><a href="#turn-off-screen-blackeningscrensaver">Turn off screen blackening/scrensaver:</a></li>
                            <li><a href="#calculate-the-size-of-a-directory-including-its-subdirectories">Calculate the size of a directory including its subdirectories</a></li>
                            <li><a href="#print-screen-in-linux-using-imagemagick">Print Screen in linux using imagemagick</a></li>
                            <li><a href="#set-up-the-correct-time-zone-to-avoid-wrong-datetime-in-gmailgtalk">Set up the correct time zone to avoid wrong date/time in Gmail/gtalk</a></li>
                            <li><a href="#show-percentage-bar-while-copying-using-cp">Show percentage bar while copying using cp</a></li>
                            <li><a href="#setting-up-static-ip">Setting up static ip</a></li>
                            <li><a href="#to-see-the-default-programme-for-a-certain-filetype-we-need-xdg-mime.">To see the default programme for a certain filetype, we need xdg-mime.</a></li>
                            <li><a href="#make-the-volume-control-for-mplayer-the-keys-0-and-9-work-or-make-them-independent-of-the-system-volume-control">Make the volume control for mplayer ( the keys 0 and 9) work, or make them independent of the system volume control:</a></li>
                            <li><a href="#reducing-your-screen-brightness-and-add-red-colour-at-night-so-that-you-can-fall-asleep-better-or-not-get-blinded-by-electronic-devices-like-twilight-in-android">Reducing your screen brightness and add red colour at night so that you can fall asleep better, or not get blinded by electronic devices (like twilight in Android)</a></li>
                            <li><a href="#managing-tasks-task-warrior">Managing tasks task warrior</a></li>
                            <li><a href="#syncing-task-warrior">Syncing task warrior</a></li>
                            <li><a href="#very-nice-image-viewer-with-nice-features-better-than-feh-except-for-the-zooming-part">Very nice image viewer with nice features (better than feh, except for the zooming part)</a></li>
                            <li><a href="#making-whole-linux-dark">Making whole linux dark</a></li>
                            <li><a href="#remove-mouse-module-and-insert-again-to-disableenable-mouse">Remove mouse module and insert again to disable/enable mouse:</a></li>
                            <li><a href="#play-video-as-background-through-mplayer">Play video as background through mplayer</a></li>
                            <li><a href="#copying-between-terminals">Copying between terminals:</a></li>
                            <li><a href="#the-solarized-color-palate-has-some-nice-symmetry.-you-just-invert-it-and-start-from-the-top-removing-the-base-color-and-stop-wherever-needed.-the-only-benefit-is-that-you-can-interchange-between-the-dark-light-schemes-very-fast.">The solarized color palate has some nice symmetry. You just invert it and start from the top, removing the base color and stop wherever needed. The only benefit is that you can interchange between the dark-light schemes very fast.</a></li>
                            <li><a href="#gtk-bookmarks">GTK+ bookmarks:</a></li>
                            <li><a href="#loading-the-new-.xresources">Loading the new .Xresources</a></li>
                            <li><a href="#using-wicd">Using wicd</a></li>
                            <li><a href="#youtube-viewer-and-downloader-for-terminal">Youtube viewer and downloader for terminal</a></li>
                            <li><a href="#simple-client-server-using-netcat">Simple client-server using netcat</a></li>
                            <li><a href="#pacman-stuff">Pacman stuff:</a></li>
                            <li><a href="#dns-server-using-ngrok-and-tcp-tunelling-for-sshing-into-the-local-machine">DNS server using ngrok and tcp tunelling (for sshing into the local machine):</a></li>
                            <li><a href="#cleaning-up-your-arch-system">Cleaning up your Arch system</a></li>
                            <li><a href="#mts-mblaze-activation-using-usb_modeswitch">MTS Mblaze activation using usb_modeswitch</a></li>
                            <li><a href="#applying-particular-config-file-to-a-particular-file-in-vim">Applying particular config file to a particular file in vim</a></li>
                            <li><a href="#calculating-with-bc">Calculating with bc</a></li>
                            <li><a href="#vim-plugin-pathogen">Vim plugin Pathogen</a></li>
                            <li><a href="#replacing-entries-in-file-with-another-one">Replacing entries in file with another one</a></li>
                            <li><a href="#connect-to-a-vpn-to-have-their-external-ip-to-use-mathscinet-and-stuff">Connect to a VPN to have their external ip to use MathSciNet and stuff</a></li>
                            <li><a href="#dumping-or-redirecting-your-microphone-feed-through-ssh">Dumping or redirecting your microphone feed through ssh</a></li>
                            <li><a href="#display-the-webcam-feed-with-mplayer-play-the-webcam">Display the webcam feed with mplayer (play the webcam):</a></li>
                            <li><a href="#how-to-connect-to-hdmi">How to connect to hdmi</a></li>
                            <li><a href="#speeding-up-the-internet-using-the-fastest-dns-server">Speeding up the internet using the fastest DNS server</a></li>
                            <li><a href="#google-drive-client-for-linux">Google drive client for linux:</a><ul>
                            <li><a href="#fixing-clashes">Fixing clashes</a></li>
                            </ul></li>
                            <li><a href="#moving-root-to-another-partition">Moving /root to another partition</a></li>
                            <li><a href="#writing-a-manpage">Writing a manpage</a></li>
                            <li><a href="#unity-3d">Unity 3D</a></li>
                            <li><a href="#progress-bar-for-cp-firefox-download-dd-tar-cat">Progress bar for cp, firefox download, dd, tar, cat</a></li>
                            <li><a href="#wpa_supplicant">wpa_supplicant</a></li>
                            <li><a href="#find-out-name-of-the-linux-distribution">Find out name of the linux distribution</a></li>
                            <li><a href="#fix-pacman--syu-error-with-wrong-pgp-keys">Fix pacman -Syu error with wrong pgp keys</a></li>
                            <li><a href="#killing-processes">Killing processes</a></li>
                            <li><a href="#compress-and-uncompress-zipunzip-files-using-aunpack">Compress and uncompress (zip/unzip) files using aunpack</a></li>
                            <li><a href="#calendar.vim">calendar.vim</a></li>
                            <li><a href="#installing-packages-in-r">Installing packages in R</a></li>
                            <li><a href="#r-tutorial">R tutorial</a></li>
                            <li><a href="#installing-xournal-from-source-and-adding-useful-patches">Installing xournal from source and adding useful patches:</a><ul>
                            <li><a href="#xournal-patches">Xournal patches</a></li>
                            </ul></li>
                            <li><a href="#drawing-with-touchscreen-in-xournal">Drawing with touchscreen in xournal</a></li>
                            <li><a href="#setting-up-raspberry-pi-zero-w">Setting up raspberry pi zero w</a></li>
                            <li><a href="#install-cocalc-notebook-locally">Install Cocalc notebook locally</a></li>
                            <li><a href="#experiments-on-lock-screen-on-suspend-and-lid-close">Experiments on lock screen on suspend and lid close</a><ul>
                            <li><a href="#to-use-logind-for-suspend-on-lid-close">To use logind for suspend-on-lid-close</a><ul>
                            <li><a href="#suspend-and-lock-screen-with-logind-and-systemctl">suspend and lock screen with logind and systemctl</a></li>
                            </ul></li>
                            <li><a href="#etcsystemdsystemslock.service">‘/etc/systemd/system/slock@.service’</a></li>
                            <li><a href="#etcacpilid.sh">/etc/acpi/lid.sh</a></li>
                            </ul></li>
                            <li><a href="#fixing-the-bug-of-disappearing-clients-on-suspend">Fixing the bug of disappearing clients on suspend</a></li>
                            <li><a href="#how-to-locate-the-path-of-a-executable-file-use-which">How to locate the path of a executable file: use <code>which</code></a></li>
                            <li><a href="#setting-up-neovim">Setting up neovim</a></li>
                            <li><a href="#coc.nvim">coc.nvim</a><ul>
                            <li><a href="#installation">Installation:</a></li>
                            <li><a href="#features">features</a></li>
                            <li><a href="#how-to">How to</a></li>
                            <li><a href="#coc-pyright-for-python">coc-pyright for python</a></li>
                            <li><a href="#code-completion-and-definition-for-cc-files">Code completion and definition for C/C++ files</a></li>
                            </ul></li>
                            <li><a href="#cc-compilation-troubleshooting">C/C++ compilation troubleshooting</a></li>
                            <li><a href="#running-script-for-motion">Running script for motion</a></li>
                            <li><a href="#motioneye-on-usual-ubuntu">MotionEye on usual Ubuntu</a></li>
                            <li><a href="#motioneye-on-raspberry-pi">MotionEye on raspberry pi</a></li>
                            <li><a href="#update-gemfile.lock-of-github-website-repository-to-the-latest-version">Update Gemfile.lock of github website repository to the latest version</a></li>
                            <li><a href="#vim-matlab-modifications">vim-matlab modifications</a></li>
                            <li><a href="#vim-search-for-string-in-a-case-sensitive-manner-temporarily">Vim search for string in a case-sensitive manner temporarily</a></li>
                            <li><a href="#setting-up-linux-password-management-system-with-pass-and-gnupg">Setting up linux password management system with pass and gnupg</a></li>
                            <li><a href="#mutt-with-oauth2">Mutt with OAUTH2</a><ul>
                            <li><a href="#installation-1">Installation</a></li>
                            <li><a href="#oauth2-credentials">OAUTH2 credentials</a></li>
                            <li><a href="#modifications">Modifications</a></li>
                            <li><a href="#questions">Questions</a></li>
                            </ul></li>
                            <li><a href="#zotero">Zotero</a><ul>
                            <li><a href="#restore-old-setup">Restore old setup</a></li>
                            <li><a href="#installation-2">Installation</a></li>
                            <li><a href="#zotfile-settings">Zotfile Settings</a></li>
                            <li><a href="#setup-syncing-edit-preferences-sync">Setup syncing (Edit &gt; Preferences &gt; Sync)</a></li>
                            <li><a href="#in-better-bibtex-settings-editpreferencesbetter">In Better Bibtex settings (Edit&gt;Preferences&gt;Better):</a></li>
                            <li><a href="#caution"><strong>Caution:</strong></a></li>
                            <li><a href="#navigation">Navigation</a></li>
                            <li><a href="#cleanup">Cleanup</a><ul>
                            <li><a href="#removing-missing-attachments-with-zotero-storage-scanner-plugin">Removing missing attachments with <code>zotero-storage-scanner</code> plugin</a></li>
                            <li><a href="#detecting-and-removing-orphan-attachments">Detecting and removing orphan attachments</a></li>
                            </ul></li>
                            <li><a href="#other-practices">Other practices</a></li>
                            <li><a href="#scenario">Scenario:</a></li>
                            </ul></li>
                            <li><a href="#cpu-frequency-scaling">CPU frequency scaling</a></li>
                            <li><a href="#papis">Papis</a><ul>
                            <li><a href="#install">Install</a></li>
                            <li><a href="#usage">Usage</a></li>
                            <li><a href="#moving-from-zotero">Moving from Zotero</a></li>
                            <li><a href="#to-make-papis-as-functional-as-zotero-it-needs-to-be-able-to">To make papis as functional as Zotero, it needs to be able to</a></li>
                            <li><a href="#current-bugs">Current Bugs</a></li>
                            </ul></li>
                            <li><a href="#marp-for-presentation-slides-using-markdown">MARP for presentation slides using markdown</a><ul>
                            <li><a href="#installation-3">Installation</a></li>
                            <li><a href="#workflow">Workflow</a></li>
                            <li><a href="#usage-1">Usage</a></li>
                            <li><a href="#tex-support">Tex support</a></li>
                            <li><a href="#changing-settings-for-the-current-slide-only">Changing settings for the current slide only</a></li>
                            <li><a href="#changing-font-size">Changing font size</a></li>
                            <li><a href="#embedding-videos">Embedding videos</a></li>
                            <li><a href="#adding-vertical-space">Adding vertical space</a></li>
                            <li><a href="#adding-horizontal-space">Adding horizontal space</a></li>
                            <li><a href="#multiple-images-next-to-each-other">Multiple images next to each other</a></li>
                            <li><a href="#align-contents-using-tables">Align contents using tables</a></li>
                            <li><a href="#marp-columns">marp columns</a></li>
                            <li><a href="#repeated-css-styles">Repeated css styles</a></li>
                            <li><a href="#new-theme-files">New theme files</a></li>
                            </ul></li>
                            <li><a href="#tridactyl-for-firefox">Tridactyl for firefox</a><ul>
                            <li><a href="#installation-4">Installation</a></li>
                            <li><a href="#settings">Settings</a></li>
                            <li><a href="#reasons-i-disliked">Reasons I disliked</a></li>
                            <li><a href="#features-i-enjoyed">Features I enjoyed</a></li>
                            </ul></li>
                            <li><a href="#vimium-features">Vimium features</a><ul>
                            <li><a href="#settings-1">Settings</a></li>
                            <li><a href="#copy-and-google-text-found-within-a-page">Copy and google text found within a page</a></li>
                            <li><a href="#useful-keystrokes">Useful keystrokes</a></li>
                            </ul></li>
                            <li><a href="#imagemagic-not-authorized-to-convert-pdf">Imagemagic <code>not authorized</code> to convert pdf</a></li>
                            <li><a href="#extract-png-from-pdf-files">Extract png from pdf files</a></li>
                            <li><a href="#c-tutorial-comparison-with-c">C++ tutorial comparison with C</a><ul>
                            <li><a href="#strings">Strings</a></li>
                            <li><a href="#changing-value-by-reference">Changing value by reference</a></li>
                            <li><a href="#passing-by-reference">Passing by reference</a></li>
                            <li><a href="#default-values">Default values</a></li>
                            <li><a href="#see-the-datatype-of-a-variable">See the datatype of a variable</a></li>
                            <li><a href="#c-class">C++ class</a></li>
                            <li><a href="#overloading">Overloading</a></li>
                            <li><a href="#c-project-structure">C++ project structure</a></li>
                            <li><a href="#arrays">Arrays</a><ul>
                            <li><a href="#vector-related-help">Vector-related help</a></li>
                            </ul></li>
                            </ul></li>
                            <li><a href="#matlab-parfor-tutorial">Matlab parfor tutorial</a></li>
                            <li><a href="#makefile-help">Makefile help</a><ul>
                            <li><a href="#rule-to-write-a-makefile">Rule to write a makefile</a><ul>
                            <li><a href="#string-replacement">String replacement</a></li>
                            <li><a href="#timestamp-in-c">Timestamp in C++</a></li>
                            </ul></li>
                            </ul></li>
                            <li><a href="#abd-android-development-bridge-help">ABD (Android development bridge) help</a></li>
                            <li><a href="#matplotlib-help">matplotlib help</a></li>
                            <li><a href="#openmp-help">Openmp help</a><ul>
                            <li><a href="#requirements">Requirements</a></li>
                            <li><a href="#information">Information</a><ul>
                            <li><a href="#repetition-of-a-block-of-code">Repetition of a block of code</a></li>
                            <li><a href="#for-loop">For loop:</a></li>
                            <li><a href="#nested-for-loop">Nested for loop</a></li>
                            <li><a href="#static-vs-dynamic-schedule-for-for-loop">Static vs dynamic schedule for <code>for</code> loop</a></li>
                            </ul></li>
                            </ul></li>
                            <li><a href="#python-numpy-array">Python Numpy array</a></li>
                            <li><a href="#python-inline-if-then-else">Python inline if then else</a></li>
                            <li><a href="#python-class">Python class</a></li>
                            <li><a href="#python-plotting">Python plotting</a><ul>
                            <li><a href="#d-scatter-plot">3d scatter plot</a></li>
                            <li><a href="#plotting-a-bunch-of-lines">Plotting a bunch of lines</a></li>
                            </ul></li>
                            <li><a href="#python-import-module">Python import module</a></li>
                            <li><a href="#python-parallel-processing-with-multiprocessing">Python parallel processing with multiprocessing:</a></li>
                            <li><a href="#hdf5-dataset">HDF5 dataset</a><ul>
                            <li><a href="#hdf5-dataset-in-c">HDF5 dataset in C++</a></li>
                            <li><a href="#hdf5-dataset-in-matlab">HDF5 dataset in Matlab</a></li>
                            <li><a href="#hdf5-dataset-in-python">HDF5 dataset in python</a></li>
                            </ul></li>
                            <li><a href="#rsync">Rsync</a></li>
                            <li><a href="#cuda-nvidia-with-c">CUDA NVIDIA with C++</a><ul>
                            <li><a href="#installation-5">Installation</a></li>
                            <li><a href="#jargon">Jargon</a></li>
                            <li><a href="#running-c-codes">Running C++ codes</a></li>
                            </ul></li>
                            <li><a href="#cuda-nvidia-with-python">CUDA NVIDIA with python</a><ul>
                            <li><a href="#installation-on-xubuntu-22.04">Installation on Xubuntu-22.04</a><ul>
                            <li><a href="#install-liveusb-with">Install liveUSB with</a></li>
                            <li><a href="#if-additional-drivers-is-disabled">If <code>Additional Drivers</code> is disabled</a></li>
                            <li><a href="#in-additional-drivers">In <code>Additional Drivers</code>:</a></li>
                            <li><a href="#install-cuda-from-website">Install cuda from website</a></li>
                            <li><a href="#nvcc"><code>nvcc</code></a></li>
                            <li><a href="#installing-pytorch">Installing pytorch</a></li>
                            </ul></li>
                            <li><a href="#showing-stats">Showing stats</a></li>
                            <li><a href="#cupy-as-an-alternative-to-numpy">cupy as an alternative to numpy</a></li>
                            <li><a href="#numba">numba</a></li>
                            <li><a href="#openmp-in-c">OPENMP in C++</a></li>
                            </ul></li>
                            <li><a href="#python-vispy">Python vispy</a></li>
                            <li><a href="#midi-keyboard-for-linux">MIDI keyboard for linux</a><ul>
                            <li><a href="#on-raspberry-pi-to-reduce-the-latency-add-following-to-the-file-etcsecuritylimits.conf">On raspberry pi, to reduce the latency, add following to the file <code>/etc/security/limits.conf</code></a></li>
                            <li><a href="#previous-command-shortcut-in-terminal">Previous command shortcut in terminal</a></li>
                            </ul></li>
                            <li><a href="#py3status-bar-with-i3-async_script">py3status bar with i3 async_script</a></li>
                            <li><a href="#i3-window-manager-with-xfce4-panel">i3 Window manager with xfce4-panel</a></li>
                            <li><a href="#i3-window-manager-movements">i3 window manager movements</a></li>
                            <li><a href="#disable-the-use-of-swap-space">Disable the use of swap space</a></li>
                            <li><a href="#another-c-tutorial">Another C++ tutorial</a><ul>
                            <li><a href="#compilation-process">Compilation process</a></li>
                            <li><a href="#c-directory-structure">C++ directory structure</a></li>
                            <li><a href="#compilers">Compilers</a></li>
                            <li><a href="#cmake-tutorial">CMake tutorial</a></li>
                            </ul></li>
                            <li><a href="#video-recording-from-command-line">Video recording from command line</a><ul>
                            <li><a href="#network-streaming">Network streaming</a></li>
                            </ul></li>
                            <li><a href="#investigation-on-xorgs-memory-leak">investigation on Xorg’s memory leak</a><ul>
                            <li><a href="#attempts">Attempts:</a></li>
                            </ul></li>
                            <li><a href="#graph-connectivity-in-python-using-networkx">Graph connectivity in python using <code>networkx</code></a></li>
                            <li><a href="#gmsh-with-python">gmsh with python</a></li>
                            <li><a href="#tmux-help">tmux help</a><ul>
                            <li><a href="#tmux-copy-paste">tmux copy-paste</a><ul>
                            <li><a href="#using-mouse-selection-for-copy-paste-from-tmux-over-ssh">Using mouse selection for copy-paste from tmux over SSH</a></li>
                            <li><a href="#using-a-clipboard-file-over-ssh">Using a clipboard file over SSH</a></li>
                            <li><a href="#between-tmux-windows">Between tmux windows:</a></li>
                            </ul></li>
                            </ul></li>
                            <li><a href="#fingerprint-login">fingerprint login</a><ul>
                            <li><a href="#full-script">full script</a></li>
                            <li><a href="#step-by-step">step by step</a></li>
                            <li><a href="#configs">configs</a></li>
                            </ul></li>
                            <li><a href="#alienware-x15-r1">Alienware x15-r1</a><ul>
                            <li><a href="#todo">Todo</a></li>
                            <li><a href="#fresh-windows-10-install">Fresh windows 10 install</a></li>
                            <li><a href="#dual-boot-with-windows">Dual-boot with windows:</a></li>
                            <li><a href="#hardware-drivers">Hardware drivers</a><ul>
                            <li><a href="#nvidia-driver-needs-to-be-re-installed-in-the-following-way">nvidia driver needs to be re-installed in the following way</a></li>
                            </ul></li>
                            <li><a href="#ethernet-adapter">Ethernet adapter</a></li>
                            <li><a href="#lid-switch-handling">Lid switch handling</a><ul>
                            <li><a href="#manually-run-xrandr---auto-on-lid-open-event-sleep-1-is-important">Manually run <code>xrandr --auto</code> on lid open event: <code>sleep 1</code> is important</a></li>
                            <li><a href="#other-settings-that-go-with-this-setup">Other settings that go with this setup:</a></li>
                            </ul></li>
                            <li><a href="#crackling-and-popping-sound-on-headphone-when-idle">Crackling and popping sound on headphone when idle</a></li>
                            </ul></li>
                            <li><a href="#pavilion-aero">Pavilion Aero</a><ul>
                            <li><a href="#works-so-far-installing-kernel-version-5.17.5-immediately-after-installation">[Works so far] Installing kernel version 5.17.5 immediately after installation</a></li>
                            </ul></li>
                            <li><a href="#openmpi">OpenMPI</a></li>
                            <li><a href="#setting-up-vim-and-other-goodies-in-a-local-environment">Setting up vim and other goodies in a local environment</a><ul>
                            <li><a href="#vim">vim</a></li>
                            <li><a href="#nvim">nvim</a><ul>
                            <li><a href="#fixing-ultisnip-python3-path">fixing ultisnip python3 path</a></li>
                            <li><a href="#nodejs">nodejs</a></li>
                            <li><a href="#coc.nvim-1">coc.nvim</a></li>
                            </ul></li>
                            <li><a href="#ranger">ranger</a></li>
                            <li><a href="#issues">Issues</a></li>
                            </ul></li>
                            <li><a href="#bash-script-to-create-a-table-in-markdown">Bash script to create a table in markdown</a></li>
                            <li><a href="#mpi4py-python-with-mpi">mpi4py python with mpi</a></li>
                            <li><a href="#using-an-older-version-of-gcc">Using an older version of gcc</a></li>
                            <li><a href="#nvcc-with-ubuntu-22.04">nvcc with Ubuntu 22.04</a></li>
                            <li><a href="#vimtex-use-xelatex-and-the-compiler">vimtex use xelatex and the compiler</a></li>
                            <li><a href="#downloading-zoom-links">Downloading zoom links</a><ul>
                            <li><a href="#supplying-a-input-file-of-zoom-urls">Supplying a input file of Zoom urls</a></li>
                            </ul></li>
                            <li><a href="#interactive-terminal-command-from-vim">Interactive terminal command from vim</a></li>
                            <li><a href="#markdown-as-writing-tool">Markdown as writing tool</a><ul>
                            <li><a href="#good-things">Good things</a></li>
                            <li><a href="#issues-1">Issues</a></li>
                            <li><a href="#compare-workflow-and-ease-with">Compare workflow and ease with</a></li>
                            </ul></li>
                            <li><a href="#sql-on-linux">SQL on linux</a><ul>
                            <li><a href="#setup">Setup</a></li>
                            <li><a href="#usage-2">Usage</a></li>
                            <li><a href="#importexport-databases">Import/export databases</a></li>
                            <li><a href="#readwrite">Read/write</a></li>
                            </ul></li>
                            <li><a href="#protonvpn-for-ubuntu">Protonvpn for ubuntu</a><ul>
                            <li><a href="#no-internet-due-to-ip-leak-protection">No internet due to ip leak protection</a></li>
                            </ul></li>
                            <li><a href="#changing-caps-lock-to-escape">Changing caps lock to escape</a></li>
                            <li><a href="#table-borders-in-pandoc-converted-html-from-markdown">Table borders in pandoc-converted html from markdown</a></li>
                            <li><a href="#compiling-tex-files-with-svg">Compiling tex files with svg</a></li>
                            <li><a href="#local-image-server-immich.app">Local image server immich.app</a><ul>
                            <li><a href="#installation-6">Installation</a></li>
                            <li><a href="#file-structure">File structure</a></li>
                            <li><a href="#testing">Testing</a></li>
                            <li><a href="#extra-work">Extra work</a><ul>
                            <li><a href="#security">Security</a></li>
                            <li><a href="#dynamic-dns">Dynamic DNS</a></li>
                            <li><a href="#backup">Backup</a></li>
                            <li><a href="#bulk-upload">Bulk upload</a></li>
                            </ul></li>
                            </ul></li>
                            <li><a href="#dual-filetype">Dual filetype</a></li>
                            </ul>
                            
                        </div>
                    </div>
                </div>

                <div class="uk-width-medium-3-4">
<p>Maintained using indentation folding and searched using the headings. Settings have to be applied to this file only using vim -S TODOsettings.vim</p>
<h1 id="folding-help">Folding Help:</h1>
<p>zi switch folding on or off * za toggle current fold open/closed zc close current fold * zR open all folds * zM close all folds zv expand folds to reveal cursor</p>
<ul>
<li>zj,zk jumps to the next/previous fold, even when unfolded zo,(zO) open fold (recursively) zc,(zC) closefold (recursively)</li>
<li>zA toggle folds recursively</li>
</ul>
<p>Folding Options (Should change in TODOsettings.vim file to make it permanent.) set foldnestmax=10 “deepest fold is 10 levels set nofoldenable”dont fold by default set foldlevel=1 "this is just what i use set shiftwidth=1 to consider spaces as one foldlevel away</p>
<p>Searching Help:</p>
<pre><code>:set foldopen-=search       &quot;to stop folds from opening on search, which is even better.
:folddoopen s/old/new/ge    &quot;to replace old with new in the lines which are not folded. </code></pre>
<p>Warning: Smartindent is on, hence use <F2> before pasting into it.</p>
<p>Want: Not more than 2 stages of folding Search within the visible folded text Search within the invisible text inside folds INdent = on</p>
<h1 id="install-broadcom-wifi-driver-and-restart-to-get-internet-access.">Install Broadcom WiFi Driver and restart to get internet access.</h1>
<h1 id="goto-terminal-and-install">Goto terminal and install:</h1>
<p>sudo apt-get install unetbootin gparted linuxdcpp ffmpeg libavcodec-extra-52 vim tree openssh-server default-jre</p>
<ul>
<li>tree</li>
<li>vim</li>
<li>vlc</li>
<li>ubuntu studio theme (sudo apt-get install ubuntustudio-theme ubuntustudio-icon-theme ubuntustudio-wallpapers ubuntustudio-gdm-theme)</li>
<li>latexpdf (sudo apt-get install textlive-latex-base)</li>
<li>Limewire, Frostwire</li>
<li>Vuze { INSTALL JAVA FIRST: sudo apt-get install default-jre Then install vuze from anywhere (package manager/terminal/website) (For total manual installation, see http://forlong.blogage.de/en/entries/2008/12/2/How-to-install-and-update-Vuze-formerly-Azureus-4-on-Ubuntu NOTE: A modification to be done in the tutorial given above: To add vuze to the menu, you need to create a file named vuze.desktop. Create the file in the location /usr/share/applications instead of /usr/local/share/application) }</li>
<li>Others: Creox, bb</li>
</ul>
<h1 id="create-a-startup-script-to-mount-hard-disk-drives">Create a startup script to mount Hard disk drives:</h1>
<ul>
<li>Goto /media/ and create 3 directories called “windows”, “disk3”, storage". cd /media/ sudo mkdir windows disk3 storage</li>
<li>Create a file named “mounting” with following content:</li>
</ul>
<p>##startup script to mount the disk drives sudo mount /dev/sda1 /media/windows sudo mount /dev/sda3 /media/disk3 sudo mount /dev/sda5 /media/storage #EOF</p>
<ul>
<li>Change file permission to +x: chmod +x mounting</li>
<li>Copy the file to /etc/init.d/: sudo cp mounting /etc/init.d/</li>
<li>Update: sudo update-rc.d mounting defaults</li>
</ul>
<h1 id="enable-visual-effects">Enable Visual Effects:</h1>
<ul>
<li>Enable Wobbly Windows</li>
<li>Enable Shift Switcher (Cover) and Change Shortcut to <Ctrl>+<Tab> for next window and <Ctrl>+<Shift>+<Tab> for previous window.</li>
</ul>
<h1 id="installing-sound-driver">Installing sound driver:</h1>
<ul>
<li>In terminal, write: sudo gedit /etc/modprobe.d/alsa-base.conf</li>
<li>In the end of the file, add this line: options snd-hda-intel model=6stack-dell (For that dell studio 1435) options snd-hda-intel model=ideapad (For lenovo ideapad Z560)</li>
<li>Save the file and Reboot.</li>
<li>Open pulse audio and enjoy full features.</li>
</ul>
<h1 id="recording-sound-from-output-stream">Recording sound from output stream:</h1>
<ul>
<li>Open pulse audio, goto Volume control &gt; Input Devices &gt; Show: Monitors. You will see the bar responding to the output sound.</li>
<li>Click on the green tick sign to “Set as Fallback”</li>
<li>Open sound Recorder and record.</li>
</ul>
<h1 id="converting-media">Converting media:</h1>
<p>sudo apt-get install ffmpeg libavcodec-extra-52 ( optional: libavcodec-unstripped-52 or libavcodec-unstripped-51) ffmpeg -i samjho na.flv -vn -ar 44100 -ab 128k -f mp3 samjho na.mp3</p>
<p>ffmpeg -i Scorpions - Believe In Love.mp4 -ab 128k -ar 44100 -b 200k -r 20 -s 640x480 -aspect 4:3 -f avi BIL.avi follow somuda’s blog: soumyashantnayak.blogspot.com</p>
<h2 id="mp4-encoding-for-mac-and-incorrect-color-in-subsequent-gif">mp4 encoding for mac and incorrect color in subsequent gif</h2>
<p>Mac computers cannot plot mp4 files that are generated from png files. So, we use the following encoding instead.</p>
<pre><code>ffmpeg -i pacman_%3d.png -pix_fmt yuv420p vid4.mp4</code></pre>
<ul>
<li>If the starting number in the input sequence is not 1, specify it using <code>-start_number &lt;num&gt;</code> before the <code>-i</code> option like this:</li>
</ul>
<pre><code>
ffmpeg -start_number 50 -i pacman_%3d.png -pix_fmt yuv420p vid4.mp4</code></pre>
<ul>
<li>The ending number cannot be specified but total number of files after the <code>start_number</code> can be used using <code>-frames:v</code> argument</li>
</ul>
<pre><code>ffmpeg -start_number 50 -i pacman_%3d.png -frames:v 150 -pix_fmt yuv420p vid4.mp4</code></pre>
<ul>
<li>If you encounter the error that the height or width is not divisible by 2, instead of resizing manually, do</li>
</ul>
<pre><code>ffmpeg -start_number 1 -i img_tc_%5d.png -pix_fmt yuv420p -vf &quot;pad=ceil(iw/2)*2:ceil(ih/2)*2&quot; -r 25 -crf 30 vid.mp4</code></pre>
<ul>
<li>Use <code>-crf</code> along with framerate <code>-r</code> to produce smaller video
<ul>
<li>Larger the framerate, smaller and faster the video (good range 20-28)</li>
<li>Larger the <code>crf</code> smaller the video (good range 20-30)</li>
</ul></li>
<li>To increase the duration of each image in the video, use <code>-framerate</code> option which specifies how many frames to show per second (i.e. decreasing this value will increase the duration of each image).</li>
</ul>
<pre><code>ffmpeg -framerate 10 -start_number 1 -i img_tc_%5d.png -pix_fmt yuv420p -vf &quot;pad=ceil(iw/2)*2:ceil(ih/2)*2&quot; -r 25 -crf 30 vid.mp4</code></pre>
<p>Next, convert the output mp4 to gif to get correct color reproduction using</p>
<pre><code>ffmpeg -i vid4.mp4 vid4.gif</code></pre>
<ul>
<li>Combine multiple videos side-by-side using <code>hstack</code></li>
</ul>
<pre><code>ffmpeg -i vid_1.mp4 -i vid_2.mp4 -i vid_3.mp4 -filter_complex hstack=inputs=3 vid_combined.mp4</code></pre>
<h1 id="printing">Printing:</h1>
<p>to know the printer names attached to your computer: lpstat -v to make one of the printers the default one: lpoptions -d <printer_name> (sometimes this step is necessary) for printing files, use the syntax: lpr -P <printer_name> <filename> the output will be of the format: device for <printer_name>: <device> Printing to PDF: lpstat -P Print_to_PDF filename (Here, by default, the printer name is Print_to_PDF) (Note: Sometimes, it produces blank pages i.e. does not print anything. In that case, delete the printer from Menu&gt; Printing and add a generic cpus:/ printer with the name Print_to_PDF (If you want to use that name at all))</p>
<h1 id="ip-and-hostname-resolution">IP and hostname resolution</h1>
<p>List hostnames and ips: arp -a avahi-browse -a For IP &lt;—&gt; Hostname, use resolveip: resolveip IP/Hostname</p>
<p>Sometimes, one way: IP –&gt; Host: host ip_address but most of the time this fails due to the DNS server, I think. For IP &lt;— Host, nslookup: nslookup host This also does not work for internal hosts.</p>
<h1 id="live-ports">Live ports:</h1>
<p>Know the live ports of your OWN hosts, and the connected ips: sudo netstat -tpan</p>
<p>Know if a particluar port is open or not in a remote host: nmap -p port host/ip</p>
<pre><code> nmap --script=smb-enum-users 192.168.2.167 -p 445|perl -le &#39;while(&lt;STDIN&gt;){if(/^.*?\\(\w+)\s+.*/) { print &quot;$1&quot;; }}&#39;</code></pre>
<h1 id="boot-from-livecd-iso-using-grub">Boot from LiveCD iso using GRUB:</h1>
<p>Add this to /boot/grub/grub.cfg in proper place with proper modification:</p>
<p>menuentry “Booting ISO” { insmod part_msdos insmod ntfs set root=‘(hd0,msdos6)’ loopback loop /new/liveDVDmint/ubuntu-11.10-desktop-i386.iso linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=/new/liveDVDmint/ubuntu-11.10-desktop-i386.iso noeject noprompt – initrd (loop)/casper/initrd.lz }</p>
<p>The command “set root=‘(hd0,msdos6)’” is equivalent to mounting the 6th partition of the zero-th hard disk as root (/). The command ‘insmod’ is still unknown to me but the 2nd line (insmod ntfs) tells that the partition type is ntfs. The path name after “loopback loop” tells the location of the iso. The Last 2 lines are enough to resurrect any linux system with a kernel image (in this case, vmlinuz) and a ramdisk (initrd). Define their relative locations and you are good to go. For different distro, the location and names of kernel and initrd are different. Website says, this piece of code is enough to boot a linux: menuentry “My custom Linux” { set root=(hd0,5) linux /boot/vmlinuz initrd /boot/initrd.img } This is NOT tested. If does not work, then Maybe the the options are needed to be changed.</p>
<p>For Windows, instead of kernel and initrd, use “chainloader +1” after defining root. A standard grub.cfg file is a good example.</p>
<h1 id="handy-commands">Handy Commands:</h1>
<p>See the size of partitions: df -h<br />
(-h stands for human-readable. It applies to ‘ls’ too) See the dependency of a package: apt-cache depends <package name> See the packages which are depndent on a package (reverse-dependency) apt-get rdepends <package-name> Search for a package or metapackage:<br />
aptitude search <search_string> See the list of open files: lsof</p>
<h1 id="manually-download-flash-videos">Manually download Flash Videos:</h1>
<ol type="i">
<li>Visit the YouTube video and wait for it to be downloaded fully. Then, run from the command line the command “lsof -n | grep Flash” which shows the files (even memory files!), and filters to those that have Flash in their name. You get something like “plugin-co 2461 user 17u REG 8,5 1693301 524370 /tmp/FlashXXVkHEM6 (deleted)”.</li>
</ol>
<pre><code> In Linux, if a file is deleted, it is actually gone only when all programs that opened it earlier are closed. That is, the Flash plugin is using a trick to hide the /tmp/FlashXXVkHEM6 file. It creates it and immediately deletes it. But since the Flash plugin keeps running, it can apparently still use it.</code></pre>
<ol start="2" type="i">
<li>From the above line we note the number 2461, which is the process ID. In your case it will be probably different. Then, run “cd /proc/2461/fd” and finally execute “ls -l”. This will show you the memory files, and specifically “lrwx—— 1 user user 64 2011-09-16 10:23 17 -&gt; /tmp/FlashXXVkHEM6 (deleted)”. The number 17 (in my case) is the filename you can use to access the deleted /tmp/FlashXXVkHEM6. Therefore, simply run “cp 17 /tmp/myyoutubevideo.flv” and you restore the Youtube Video!</li>
</ol>
<h1 id="peforming-xserver-activities-through-tty-or-remote-ssh-shells">Peforming xserver activities through tty or remote ssh shells:</h1>
<p>After logging in, set the DISPLAY variable to :0.0 or to :0 or any other if necessary (which can be found by issuing w command and looking at the “from” field)</p>
<p>export DISPLAY=:0.0</p>
<p>Then issue your commands like you do in the terminal.</p>
<p>Note: apparently you cannot run a gui program in other user’s tty even by setting the DISPLAY to the user’s tty.</p>
<h1 id="simple-gtk-pop-ups">Simple GTK pop-ups:</h1>
<p>First export DISPLAY There is a software called zenity that’ll do your work. See zenity –help for more options. Example:</p>
<p>zenity –info –text “hello there!”</p>
<h1 id="send-messages-to-other-users-in-terminal">Send messages to other users in terminal:</h1>
<p>The “wall” command will post the strings followed to ALL logged-in user’s terminal. Example:</p>
<p>wall hi there ^D</p>
<p>If you want to send a set of strings to a specific user’s terminal who is already logged in, use:</p>
<p>write target_username your text here ^D</p>
<p>(Note: in order to receive message, the target user must have his mesg set to y. If not, he/she have to to issue the command: mesg y)</p>
<p>(strange thing is that, you don’t need sudo to broadcast a wall message where you have to depend on the target user’s choice to send a message to one specific user. Counterintuitive, huh?)</p>
<h1 id="lock-screen-from-terminal">Lock screen from terminal:</h1>
<p>In GNOME use “gnome-screensaver-command -l”</p>
<p>In general this also works: “xscreensaver-command -lock”</p>
<p>You may need to install required packages: gnome-screensaver and xscreensaver</p>
<h1 id="convert-m4a-to-mp3">Convert m4a to mp3</h1>
<p>This shell script is quite handy for converting a directory of .m4a sound files to .mp3’s. This script requires that you have LAME and FAAD2 installed already.</p>
<pre><code>#!/bin/bash 
for i in *.m4a; do 
    echo &quot;Converting: ${i%.m4a}.mp3&quot; 
    faad -o - &quot;$i&quot; | lame - &quot;${i%.m4a}.mp3&quot; 
done</code></pre>
<p>(Note: The $ evaluates the variable i. So, if you type <code>Converting $i</code>, no problem. The part <code>${i%.m4a}.mp3</code> means that it searches for the string ‘.m4a’ in the end of <code>$i</code>, deletes it (if exists) and appends .mp3)</p>
<p>You then need to make it executable, and move it to the /bin directory.</p>
<pre><code> su 
 chmod +x m4a2mp3 
 mv m4a2mp3 /bin/</code></pre>
<p>Now you can simply type m4a2mp3 in the shell and it will convert any M4A files contained within the current directory to MP3. The script does not delete the old m4a files, but that can be easily added to the script if you wanted.</p>
<h1 id="taking-pictures-through-webcam">Taking pictures through webcam</h1>
<p>Easiest way: To take a picture while looking at the video feed: mplayer -vf screenshot tv:// Press s to take a picture which will have names shot0001.png, shot0002.png etc.</p>
<p>To play the webcam feed: mplayer tv://</p>
<p>To specify particular device, do mplayer tv:// -tv device=/dev/video1</p>
<p>To take a picture without any video feed: mplayer -vo png -frames 5 tv:// and the desired picture is the 5th one, 00000005.png</p>
<p>Using Mplayer (Haven’t checked yet because of long list of arguments): mplayer tv:// -tv driver=v4l2:device=/dev/video0:width=1600:height=1200:outfmt=rgb24 -frames 3 -vo jpeg Using ffmpeg:</p>
<p>ffmpeg -f video4linux2 -i /dev/v4l/by-id/usb-0c45_USB_camera-video-index0 -vframes 1 test.jpeg</p>
<p>The author captures two frames and uses the second one:</p>
<p>ffmpeg -f video4linux2 -i /dev/v4l/by-id/usb-0c45_USB_camera-video-index0 -vframes 1 test%3d.jpeg</p>
<p>There is a software that does the job simply (not checked): fswebcam -r 640x480 –jpeg 85 -D 1 shot.jpg</p>
<h1 id="streaming-audio-using-cvlc-not-tested-yet.-gui-vlc-streaming-is-straightforward-and-works">Streaming audio using cvlc: (not tested yet. GUI vlc streaming is straightforward and works :))</h1>
<p>you want a huge amount of streaming options, both in format and streaming protocols.</p>
<p>VLC offers a huge range of options for both the protocol used to stream as well as the format of the stream. It also acts as both source and server, taking the audio input and streaming it (although it actually does this using the Live555 streaming media module). You can use http, rtp, rtsp among others and transcode the stream into pretty much any format you can think of. It can be quite complicated to setup. VLC can be run via a GUI or via the commandline using cvlc. The VLC wiki (http://wiki.videolan.org/Documentation:Streaming_HowTo) has lots of information about the various streaming options, but the documentation is sadly outdated. After lots of trial and error, I finally came to the following command that worked for me: cvlc -vvv alsa://hw:0,0 –sout ‘#transcode{acodec=mp2,ab=32}:rtp{dst=192.168.1.5, port=1234,sdp=rtsp://192.168.1.5:8085/stream.sdp}’</p>
<p>This basically takes the microphone input, transcodes it into an MP2 file and then streams it via rtp to the address rtsp://192.168.1.5:8085/stream.sdp. If you then open “rtsp://192.168.1.5:8085/stream.sdp” in VLC on the client PC you get live audio, in near real time! The delay is about 1.5 seconds and requires*very little bandwidth. Sadly, there are three problems with this. First; only one client could connect at a time, secondly; the stream seems to fail after a while, sometimes after five minutes, sometime after two hours, but it would always fail and third it very CPU intensive (I am thinking this is why the stream failed on my box).</p>
<h1 id="adding-environment-variables-like-proxy-etc-permanently">Adding environment variables like proxy etc permanently</h1>
<p>Add the data to the file /etc/environment, and/or the file /etc/bash.bashrc in appropriate form</p>
<h1 id="adjusting-brightness-the-ultimate-method">Adjusting brightness (The ultimate method)</h1>
<p>There is a directory that stores the values of backlight brightness. To go to the folder, do: ls /sys/class/backlight</p>
<p>In our case, the result acpi_video0 is the directory. cd into the directory. Then ls. Among them, the file ‘brightness’ contains the value of current brightness. To see the current brightness, do: cat brightness You’ll get 10 which is the maximum brightness. To change this brightness, simply replace the value with desired brightness: echo 5 &gt; brightness</p>
<h1 id="touchpad-and-vertical-scrolling">Touchpad and vertical scrolling</h1>
<p>Installing xf86-input-synaptics will make your touchpad work except for the verticla scrolling. To enable it, open the file /etc/X11/xorg.conf.d/50-synaptics.conf In the first section: Section “InputClass” Identifier “touchpad” Driver “synaptics”</p>
<p>along with the other options, add this line</p>
<p>Option “VertEdgescroll” “on”</p>
<p>Now save and resrat xinit.</p>
<h1 id="systemctl-command">systemctl command</h1>
<p>Example: Adding dhcpcd to systemctl ln -s /usr/lib/systemd/system/dhcpcd.service /etc/systemd/system/multi-user.targer.wants/dhcpcd.service</p>
<h1 id="vim-helps">Vim helps:</h1>
<h2 id="newer-vim-moves">Newer vim moves</h2>
<ul>
<li>Navigation: along with Ctrl-U/D/Y/E, use H/M/L to jump to top, middle, and bottom part of the screen. Then, use zb/zt to adjust the screen. Scroll by the first character of the line using <code>-</code> and <code>+</code>.</li>
<li>While searching, press Ctrl-G/T to jump between partial search highlights</li>
<li>Ctrl-X Ctrl-K to get correct spelling from the dictionary while typing a word</li>
<li>Hop indents in insert mode with Ctrl-D/T. Jump to default indent with <code>S</code> (substitute line) in normal mode, deleting the current line.</li>
<li><code>:browse oldfiles</code> or <code>:bro ol</code> opens a list of last opened files. Useful after closing a file and navigating away.</li>
<li><p>Delete or change up to a mark with “d<code>a" or "c</code>a”. Also delete till the occurrence of search string using <code>d/string</code>, or maybe, <code>d/str&lt;C-G&gt;&lt;C-T&gt;&lt;C-T&gt;ing&lt;CR&gt;</code></p></li>
<li><code>"0p</code> to paste last copied segment even after using <code>d</code> or <code>c</code> in the meantime.</li>
<li><code>:/</code> to search for the last searched string</li>
<li><p>Use buffer instead of tabs for the same project</p></li>
</ul>
<h2 id="vim-window-splitting">vim window splitting</h2>
<ul>
<li>Make window sizes equal after resizing with <code>&lt;C-W&gt;=</code>. Resize further using <code>&lt;C-W&gt;&gt;/&lt;</code></li>
<li>Split current window with the last buffer horizontally using <code>:sb#</code></li>
<li>Split current window with the last buffer vertically using <code>:vert sb#</code></li>
<li>Similarly, split with <code>N</code>-th buffer (from <code>:b</code>) using <code>:sb N</code> and <code>:vert sb N</code></li>
<li>Move current split to (horizontally) left or right using <code>&lt;C-W&gt;&lt;S-H/L&gt;</code> and (vertically) to top or bottom using <code>&lt;C-W&gt;&lt;S-J/K&gt;</code></li>
</ul>
<h2 id="vim-ex-commands">vim Ex commands</h2>
<p>We can apply a command on a range of lines using ex commands.</p>
<ul>
<li><p>Ex commands start with <code>:</code>, followed by a line range to produce a set of line numbers, and a command to apply to those lines. The line range and the command can take additional arguments.</p></li>
<li><p>Line range is separated using a comma (or semicolon for absolute reference) e.g.: <code>:5,10</code> means the lines from 5 to 10 <code>:.,10</code> means the from current line to line 10 <code>:.,+10</code> means the from current line to the next 10 lines <code>:1,$</code> (alternatively, <code>:%</code>) means from line 1 to the last line <code>:'t,\string</code> means from the line containing mark <code>t</code> to the line where the string <code>string</code> appears next after the cursor (Note: to get the next occurrence of <code>string</code> after the mark <code>t</code> (instead of the occurrence of <code>string</code> after the current cursor position), using the separator <code>;</code> instead of a comma)</p></li>
<li><p>A line range can be further filtered using a regular expression <code>re</code> by appending a <code>g/re/</code>. To negate the regular expression <code>re</code> we can append <code>v/re/</code> instead. e.g. <code>:% g/string/</code> means all lines in the file where <code>string</code> appears <code>:/this,+10 g/sring/</code> means all lines between the appearance of <code>this</code> after the current line and 10 lines after that appearance such that the string <code>sring</code> appears in it <code>:'t,$ v/string/</code> means all lines between the tag <code>t</code> and the end of the file such that the string <code>string</code> does <em>not</em> appear</p></li>
<li><p>A command goes after the (filtered) line range. It applies like a for loop to each line in the range.</p></li>
</ul>
<p><code>j</code> to join the line to the next <code>d</code> to delete the line <code>m</code> to move line, followed by a destination (e.g. <code>m$</code> to move to the end of the file) <code>co</code> to copy line, followed by a destination (e.g. <code>:1,10 co +10</code> copies to 10 lines below) <code>p</code> to print line (to a temporary window, which can be saved or further edited) <code>s</code> to substitute, followed by search sting and replacement string and whether on each line or not (possibly with confirmation) (e.g. <code>s/foo/bar/gc</code>) <code>!</code> to call an external command, followed by the external command (e.g. <code>:5,10 !sort</code> that sorts the lines 5 through 10) <code>norm</code> to run a command (e.g. <code>:.,+10norm @a</code> to run the macro <code>@a</code> on the next 10 lines) <code>w</code> to write to disk (e.g. <code>:% g/hello/w test.txt</code> to save all lines with <code>hello</code> to a file) <code>r</code> read (e.g. <code>:$r !date</code> to read the date into the last line)</p>
<p>Acting on a line range (i.e. <em>not</em> to each line in the range but as a whole) <code>c</code> to change the line range, followed by text <code>a</code> to append the line range, followed by text <code>i</code> to insert before the line range, followed by text (e.g. <code>:.,+10 c&lt;CR&gt;</code> followed by <code>hello&lt;CR&gt;.&lt;CR&gt;</code> to change (delete and then add) the next 10 lines by the test <code>hello</code>. Note that <code>.&lt;CR&gt;</code> is to indicate end of input.)</p>
<ul>
<li>A command can take a prefix to modify the line number it is acting on e.g. <code>:5,10 g/hello/-1j</code> joins each line that has the string <code>hello</code> to its <em>previous</em> line (as opposed to the next line) via <code>-1</code> modifier on the line number obtained by the range <code>5,10 g/hello/</code>.</li>
</ul>
<h2 id="basic-vim">Basic vim</h2>
<p>Type vimtutor to go through a short interactive tutorial. For slightly advanced and very useful tutorial: http://linuxgazette.net/152/srinivasan.html Navigation: The most popular way to scroll will be Ctrl-Y/E, Ctrl-D/U. W/w, E/e, B/b to move left-right via words, <code>5b</code>, <code>5e</code> to hop 5 word backward and forward, <code>}</code>,<code>{</code> to move to prev/next blank lines. And most importantly, <code>)</code>,<code>(</code> to hop sentences i.e. hop the fullstops.</p>
<p>Mainly use w,e,b to go left-right, ),( and },{ to hop fullstops and paragraphs, j,k to up down. Ctrl-U/D to move the screen by half page up/down.</p>
<p>Operators: Start selecting text using <code>v</code>, move cursor to select strings, then: copy- y, change - c, delete- d, yank- y, paste- p. Handy commands:</p>
<pre><code>    de - delete upto the end of the current word
    db - delete upto the beginning of the current word
    d) - delete upto the beginning of the current sentence
    d) - delete upto the end of the current sentence
    diw, ciw - cut, change words inside which the cursor is.
    yaw - copy a word (the current word)
    ci(, ci&quot; - change inside () or &quot; &quot;. Can be replaced by di,ca,da
    gf - to quickly go to the filename on which the cursor is
    yy/Y - copy whole line
    dd - cut whole line
    D - delete till the end of the line
    das, dis - delete the current sentence (i.e. enclosed by dots or some vague identifiers(very shady))
    5Y, 5dd - copy/cut 5 lines
    `` (two back-ticks, not apostrophe) - jump to the previous cursor position 
    dtx - change till the next occurrence of character x
    ctx - delete till the next occurrence of character x
    jtx - jump till the next occurrence of character x
    ktx - jump till the previous occurrence of character x
    fx, Fx - jump left, right to the next occurrence of the character x
        (for example, dt. deletes the text till the next dot from the current position)
    xp  - to swap two consecutive letters like &quot;taht&quot; to &quot;that&quot;
    ddp - switch the current line and the next
    A;  - append a semicolon to the end of the line.
    &gt;&gt;  - increase indent of current line.
    &lt;&lt;  - decrease indent of current line.</code></pre>
<p>############################################################################## A list of tricks found in the <a href="http://stackoverflow.com/questions/726894/what-are-the-dark-corners-of-vim-your-mom-never-told-you-about?rq=1">page</a></p>
<p>Moving around in vim: All the long moving around can be done by bB,eE,)(,}{, and the special f/F{char}, t/T{char}. Once f or F is pressed followed by a character, pressing ; and , will take the cursor matching the same character further in that direction. t or T takes one character before the target character.</p>
<p>Tip: To open a hyperlink in your browser, bring the cursor inside the link text and type <code>gx</code>.</p>
<p>Redo in VIM: press Ctrl+R, and not a capital U.</p>
<p>Duyuuuelete everything till the end of the word by pressing . at your heart’s desire.</p>
<p>ci(xyz[Esc] – This is a weird one. Here, the ‘i’ does not mean insert mode. Instead it means inside the parenthesis. So this sequence cuts the text inside parenthesis you’re standing in and replaces it with “xyz”. It also works inside square and figure brackets – just do <code>ci[</code> or <code>ci{</code> correspondingly. Naturally, you can do di (if you just want to delete all text without typing anything. You can also do a instead of i if you want to delete the parentheses as well and not just text inside them.</p>
<p>ci" - cuts the text in current quotes</p>
<p>ciw - cuts the current word. This works just like the previous one except that ( is replaced with w.</p>
<p>C - cut the rest of the line and switch to insert mode.</p>
<p>ZZ – save and close current file (WAY faster than Ctrl-F4 to close the current tab!)</p>
<p>ddp - move current line one row down</p>
<p>xp – move current character one position to the right</p>
<dl>
<dt>U - uppercase, so viwU upercases the word</dt>
<dd><ul>
<li>switches case, so viw~ will reverse casing of entire word</li>
</ul>
</dd>
</dl>
<p>Ctrl+u / Ctrl+d scroll the page half-a-screen up or down. This seems to be more useful than the usual full-screen paging as it makes it easier to see how the two screens relate. For those who still want to scroll entire screen at a time there’s Ctrl+f for Forward and Ctrl+b for Backward. Ctrl+Y and Ctrl+E scroll down or up one line at a time.</p>
<p>Crazy but very useful command is zz – it scrolls the screen to make this line appear in the middle. This is excellent for putting the piece of code you’re working on in the center of your attention. Sibling commands – zt and zb – make this line the top or the bottom one on the sreen which is not quite as useful.</p>
<p>% finds and jumps to the matching parenthesis.</p>
<p>de – delete from cursor to the end of the word (you can also do dE to delete until the next space)</p>
<p>bde – delete the current word, from left to right delimiter</p>
<p>df[space] – delete up until and including the next space</p>
<p>dt. – delete until next dot</p>
<p>dd – delete this entire line</p>
<p>ye (or yE) – yanks text from here to the end of the word</p>
<p>ce - cuts through the end of the word</p>
<p>bye (yiw) – copies current word (makes me wonder what “hi” does!)</p>
<p>yy – copies the current line</p>
<p>cc – cuts the current line, you can also do S instead. There’s also lower cap s which cuts current character and switches to insert mode.</p>
<p>viwy or viwc. Yank or change current word. Hit w multiple times to keep selecting each subsequent word, use b to move backwards</p>
<p>vi{ - select all text in figure brackets. va{ - select all text including {}s</p>
<p>vi(p - highlight everything inside the ()s and replace with the pasted text</p>
<p>b and e move the cursor word-by-word, similarly to how Ctrl+Arrows normally do. The definition of word is a little different though, as several consecutive delmiters are treated as one word. If you start at the middle of a word, pressing b will always get you to the beginning of the current word, and each consecutive b will jump to the beginning of the next word. Similarly, and easy to remember, e gets the cursor to the end of the current, and each subsequent, word.</p>
<p>similar to b/e, capital B and E move the cursor word-by-word using only whitespaces as delimiters.</p>
<p>capital D (take a deep breath) Deletes the rest of the line to the right of the cursor, same as Shift+End/Del in normal editors (notice 2 keypresses – Shift+D – instead of 3) ############################################################################ Others shared:</p>
<p>One that I rarely find in most Vim tutorials, but it’s INCREDIBLY useful (at least to me), is the</p>
<p>g; and g,</p>
<p>to move (forward, backward) through the changelist.</p>
<p>vity and vitc can be shortened to yit and cit respectively. – Nathan Fellman Sep 7 ’09 at 8:27</p>
<p>Not sure if this counts as dark-corner-ish at all, but I’ve only just learnt it…</p>
<p>:g/rgba/y A</p>
<p>will yank all lines containing “rgba” into the a buffer. I used it a lot recently when making Internet Explorer stylesheets.</p>
<p>Jumping the marks: To create a mark, press m and then any letter, say a. So, <code>ma</code> creates a mark named <code>a</code>. Now you can move around here and there. To come back to mark <code>a</code>, press a backtick and the markname i.e <code>\</code>a<code>. If you want to hop marks created in a different file which is not even open in vim right now, you have to create the marks with capital letters. For example, if you create a mark named</code>F<code>by</code>mF<code>in file called file1 and exit it and open another file called file2and you want to jump to the mark F in file1, all you need to do is press</code>mF`.</p>
<p>One very important mark is <code>.</code>, the mark at which the file was last edited. So, after opening a file, pressing <code>tick</code> followed by dot will take you to the place where the file was last edited. You can go back further into the last edited place list by pressing <code>g;</code> and forward by <code>g,</code>.</p>
<p>Other useful special marks are “<code>[" and "</code>]” which take you to the beginning and the ending of the last yanked location. On the other hand, “<code>&lt;" and "</code>&gt;” for the last section.</p>
<p>Typing <code>==</code> will correct the indentation of the current line based on the line above.</p>
<p>Actually, you can do one <code>=</code> sign followed by any movement command. e.g. <code>=ap</code> or <code>=G</code> or <code>=a{</code></p>
<p>For example, you can use the % movement which moves between matching braces. Position the cursor on the { in the following code:</p>
<pre><code> if (thisA == that) {
 //not indented
 if (some == other) {
 x = y;
 }
 }</code></pre>
<pre><code> And press =% to instantly get this:
 
 if (thisA == that) {
     //not indented
     if (some == other) {
         x = y;
     }
 }</code></pre>
<p>Alternately, you could do <code>=a{</code> within the code block, rather than positioning yourself right on the { character.</p>
<p><code>gg=G</code> corrects indentation for entire file.</p>
<p>##############################################################################</p>
<p>Creating visual blocks: Ctrl + v Select the previously selected visual block: gv</p>
<p>Insert a string str in front of every line in a visual block: 1. Select the visual block 2. Press I. It will take you to the beginning of the first string of the first line of the visual block. 3. Enter the string str. 4. Press Esc</p>
<p>Similarly, making any change in every line of a visual block involves similar steps.</p>
<p>Insert Mode (i) commands: Ctrl-w delete upto the word before the cursor Ctrl/Shift-Left/Right to move left/right by one word as usual Ctrl-Y, Ctrl-E mimics (copy-pastes) the characters above and below the cursor.</p>
<p>Ctrl-@ to insert the strings entered in the previous insert mode session and stop insert mode Ctrl-A to insert the strings entered in the previous insert mode session</p>
<p>Word Completion: Press Ctrl-P, Ctrl-N to complete the current half-typed word by the matching word found just before/after the current position. If you don’t want the matching word occurring immediately before/after the current position, i.e. if you want options, then press “Ctrl-X Ctrl-P” or “Ctrl-X Ctrl-N” for a drop down list of matching word occurring before/after the current position. To complete the word using words from dictionary, press “Ctrl-X Ctrl-K” to get a list. This is useful when you don’t know the spelling of some word and you need help on the way typing the word. You can type a couple of letters and type Ctrl-X Ctrl-K then keep typing until you can narrow down the dictionary list and select one. Also, to auto-complete filenames or path, press“Ctrl-X Ctrl-F”.</p>
<p>When autoindent is on (:set autoindent or :set ai), and a new line starts after some whitespaces respecting the indentation, you might want to press backspace to go to the previous indentation mark. But in this case, backspaces only deletes one whitespace at a time. To delete indents one by by one, press Ctrl-D, and insert indents, Ctrl-T. Note: A more powerful indenting option is “smartindent” which brings back your cursor by one tab when you type the ending bracket } to {.</p>
<p>Note: After using smartindent, the autoindent options seems useless. It is faaar better and fun to use. Never use autoindent again. Spread the word.</p>
<p>Searching a string: <code>/string</code> will highlight all the matches. This is case sensitive. <code>:set ignorecase</code> or equivalently <code>:set ic</code>will get rid of that limitation. Pressing n and N will take you back and forth among the search results. <code>:set noic</code> will turn of the ignorecase option. Also, * and # will search the previous and next occurrence of the current word on which the cursor lies. Again, case sensitive if <code>:set ic</code> is not set.</p>
<p>Replace: Replacing is done by the command :substitute or :s. These are some examples with explain the basics:</p>
<pre><code> :%s/foo/bar/g
 Replaces foo by bar everywhere in the file.
 
 :%s/foo/bar/gc
 Replaces foo by bar everywhere in the file with confirmation.
 
 :s/foo/bar/g
 Replaces foo by bar everywhere in the current line.
 
 :s/\&lt;foo\&gt;/bar/gc
 Replaces foo by bar with confirmation everywhere in the file only when foo is found as a whole word i.e. enclosed by spaces.</code></pre>
<p>Once again, <code>:set ic</code> and <code>:set noic</code> will play a role.</p>
<p>Spell Check: To turn on spell check, type :set spell and hit enter. (Optionally, :set spell spelllang=en_us for language selection). Press <code>]s</code> and <code>[s</code> to hop the misspelled words and type z= to get a dropdown list of possible correct spellings. Note that <code>[[</code> and <code>]]</code> takes you to the beginning and ending of the file, similar to GG and gg. To turn off spelling mode, type, :set nospell. You can always all include “set spell” in .vimrc to enable default spell check in the default language en_us. While in insert mode (i), typing “Ctrl-X s” will give you a drop-down list of correct spelling of the last misspelled word.</p>
<p>Edit .vimrc to set necessary options. If it doesn’t exist, copy it from etc. Here are some necessary augmentations to make life simpler:</p>
<p>syntax on (for highlighting the keywords in different colors based on the extension)</p>
<p>set clipboard=unnamedplus (to copy yanked texts to X-system buffer instead of vim buffer, which is useful for yanking from vim and pasting in another program, say firefox. But this gives a little problem regarding pasting, which is arbitrary. Need to fix this.)</p>
<p>set spell spelllang=en_us (to enable spell check in en_us. spelllang=all will allow all languages)</p>
<p>set linebreak (to display long lines after breaking them at spaces i.e. after a word is finished instead of breaking it in the middle of a word)</p>
<p>set visualbell (the screen flashes if you hit Esc more than once to help you control your OCD)</p>
<p>imap <c-l> <c-g>u<Esc>[s1z=<code>]a&lt;c-g&gt;u  (This option accelerates the process of auto correct like crazy. While in insert mode, if you have made a spelling mistake, you can press Ctrl-L to quickly accept the first spelling suggestion of the last misspelled word, create a undo node, come back to your original position and enter insert mode. If you don't like the auto correct, you can press u to undo or Ctrl-R to redo. Here is how it works:     &lt;c-g&gt;u  inserts an undo-break        [s  moves to the last spelling mistake     1z=     chooses the first suggestion</code>] move to the last insert point a append text )</p>
<p>set wildmenu (for option list the :option by pressing tab. For example, :color <Tab>)</p>
<p>Smooth Scrolling: The following code to be added to .vimrc in order to smoothen the scrolling in vim. This affects only affects Ctrl-D, Ctrl-U. Important note: Remember that the ^ character indicates a control character; copy-paste will produce invalid results and these must be entered manually (with CTRL-V)! To enter ^Y in the file, type Ctrl-V, Ctrl-Y. And similarly for ^E.</p>
<p>function SmoothScroll(up) if a:up let scrollaction=“^Y” else let scrollaction=“^E” endif exec “normal” . scrollaction redraw let counter=1 while counter&lt;&amp;scroll let counter+=1 sleep 10m redraw exec “normal” . scrollaction endwhile endfunction nnoremap <C-U> :call SmoothScroll(1)<Enter> nnoremap <C-D> :call SmoothScroll(0)<Enter> inoremap <C-U> <Esc>:call SmoothScroll(1)<Enter>i inoremap <C-D> <Esc>:call SmoothScroll(0)<Enter>i</p>
<p>Make vim open new buffer in new tabs: (useful while pressing gf on a filename/path, :o :e etc)</p>
<p>" Experimental. Remove if buggy. " This is incredibly good. I like it. " set hidden actually lets you open another buffer by :o, :e etc even when the " current file has unmodified changes. Fun! set hidden :au BufAdd,BufNewFile * nested tab sball</p>
<p>Help for tabs: gt, gT to navigate through tabs :qa to quit all, :wqa to save and quit all, :qa! to quit all without saving Most important of all: Press :tabo to close all other tabs except the current one. There is a catch though, it does not care if there is any modified buffer in the other tabs. It ignores them, i.e. the changes in all the other buffers are gone.</p>
<p>Find out more for tab navigation</p>
<p>Syntax folding in VIM:</p>
<p>zi switch folding on or off za toggle current fold open/closed zc close current fold zR open all folds zM close all folds zv expand folds to reveal cursor</p>
<p>Open recently opened files in vim:</p>
<p>:bro ol</p>
<p>This is short for :browse oldfiles. It will show a list of 100 recently opened file. You can navigate through the list to get the number corresponding to your desired file (sorry, no / to search). Press q to quit the navigation mode and get the prompt and enter the number. The code in the previous subsection will ensure that the new buffer is opened in a new tab.</p>
<p>Selecting, changing and editing tags (such as <a> text </a>): You can jump between tags using visual operators, in example:</p>
<pre><code>  Place the cursor on the tag.
      Enter visual mode by pressing v.
     Select the outer tag block by pressing a+t or i+t for inner tag block.

     Your cursor should jump forward to the matching closing html/xml tag. To jump backwards from closing tag, press o or O to jump to opposite tag.

     Now you can either exit visual by pressing Esc, change it by c or copy by y.</code></pre>
<p>#5. Setting VI keybindings for the terminal emulator:</p>
<p>Edit your .inputrc file (or create if it does not exist) and insert the following: set editing-mode vi set keymap vi-command</p>
<p>Note: You have to export the EDITOR variable ans vim: export EDITOR=vim Or, save it it the file that contains the env variable. Where you save your proxy info. i.e.  echo “EDITOR=vim” &gt;&gt; /etc/environment echo “VISUAL=vim” &gt;&gt; /etc/environment</p>
<p>Now save and open the terminal. It’ll behave like vim in insert mode. Although it not as powerful as vim, it is surely something. All the basic vim commands are usable. You can press v to enter the text editor for better editing. Here is the cheatsheet: http://www.catonmat.net/download/bash-vi-editing-mode-cheat-sheet.txt "</p>
<h1 id="copying-some-stuff-to-all-users-that-are-created">Copying some stuff to all users that are created</h1>
<p>Copy stuff into the folder /etc/skel/. While useradd, they will be copied to the corresponding home of the user. These can include dot files like .bashrc, .vimrc etc. Also, you can copy some directories.</p>
<h1 id="search-for-all-http-links-in-a-file-by-grep">Search for all http links in a file by grep</h1>
<pre><code> cat filename | grep &#39;http://[^&quot;]*&#39;</code></pre>
<p>Alternatively, and more intuitively (more useful too), extracting mp3 links from a html file in Vim:</p>
<p>Open the file. Type: gg (goto the beginning of the file) /.mp3 (searches for all occurrence of .mp3 and the cursor waits on the first occurrence of it) qr (starts recording a macro named r) yi" (yanks all link inside " " and cursor moves to the beginning of the corresponding " “) G (goes to the end of the file) o Esc p (Inserts a new line and goes to normal mode and pastes the link in the end) (two back ticks. Two single apostrophies also work) (to go back to the previous cursor position, which is the beginning of the” “) nn (Here, the number of n’s may vary depending on the format of the page. first n takes the cursor to .mp3 inside of the current” " and the second takes it to the next one, which maybe part of the text in a hyperlink rather than being part of a link. In that case you need to enter 3 n’s i.e. nnn) q (now that we have completed the loop, we stop recording the macro, which was named r)</p>
<p>Now press <span class="citation" data-cites="r">@r</span> to run the macro once more and the 5@r to repeat it 5 times. At the end of the process, you have a all the links at the end of the file, which you can yank and paste in a file called dumpfile.</p>
<p>The whole sequence of key presses to create the macro named “r” is: gg/.mp3<Enter>qryi"Go<Esc>p``nnq</p>
<p>(note: here the `` two backticks, not apostrophies. Remember this otherwise it might cause trouble)</p>
<p>Notes: Instead of using two backticks, which may give “mark not set” error, you can actually set a mark every time the cursor is on the search string by giving it a name (say b) using mb. When jumping to that position, use `<code>b</code> and it will be back to that position again.</p>
<p>You can save the macro named r inside .vimrc using let <span class="citation" data-cites="r">@r</span> = ‘yi"Go<Esc>p’‘nnq’</p>
<p>Inside vim you can actually issue "rp to paste the content of the macro to copy it to vimrc.</p>
<p>Then you can dump the output in a file by &gt;&gt; and wget -i dumpfile to download them.</p>
<p>Note: A better and much faster way to download all the files:</p>
<p>cat dumpfile | parallel –gnu “wget -c -b -q {}”</p>
<p>alternatively:</p>
<p>parallel -j #number wget &lt; dumpfile</p>
<p>Caution: stopping wget (pkill) and restarting has some weird download issue. Try not to stop the wget once it’s running. Weird. Even with -c. Needs to be checked.</p>
<p>This command requires a package called parallel which allows parallel downloads unlike a “wget -i listfile”. Here, -c resumes partially downloaded file download, -b sends the wget processes to background, and -q is for quiet mode, i.e. does not generate a logfile while downloading. One problem is that you cannot see the progress of the downloads which is the price of -q, otherwise, you can always cat the wget-logfile to check the download progress. But, doesn’t matter if the connection is reliable, because we don’t want thousands of log files to fill up our space.</p>
<h1 id="lock-screen-for-terminal">Lock screen for terminal</h1>
<p>Note: It is important to have a password for the user before issuing the command. Type: vlock -c to lock the current virtual terminal. vlock -a locks all the virtual terminals belonging to the user. It doesn’t work on X11 so in order to lock everything, Press ctrl+alt+F1/12 to move to one tty which is logged in, or log in. Then issue this command. Once done, it doesn’t let you press ctrl+alt+f2/12 to move to another tty.</p>
<p>To set up a terminal based screensaver, use cmatrix. It gives you a matrix style screensaver without any screen lock facility.</p>
<p>In order to use two of these prgram together, type:</p>
<p>cmatrix; vlock -a</p>
<p>It works fine. For aesthetic purposes, one user recommended:</p>
<p>cmatrix -a -b -u 5; vlock -a</p>
<h1 id="vimperator-matters">Vimperator matters:</h1>
<p>Setting the Ctrl+i editor to vim:</p>
<p>Type:</p>
<p>:set editor=‘xterm -e vim’</p>
<p>Make the command line bar (status bar) smaller:</p>
<p>:highlight Normal -append font-size: 10pt;</p>
<p>Other helps:</p>
<p>Navigation forward/backward: Ctrl+o, Ctrl+i or :ba, :fo, H, L Goto the root of the current website: gU (it takes www.site.com/page/page2 to www.site.com) Close tab: :q, Save and close tab: ZZ</p>
<p>Tab navigation: Change tabs: gt, gT Goto the previously selected tab: Ctrl+6 Goto the tab numbered <n>: g<n> When there are too many tabs, pressing b will show all the tabs. Enter the number of the tab and hit Enter to go to it.</p>
<p>Set local marks: ma, goto mark a: <code>\</code>a`</p>
<p>Open download tab: :downl</p>
<p>Highlight search: :set hsl</p>
<p>Hide scrollbar: :set nosb (To turn back on: :set nosb)</p>
<p>To copy the hinted url to clipboard: (; to enter the) y</p>
<p>Disable vimperator temporarily: Shift-Esc</p>
<p>To hide firefox menubar: :set gui=nomenu To access firefox menu: :emenu [key_word] # or :em[tab]</p>
<p>TODOs: Choose between address bar and vimperator command line bar because both contain the address, although it’s hard to copy-paste from vimperator bar Checked: Remove some more bars to get more space Easy way to look at the title of the page Autohide statusbar, or transparency Smooth scrolling ( implemented. see .vimperatorrc)</p>
<p>Browsing help</p>
<p>Go back in the current tab: H Go forward in current tab: L</p>
<p>reload the .vimperatorrc without restarting firefox :source ~/.vimperatorrc</p>
<p>Toggle between page and its source code: gf Open the source code in EDITOR: gF</p>
<p>Saving things: Press ; to enter the hint mode, press the right key, then the number. s for without prompt, a for with prompt, although both come with prompt initially if “Ask every time” is on.</p>
<p>Saving the destination of a link (Save link as): ;s<link number> or ;a<link number> Saving an object (save image as, save the object etc): ;S<link number>, ;A<link number></p>
<p>Copy link location: ;y (yank, basically, in hint mode) Copy link text (that’s the best that can be done without a mouse): ;Y</p>
<p>Copy current link to the buffer: y Copy highlighted link to the buffer: Y ( Don’t know how to highlight in vimperator bar)</p>
<p>Imp: Copy non-link text from the page:</p>
<p>Caret mode (c) gives you a cursor and you can move around with vim keystrokes and select things using visual block(v) and copy text (y). But there is a catch. Caret mode does not land the cursor on the portion of the page that you are viewing. So, it is important to search a string with / and reach the portion of the page where you want the cursor to be, and then press c to enter caret mode.</p>
<p>Opening a link in new window (F) and same window (f) are easy, but modify the link before opining them requires Hint mode (;) and capital letter. For example, ;T or ;W or ;O lets you edit the thing.</p>
<p>Very interesting: Follow the link labeled next or &gt; if it exists: <code>]]</code> Follow the link labeled prev or &lt; if it exists: <code>[[</code></p>
<p>Open right-click menu of a link: ;c</p>
<p>Add the current page to bookmark: a(then Enter) Remove the current page from bookmark list: A</p>
<p>Undo closed tabs: u Undo last 5 closed tabs: 10u</p>
<p>Toggle between current and the tab opened last: Ctrl-^ (Actually, Ctrl-6) Run same command on tabs from</p>
<p>Stop a loading page: Ctrl-C</p>
<p>Detach a tab from its current window and be on its own: :tabdetach Attach a tab to another firefox windos: :tabattach <number></p>
<p>Show all the navigation history of the current tab: :back <Tab> Open the previous tab history link in a new tab: :back <Tab> <home> &lt;delete “back” and type “tab”/“tabopen” etc&gt; <Enter></p>
<h1 id="wireless-mouse-and-usb-speaker">Wireless mouse and USB speaker</h1>
<p>For wireless(bluetooth) mouse, install bluez4. It should work. For USB speaker, cat /proc/asound/cards to see the available cards. In my case, the USB one is 2. Now edit vim /usr/share/alsa/alsa.conf</p>
<p>and change the line defaults.pcm.card 0 to defaults.pcm.card 2 and save.</p>
<p>To accelerate the process of changing this value, I did this: Create another alsa.conf file next to it(i.e. in the same directory), called alsa.conf.other which contains the altered value i.e. pcm.card 2. cp /usr/share/alsa/alsa.conf /usr/share/alsa/alsa.conf.other vim /usr/share/alsa/alsa.conf (Edit the desired value and save it.)</p>
<p>Now this code interchanges these two files:</p>
<p># we have alsa.conf and alsa.conf.other. We want to interchange them. cp /usr/share/alsa/alsa.conf /usr/share/alsa/alsa.conf.tmp rm /usr/share/alsa/alsa.conf cp /usr/share/alsa/alsa.conf.other /usr/share/alsa/alsa.conf rm /usr/share/alsa/alsa.conf.other cp /usr/share/alsa/alsa.conf.tmp /usr/share/alsa/alsa.conf.other rm /usr/share/alsa/alsa.conf.tmp</p>
<ol start="34" type="1">
<li>Interaction between different consoles through pipes:</li>
</ol>
<p>In a console, create a pipe names mypipe using mkfifo: mkfifo mypipe</p>
<p>(You can see that this file is a pipe by ls -l mypipe)</p>
<p>To use these pipes, redirect the output of a command (say ls -l) to mypipe via: ls -l &gt; mypipe (the cursor will wait)</p>
<p>Now goto another console and take that output out of the pipe via:</p>
<p>cat &lt; mypipe (The cursor on the other console will resume)</p>
<ol start="33" type="1">
<li>Simple sketch of keylogger:</li>
</ol>
<p>Identify your keyboard id with: xinput –list</p>
<p>Log keystrokes with: <code>xinput --test $id</code> (Observation: instead of –test, –test-xi2 is working. And for minimal output, id=12 is good)</p>
<p>Match numbers to keys with: xmodmap -pke</p>
<p>Dumping this output to a file seems to be a challenging task since the command gives an output after we hit Ctrl+C. So, the doing &gt;&gt;dumpfile dumps a chunk of data instead of line per event. In fact, if we use –test, it doesn’t even dump. To avoid this, we use: stdbuf -o0 xinput test 12 &gt; logfile</p>
<p>Read:</p>
<ol start="35" type="1">
<li>Dumping stdout without buffering:</li>
</ol>
<p>You can explicitly set the buffering options of the standard streams using a setvbuf call in C (see this link), but if you’re trying to modify the behaviour of an existing program try stdbuf (part of coreutils starting with version 7.5 apparently).</p>
<p>This buffers stdout up to a line:</p>
<p>stdbuf -oL command &gt; output</p>
<p>This disables stdout buffering altogether:</p>
<p>stdbuf -o0 command &gt; output</p>
<ol start="36" type="1">
<li>Using awk to reformat the output: <code>stdbuf -o0 xinput test 12 | awk -F' ' '{printf $3}'</code></li>
</ol>
<p>This means, consider the lines of the output as a sequence divided by the character ’ ’. Then print the 3rd element of that sequence.</p>
<p>36.5. so, here is the complete keylogger:</p>
<p># The dumping part of the keylogger. A file called mykeylogger</p>
<pre><code> stdbuf -o0 xinput test 11 | stdbuf -o0 awk &#39;/ press /&#39; | stdbuf -o0 awk -F&#39; &#39; &#39;{print $3}&#39; &gt;&gt; dump </code></pre>
<p># The decoding part of it. A different file called decode.sh</p>
<pre><code> for line in $(cat dump)
 do
    xpr=&quot;$(xmodmap -pke | awk &quot;NR==$line-7&quot; | awk &#39;{ print $4}&#39;)&quot;
 #  echo $xpr
    case &quot;$xpr&quot; in
        Return)
            echo -e &quot;\n&quot; &gt;&gt; out2
            ;;
        space)
            echo &quot; &quot; &gt;&gt; out2
            ;;
        *)
            echo -n $xpr &gt;&gt; out2
    esac
    echo -n &quot; &quot; &gt;&gt; out2 
 done  
 echo -e &quot;\n&quot; &gt;&gt; out2
 cat out2</code></pre>
<h1 id="password-protecting-text-files-in-vim">Password protecting text files in VIM:</h1>
<p>To encrypt a file while creating: $vim -x filename (You will be asked to enter a password twice)</p>
<p>To open the file: $vim filename (You will be asked to enter the password)</p>
<p>To edit the file and save it with the same password: $vim filename When finished editing, enter :wq!</p>
<p>To change the password: $vim +X filename</p>
<p>Tip: to verify that the file is encrypted, always check by cat filename</p>
<h1 id="detect-filetype-even-without-the-extension">Detect filetype even without the extension:</h1>
<p>file filename</p>
<p>It will give you useful information about the filetype of filename using its magic numbers. Whatever that means.</p>
<h1 id="incremental-terminal-history-search">Incremental terminal history search:</h1>
<p>In terminal enter:</p>
<p>gedit ~/.inputrc</p>
<pre><code> then copy paste and save </code></pre>
<pre><code> &quot;\e[A&quot;: history-search-backward
 &quot;\e[B&quot;: history-search-forward
 &quot;\e[C&quot;: forward-char
 &quot;\e[D&quot;: backward-char</code></pre>
<pre><code> FROM now on and many agree this is the most useful terminal tool saves you a lot of writing/memorizing... all you need to do to find a previous command is to enter say the first 2 or 3 letters and upward arrow will take you there quickly say i want: </code></pre>
<pre><code> for f in *.mid ; do timidity &quot;$f&quot;; done</code></pre>
<p>all i need to do is enter</p>
<pre><code> fo
 </code></pre>
<p>and hit upward arrow command will soon appear</p>
<h1 id="few-terminal-keyboard-shortcuts">Few Terminal keyboard shortcuts</h1>
<p>Ctrl-k clear all characters after the cursor Ctrl-u Clears all characters before the cursor Ctrl-w clears word before the cursor. a word is set of characters separated by spaces Ctrl-l clear screen</p>
<h1 id="copy-the-content-of-a-file-to-the-x-clipboard-so-that-right-click---paste-works">Copy the content of a file to the X clipboard (so that right click - paste works)</h1>
<p>xclip -sel clip &lt; /path/of/the/file</p>
<h1 id="git-tutorial">Git tutorial</h1>
<h2 id="removing-a-large-file-from-the-commit-history">Removing a large file from the commit history</h2>
<pre><code>git filter-branch --force --index-filter \
  &#39;git rm --cached --ignore-unmatch path/to/file.jpg&#39; \
  --prune-empty --tag-name-filter cat -- --all</code></pre>
<p>Then do</p>
<pre><code>git push origin --force --all</code></pre>
<p>to delete the same in the remote repo.</p>
<ul>
<li>If it is a directory, use <code>rm -r ...</code> instead of <code>rm</code>.</li>
</ul>
<h2 id="create-a-respository">Create a respository</h2>
<p>Created account in github. Created a repository called <code>testconfigs</code> under the username <code>&lt;username&gt;</code>.</p>
<h3 id="ssh-access-to-github">SSH access to github</h3>
<ul>
<li>Generated public ssh key by: <code>ssh-keygen</code> No passphrase, no name (this is important because we won’t be adding this public key using <code>ssh-add</code>). Since this has the default name, the program accepts it by some accident. This needs a fix.</li>
<li>Then follow this to run ssh-add:</li>
</ul>
<pre><code> eval `ssh-agent -s`</code></pre>
<p>(Here, these are two backticks, not apostrophes). Then run:</p>
<pre><code> ssh-add
 cat ~/.ssh/id_rsa.pub</code></pre>
<ul>
<li><p>Copy this output of <code>id_rsa.pub</code> and paste it in the website’s ssh-key field after logging in.</p></li>
<li>Then check that you have ssh access to github using:</li>
</ul>
<pre><code>ssh -T git@github.com</code></pre>
<p>(Caution: <em>not</em> your username or id, but the username <code>git</code>) This is most probably a routine check that you have the access. This does not give you a remote tty or you do not need to stay logged in to perform git tasks. You can probably skip this step.</p>
<ul>
<li>Next, update your name and email address in the config using</li>
</ul>
<pre><code>git config --global user.email &quot;email@domain.com&quot;
git config --global user.name &quot;Name&quot;</code></pre>
<ul>
<li>To copy own ssh public key into another server’s <code>.ssh/authorized_keys</code> so that you can login without password, do</li>
</ul>
<pre><code> .ssh/id_rsa.pub | ssh user@server &#39;cat &gt;&gt; .ssh/authorized_keys&#39;</code></pre>
<ul>
<li>To avoid writing the full <code>user@server</code> address, add a nickname in your <code>.ssh/config</code> like this:</li>
</ul>
<pre><code>Host nickname
  User debdeep
  HostName serve.server.address</code></pre>
<h3 id="to-pushpull-git-repository-without-password">To push/pull git repository without password</h3>
<p>Change the url origin type of your repository to an ssh-based one using:</p>
<pre><code>git remote set-url origin git@github.com:&lt;username&gt;/&lt;repository_name&gt;.git</code></pre>
<h3 id="back-to-creating-a-repository">Back to creating a repository</h3>
<p>Create some empty directory as your repository, which will be your working directory. Then run: <code>git init</code> This will create a <code>.git</code> file in the directory. Now add the address of the remote host, which we are naming <code>gitty</code></p>
<pre><code> git remote add gitty git@github.com:&lt;username&gt;/testconfig</code></pre>
<p>The repository <code>testconfigs</code> will be referred to as <code>gitty</code>.</p>
<p>You can see all the remote hosts by: <code>git remote -v</code> If needed, you can delete a remote host by : <code>git remote rm nickname_of_host</code></p>
<p>Now download all the files from the master branch of <code>gitty</code> by: <code>git pull gitty master</code> Now your working directory will have all the files stored in <code>gitty</code>. You can modify them, add more files etc. After modification, add the files to the modification list using:</p>
<pre><code> git add file1
 git add file2
 git add file3</code></pre>
<p>etc.</p>
<p>After they are added to the <em>changelist</em>, it is the time to commit to the change and add a comment about the changes:</p>
<pre><code> git commit -m &quot;Added file1, file2, changed file3&quot;</code></pre>
<p>After committing, it is time to upload the change back to the place by:</p>
<pre><code> git push gitty master</code></pre>
<p>(Obviously we are uploading to the master branch here) (Here, for the first time you may be asked to enter your email id and username. Follow the instruction to add these info to the file <code>~/.gitconfig</code>)</p>
<p>And we are done.</p>
<h2 id="maintaining-the-local-repo">Maintaining the local repo:</h2>
<p>Create a new repository in the website. Copy the clone address. Locally do</p>
<pre><code>     git clone https://github.com/username/reponame</code></pre>
<p>Now you have a local repo.</p>
<pre><code>         cd reponame</code></pre>
<p>Add files/make changes e.g. <code>cp path/file .</code> Add to the git list : <code>git add file</code></p>
<pre><code> git commit -m &#39;message&#39;
 git push</code></pre>
<p>Provide username and password for your git repo. If you don’t want to enter username/passwd repeatedly, add a remote repo:</p>
<pre><code>  git remote add petname git@github.com:username/reponame</code></pre>
<p>Next, push to the repo called <code>petname</code> like this</p>
<pre><code>  git push petname</code></pre>
<p>Then you won’t be asked for credentials anymore. And by default it will get pushed to the master branch .</p>
<h2 id="adding-and-committing-only-the-files-that-are-in-the-git-ls-files-list">Adding and committing only the files that are in the git ls-files list:</h2>
<pre><code> git commit -am &quot;Staging and committing all the modifications done to files in git ls-files&quot;</code></pre>
<p>Alternatively, <code>get commit -a -m text"</code> works.</p>
<h2 id="merging-branches">Merging branches</h2>
<p>If we want to merge the branch <code>remote_branch</code> to the branch <code>local_branch</code> (the terms <code>remote</code> and <code>local</code> are well-defined in that sense), we do the following.</p>
<ul>
<li>Create a branch</li>
</ul>
<pre><code>git branch local_branch</code></pre>
<ul>
<li>Checkout to the (<code>local</code>) branch using</li>
</ul>
<pre><code>git checkout local_branch</code></pre>
<ul>
<li>Merge the other branch (<code>remote</code>) to the current one (<code>local</code>)</li>
</ul>
<pre><code>git merge remote_branch</code></pre>
<p>Note: you may get ‘branch does not exist’ error, in that case, <code>checkout</code> to the remote branch first and then get back to the local one.</p>
<ul>
<li>Merge conflicts will arise which can be resolved with launching a diffing tool with</li>
</ul>
<pre><code>git mergetool</code></pre>
<ul>
<li>Delete the remote branch</li>
</ul>
<pre><code>git branch -d remote_branch</code></pre>
<ul>
<li>Delete the remote branch on origin (remote)</li>
</ul>
<pre><code>git push -d origin remote_branch</code></pre>
<h3 id="replacing-all-files-without-resolving-conflicts">Replacing <em>all</em> files without resolving conflicts</h3>
<ul>
<li><strong>See below for alternative</strong> ~~ To replace all the local files with the remote files, do</li>
</ul>
<pre><code>git merge --strategy-option theirs</code></pre>
<ul>
<li>To keep local files and discard the remote files while merging do</li>
</ul>
<pre><code>git merge --strategy-option ours</code></pre>
<p>~~</p>
<p><strong>Caution:</strong> Better alternative is to go through <code>git mergetool</code> and open it with <code>vimdiff</code> and then - Make the remote branch the final version with <code>:%diffget RE</code> - Make the local branch the final version with <code>:%diffget LO</code></p>
<h2 id="using-vimdiff-as-a-mergetool">Using <code>vimdiff</code> as a mergetool:</h2>
<ul>
<li><strong>Caution:</strong> Quit unfinished merging work with <code>:cquit</code> (or <code>:cq</code>, to exit with an error code) so that next time <code>git mergetool</code> will launch <code>vimdiff</code> again. Otherwise, the file is all messed up with strings like <code>HEADER &gt;&gt;&gt;&gt;&gt;&gt;</code> and is saved as a real file and <code>mergetool</code> does not do anything.</li>
</ul>
<p>If you quit <code>vimdiff</code> midway and would like to reset the merge again, 1. first cancel the merge</p>
<pre><code>git reset --merge</code></pre>
<ol start="2" type="1">
<li>and perform the merge again with</li>
</ol>
<pre><code>git merge remote_branch</code></pre>
<ol start="3" type="1">
<li>fix merge conflicts</li>
</ol>
<pre><code>git mergetool</code></pre>
<p>or with</p>
<pre><code>git mergetool tool=vimdiff</code></pre>
<p>if it not not configured.</p>
<ul>
<li><p>Resize vimdiff window after maximizing using <code>Ctrl+w =</code></p></li>
<li><p>There are 3 windows on top: left: local: the file from the branch we are current staying, i.e. the local branch right: remote: the file from the branch from which we are merging, the remote branch middle: base: a common ancestor of both local and remote from which both of the files were originated and diverted</p></li>
</ul>
<p>Bottom window: final version of the merged file in the local branch, after merging</p>
<ul>
<li>We navigate in the bottom file (using <code>[c</code> and <code>]c</code>), changing lines if needed. To add changes from the remote version (i.e. from branch <code>remote_branch</code>), do <code>:diffget RE</code> Alternatively, <code>BA</code> or <code>LO</code> for base or local.</li>
<li>To apply the same change to the <em>whole</em> file:</li>
<li>Make the final version of the file same as the remote copy with <code>:%diffget RE</code>:</li>
<li>Make the final version of the file same as the local copy with <code>:%diffget LO</code></li>
<li><p>If the lines get misaligned, do <code>:diffupdate</code></p></li>
<li>After merging is done, save the final version (Bottom window) of the file and quit.</li>
<li>Git <code>.orig</code> files using <code>git clean -fd</code></li>
<li>Might need to add the file again using <code>git add filename</code> (check if this is needed with <code>git status</code>)</li>
<li>Commit the current branch with <code>git commit -m 'merged remote_branch with local_branch'</code></li>
<li>Delete the branch that is merged with the current (local) branch using</li>
</ul>
<pre><code>git branch -d remote_branch</code></pre>
<p><strong>Caution:</strong> attempting to delete the remote branch without committing the merged local branch first will throw warning sign. That would be a reminder that the current needs to to committed.</p>
<h2 id="scenarios">Scenarios</h2>
<ul>
<li><strong>Pull from the internet and discard your local changes:</strong></li>
</ul>
<pre><code>git reset --hard
git clean -f
git pull</code></pre>
<p>Here, <code>clean -f</code> to remove untracked files. <code>clean -fd</code> deletes untracked directories as well. Before <code>clean -f</code>, we can do <code>clean -d</code> to see which files are to be removed.</p>
<ul>
<li>Pull from the internet and set aside the local (uncommited) changes:</li>
</ul>
<pre><code>git stash
git pull</code></pre>
<p>Then to pop back the local uncommitted changes on top of that using</p>
<pre><code>git stash pop</code></pre>
<p>To delete the stash, do <code>git stash drop</code> instead.</p>
<ul>
<li><strong>Desired Method</strong>: Pull from the internet and put the current <strong>committed</strong> changes as next commit after the remote version <a href="https://megakemp.com/2019/03/20/the-case-for-pull-rebase/">(nice explanation for the reason to rebase)</a></li>
</ul>
<pre><code>git pull --rebase</code></pre>
<p>(or just <code>git pull -r</code>)</p>
<p>This might need merge-conflict resolution</p>
<pre><code>git mergetool --tool=vimdiff</code></pre>
<p>and cleanup</p>
<pre><code>git clean -df</code></pre>
<p>Then, to indicate that rebasing is done, we do</p>
<pre><code>git rebase --continute</code></pre>
<p>followed by <code>git push</code> to push the final local change. (Note that <code>git commit</code> is not required and has been done automatically)</p>
<p>This creates a commit history of the order <code>last remote commit, merged local commit</code>.</p>
<p>This (<code>--rebase</code>) is better for history and creates 2 commit histories compared to just <code>git pull</code> (with default <code>--merge</code> behavior), which creates 3 commit histories in the order <code>last remove commit, last local commit, merged commit</code>.</p>
<p>To recover from a failed <code>rebase</code> and revert to the state before the attempted <code>pull</code> (i.e. local changes remain in local directory), do</p>
<pre><code>git rebase --abort</code></pre>
<p><strong>Note</strong>: <code>git pull --rebase</code> should be used over just <code>git pull</code> where we do not want to advertise that a merging has been done, e.g. when working on the same branch. This is the most common scenario.</p>
<ul>
<li>See the difference between file in two different branches</li>
</ul>
<pre><code>git diff branch_1 branch_2 -- filename.txt</code></pre>
<p>The output will have the following: * Common lines are in white * Lines in branch_1 (and not in branch_2) are in red (and with <code>-</code>) * Lines in branch_2 (and not in branch_1) are in green (and with <code>+</code>) To use <code>vimdiff</code>, replace <code>git diff</code> with <code>git difftool</code>.</p>
<ul>
<li><p>To change a conflicted file (with conflict markers) into the state of its last commit, do <code>git restore filename</code></p></li>
<li>See the commit history <em>of the current branch</em></li>
</ul>
<pre><code>git log</code></pre>
<p>or with <code>git log -p</code> to see all the changes (patches) to files. Other useful options are <code>--pretty=oneline</code> or <code>stat</code>.</p>
<ul>
<li>Delete <code>.orig</code> files (record of merging) after merging is done using</li>
</ul>
<pre><code> git clean -fd</code></pre>
<ul>
<li>Maintain empty directories in your repository by creating <code>.gitkeep</code> file (conventional name)</li>
</ul>
<pre><code>touch empty_dir/.gitkeep</code></pre>
<p>and tell to <code>.gitignore</code> to not ignore it using</p>
<pre><code># Inside .gitignore
empty_dir/*
!empty_dir/.gitkeep</code></pre>
<h2 id="rebasing-basing-the-current-commit-on-seems-irrelevant-and-confusing-to-mess-with-history">Rebasing (basing the current commit on) seems irrelevant and confusing to mess with history</h2>
<p><code>git rebase</code> linearizes two diverging branch heads. If we have a diverging branch <code>exp</code> of the <code>main</code> branch, we can do</p>
<pre><code>git checkout exp
git rebase main</code></pre>
<p>to make the changes of <code>exp</code> as a next commit to the ones in <code>main</code>. At this point, the last commit of <code>main</code> becomes a previous commit for <code>exp</code>. So, we can just merge <code>exp</code> to <code>main</code> using</p>
<pre><code>git checkout main
git merge exp</code></pre>
<p><strong>Q</strong>: How to change files with conflict markers to its state before attempted merge?</p>
<pre><code>git merge --abort</code></pre>
<p>Note, for uncommitted files, this might revert the files back to last committed state.</p>
<h2 id="removing-sensitive-information-from-github-repo">Removing sensitive information from github repo</h2>
<p><a href="https://docs.github.com/en/github/authenticating-to-github/removing-sensitive-data-from-a-repository">Main article</a></p>
<ul>
<li>To change the email address of all previous commits</li>
</ul>
<pre><code>git filter-branch -f --commit-filter &#39;
      if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;OLD_EMAIL&quot; ];
      then
              GIT_AUTHOR_EMAIL=&quot;NEW_EMAIL&quot;;
              git commit-tree &quot;$@&quot;;
      else
              git commit-tree &quot;$@&quot;;
      fi&#39; HEAD</code></pre>
<p>Then, force push the repo with</p>
<pre><code>git push --force</code></pre>
<h1 id="all-about-wifi">All about wifi</h1>
<p>Theory (vague):</p>
<p>The wlan card is: wlp6s0 The program “netctl-auto” automates the connecting process. “wifi-menu” creates a profile and keeps it in /etc/netctl. “netctl-auto start/enable <profile>” attaches the profile to netctl and finally, “netctl-auto start/enable netctl-auto@wlp6s0.service” forces wlp6s0 to connect to the internet using the <profile>.</p>
<p>This clears up several jobs:</p>
<ul>
<li>Setting up wifi for the first time:</li>
</ul>
<pre><code> ifconfig wlp6s0 up
 to bring the wlan to life, if it was down.</code></pre>
<p><code>wifi-menu</code> to create a profile.</p>
<pre><code> dhcpcd wlp6s0</code></pre>
<p>to get ip through dhcp.</p>
<pre><code> systemctl enable dhcpcd.service</code></pre>
<p>to make it work over reboots.</p>
<pre><code> systemctl start netctl-auto@wlp6s0</code></pre>
<p>to let netctl-auto handle the automatic connection</p>
<pre><code> systemctl enable netctl-auto@wlp6s0</code></pre>
<p>to make it work over reboots.</p>
<pre><code> netctl-auto enable &lt;profile&gt;</code></pre>
<p>to make the profile work over reboots.</p>
<ul>
<li>Deleting a profile, while it is already enabled:</li>
</ul>
<p>The first step is to tell netctl-auto to stop using the profile.</p>
<pre><code> netctl-auto disable &lt;profile&gt;</code></pre>
<p>should do that. But unfortunately, it still uses the profile somehow. You can verify it by issuing “systemctl restart netctl-auto@wlp6s0” and see that it is again connecting to the same profile. THe solution is to delete the profile.</p>
<pre><code> rm /etc/netctl/&lt;profile&gt;
 netctl-auto disable &lt;profile&gt;
 systemctl restart netctl-auto@wlp6s0</code></pre>
<p>and “ifconfig” to verify that the wlp6s0 is free.</p>
<p>Note that: there is no such method to stop the profile using a single netctl-auto command.</p>
<ul>
<li>Setting up a new profile:</li>
</ul>
<p>To set up the profile, issue wifi-menu</p>
<p>If you get error (maybe through journalctl -xn) that “the interface is already up”, it means that the profile still exists somehow. Follow the previous steps of “Deleting a profile”.</p>
<p>After wifi-menu finishes creating the profile, if “systemctl enable/start netctl-auto@wlp6s0” is already issued, you should be able to connect. Otherwise, issue</p>
<pre><code> systemctl start netctl-auto@wlp6s0
 systemctl enable netctl-auto@wlp6s0</code></pre>
<p>Optionally, use netctl-auto enable <profile> to make it an automatic profile.</p>
<ul>
<li>Switching to a new profile:</li>
</ul>
<p>Use wifi-menu to create a new profile and use netctl-auto switch-to <profile></p>
<ul>
<li>Reconnecting to a profile:</li>
</ul>
<p>#start the netctl-auto service to activate an already enabled profile through “netctl-auto enable <profile>” command:</p>
<p>systemctl restart netctl-auto@wlp6s0.service</p>
<p>If the profile you are trying to connect to is not already enable, you can always connect to it by “wifi-menu”. To enable dhcp service, make sure “dhcpcd wlp6s0” is already issued, or enabled (stays over reboots) using systemctl enable dhcpcd.service</p>
<p>A possible solution to slow wifi: Sometimes, page loads very fast just after the wifi is connected, then after a few seconds, it seems to get stuck. Tried the following and probably worked: blacklist the module b43:</p>
<p>Create the file /etc/modprobe.d/blacklist.conf add add this in it:</p>
<p># Blocking the b43 blacklist b43</p>
<p>And reboot. So the module will not load by default. You can check this by: lsmod | grep b43</p>
<p>So, here, we wish to use the module brcmsmac, and the dependent module bcma. Some online forum says that the this module is slower and wl module should be used even though it is very unstable and only found in AUR.</p>
<p>Also, to stop the console beep, this might help: # Do not load the ‘pcspkr’ module on boot. blacklist pcspkr (The drawback is that if you want the beep sometimes, you will have to manually modprobe or insmod the module)</p>
<h1 id="enabling-cron-job-for-arch-linux">Enabling cron job for arch linux</h1>
<p>systemctl enable cronie</p>
<p>(Cron for arch linux in NOT enabled by default. So you must start it.)</p>
<p>Setting vim to be the default editor:</p>
<p>echo “EDITOR=vim” &gt;&gt; /etc/environment echo “VISUAL=vim” &gt;&gt; /etc/environment (It needs restarting/relogging-in to read from environment file. To get instantly, use: export EDITOR=vim etc)</p>
<p>My current crontab entry is:</p>
<p># Minute Hour Day of Month Month Day of Week Command<br />
<em>/10 </em>/3 * * * cd /storage/Lenovo/lin &amp;&amp; ./agitifyTODO.sh &gt;&gt; outfile <em>/10 </em>/3 * * * ./updateArchy.sh # Supposed to happen every 10 minute of every 3rd hours</p>
<p>#<em>/2 </em> * * * export DISPLAY=:0 &amp;&amp; zenity –info –text “hi” # Pop up every 2 minutes</p>
<p>The files agitify.sh and updateArchy.sh can be found in my github.</p>
<h1 id="microphone-recording">Microphone recording</h1>
<p>Record from the microphone in wav format: arecord out.wav Or, more conveniently, rec out.wav</p>
<p>The following commands require the package “sox”.</p>
<p>The package sox provides almost everything regarding audio handling. Here is how you can monitor your microphone input without recording it (with a dB monitor, that too, stereo): rec -n stat</p>
<p>Without the dB monitor: rec -q -n stat</p>
<p>Show it for 5 seconds then stop: rec -q -n stat trim 0 5</p>
<p>Repeat after every 5 milliseconds: while true; do rec -q -n stat trim 0 0.05; done</p>
<p>Repeat after every 5 milliseconds, but only show the Maximum amplitude in that 5ms time interval:</p>
<pre><code> while true; do echo $(rec -q -n stat trim 0 0.05 2&gt;$1 | awk &#39;/^Maximum amplitude/ { print $3 }&#39;) ; done</code></pre>
<p>Keep recording from standard output and echo 1 if the volume level is above certain threshold (0.15), and return 0 otherwise:</p>
<pre><code> while true; do echo $(rec -n stat trim 0 0.5 2&gt;&amp;1 | awk &#39;/^Maximum amplitude/ { print $3 &lt; .15 ? 0 : 1 }&#39;); done</code></pre>
<p>Following similar command pattern, the following code mutes the master audio level if the input level is more than the threshold, otherwise unmutes:</p>
<pre><code> while true; do amixer set Master $(rec -n stat trim 0 0.5 2&gt;&amp;1 | awk &#39;/^Maximum amplitude/ { print $3 &lt; .15 ? 0 : 1 }&#39;); done</code></pre>
<p>Returns “high” if the amplitude is higher than the threshold, or returns “low”:</p>
<pre><code> while true; do ampli=$(rec -q -n stat trim 0 0.25 2&gt;&amp;1 | awk &#39;/^Maximum amplitude/ { print $3 &lt; 0.15 ? 0 : 1 }&#39;); if [ $ampli -eq 1 ]; then echo &quot;high&quot;; else echo &quot;low&quot;; fi; done</code></pre>
<p>(Self-note: Very mysteriously, 3 &gt; 0.15 ? 1 :0 does not work)</p>
<p>Simulating key stokes: Package called “xdotool” can send keystroked to X11 like this: xdotool key k</p>
<p>So, here is the code to simulate a keypress of “j” simulated ny a tap on the mic or a clap:</p>
<pre><code> while true; do ampli=$(rec -q -n stat trim 0 0.25 2&gt;&amp;1 | awk &#39;/^Maximum amplitude/ { print $3 &lt; 0.15 ? 0 : 1 }&#39;); if [ $ampli -eq 1 ]; then xdotool key j; fi; done</code></pre>
<p>This can be used while endlessly scrolling 9gag/facebook page without hands. Best tool for forever alone guy.</p>
<h1 id="sharing-keyboard-and-mouse-between-multiple-computers">Sharing keyboard and mouse between multiple computers:</h1>
<p>We have two computers called archy and pratima-3z. we want to use archy’s inputs in pratima-3z. Install package called synergy. Archy has the following configuration file:</p>
<p>section: screens archy: pratima-3z: end</p>
<p>section: aliases pratima-3z: 10.10.101.124 end</p>
<p>section: links archy: right = pratima-3z pratima-3z: left = archy end</p>
<p>section: options screenSaverSync = false vector<double> C_lrtb = get_lrtb(PArr[i].CurrPos); # My KVM uses Scroll Lock to switch screens, so set the # hotkey to lock the cursor to the screen to something else keystroke(f12) = lockCursorToScreen(toggle) end</p>
<p>To run the server: synergs -f –config ~/.synergy.conf -f is for foreground.</p>
<p>In the client, run synergyc -f ipaddress</p>
<p>Note: Keyboard can be used only when the mouse is in the corresponding screen.</p>
<h1 id="a-fun-script-to-rotate-the-mouse-pointer-10-times-in-a-circle-of-radius-250-in-clockwise-direction.-needs-xdotool-package.">A fun script to rotate the mouse pointer (10 times) in a circle of radius 250 in clockwise direction. Needs xdotool package.</h1>
<p># Script for fun rotation. Check manpage for more details</p>
<pre><code> for i in {0..3600}
 do
    xdotool mousemove --polar $i 250
 done</code></pre>
<p>Note: An example is the .myscr script wifire</p>
<h1 id="detaching-a-process-from-terminal">Detaching a process from terminal:</h1>
<p>The usual method is to add an &amp; after it. For example: firefox &amp; But when you have already issued the command and the process demands the terminal to stay in place, and you do not wanna restart the process with &amp;, this might help: Press ctrl+z to stop the process Then type: bg to send it to the background as a job Then type: disown to declare that you are disowning the job from the current terminal so that you can close the terminal without affecting the process.</p>
<h1 id="auto-login-to-arch">Auto login to arch</h1>
<p>Create the file: /etc/systemd/system/getty@tty1.service.d/autologin.conf ( Create directories whenever necessary)</p>
<p>Then enter the following:</p>
<p>[Service] ExecStart= ExecStart=-/usr/bin/agetty –autologin root –noclear %I 38400 linux</p>
<p>And save it. Here is the actual link with a few more options. Probably has info about faster booting method. https://wiki.archlinux.org/index.php/Automatic_login_to_virtual_console</p>
<h1 id="making-the-default-font-of-arch-linux-pretty">Making the default font of Arch linux pretty</h1>
<p>To enable the effect for one user, create a file called .fonts.conf and copy this xml code inside: <?xml version="1.0"?> &lt;!DOCTYPE fontconfig SYSTEM “fonts.dtd”&gt; <fontconfig> <match target="font" > <edit mode="assign" name="rgba" > <const>rgb</const> </edit> </match> <match target="font" > <edit mode="assign" name="hinting" > <bool>true</bool> </edit> </match> <match target="font" > <edit mode="assign" name="hintstyle" > <const>hintslight</const> </edit> </match> <match target="font" > <edit mode="assign" name="antialias" > <bool>true</bool> </edit> </match> <match target="font"> <edit mode="assign" name="lcdfilter"> <const>lcddefault</const> </edit> </match> </fontconfig></p>
<p>Now, to make it available system-wide, copy the same xml code in a file called 29-prettify.conf and place it in /etc/fonts/conf.avail/ Then make a symbolic link by: ln -s /etc/fonts/conf.avail/29-prettify.conf /etc/fonts/conf.d/29-prettify.conf Now run: fc-cache</p>
<p>Now it should work.</p>
<h1 id="uninstall-infinality-font-sets">Uninstall infinality font sets:</h1>
<p>sudo pacman -S –asdeps lib32-freetype2 lib32-cairo lib32-fontconfig</p>
<p>Then restart the x-server: pkill xinit</p>
<h1 id="calibre-setup-with-kobo-glo">Calibre setup with Kobo glo</h1>
<p>Install Calibre and the package udisks</p>
<p>pacman -S udisks calibre</p>
<p>Then connect the device, after some time it eill be detected.</p>
<p>For Bookshelf management, follow this link: http://www.teleread.com/ebooks/using-calibre-for-e-book-management-chapter-6-managing-kobo-bookshelves/ (The plugin they mention here is KoboTouch Extended)</p>
<p>Basically, 1. Preferences &gt; Create your Own column &gt; Add &gt; Enter “Book Shelf”, “bookshelf” (without quotes) &gt; Apply 2. Install KoboTouch Extended plugin 3. Preferences &gt; Addon &gt; Select KoboTouch plugin &gt; Customize&gt; Scroll down to where they talk about Book Shelf &gt; Enter “#bookshelf” (without quote) &gt; Apply &gt; Restart.</p>
<h1 id="rules-to-ensure-that-files-stay-in-certain-directory-with-the-same-book-shelf-name">Rules to ensure that files stay in certain directory with the same Book Shelf name:</h1>
<p>While importing, Calibre creates a directory with the same name as the Author and keeps the file inside. And while copying the files to the device, it keeps the same directory structure.</p>
<ol type="1">
<li>So, in order to keep several files in a directory, after importing the files to calibre, you must bulk edit their metadata and change the Author’s name to the desired one. Note: In this process, the actual Author’s name will be changed, which is the price we are paying.</li>
</ol>
<p>Second, creating Bookshelfs in calibre to avoid frantic tapping on the device, which is very frustrating given the speed of the device.</p>
<p>Here is what we want: 1. We wish to keep all the books in either of the book shelves 2. For a file, it’s book shelf name should be the same as the directory which it belongs to. 3. No intersecting book shelves</p>
<p>In order to do that, after importing the books and changing the author’s name, we need to do the following: 2. Select files, bulk edit metadata, goto custom tags/metadata and enter the same name as the directory name/author’s name.</p>
<p>So, in brief, after importing the files from a place, immediately bulk edit the metadata, change the author name, custom tag to the directory name, then send to the device.</p>
<h1 id="batch-resize-images-before-i-forget-how-to">Batch resize images before I forget how to:</h1>
<p>This one resizes all the jpgs to 1024x768:</p>
<pre><code> find . -iname &#39;*.jpg&#39; -exec convert {} -resize 1024x768 {} \;</code></pre>
<p>To ignore aspect ratio, use a <code>!</code> after the dimension like this</p>
<pre><code> find . -iname &#39;*.jpg&#39; -exec convert {} -resize 1024x768! {} \;</code></pre>
<p>The following command will resize an image to a width of 200:</p>
<pre><code>convert example.png -resize 200 example.png</code></pre>
<p>The following command will resize an image to a height of 100:</p>
<pre><code>convert example.png -resize x100 example.png</code></pre>
<h1 id="delete-all-even-or-odd-numbered-file-in-the-directory">Delete all even or odd numbered file in the directory</h1>
<pre><code>ls --color=none *.png | awk &#39;NR % 2 == 1 { print }&#39; | xargs rm -r</code></pre>
<p>Here, the option <code>--color=none</code> makes sure that the output of <code>ls</code> produces text-only string for <code>awk</code> and does not produce terminal color characters (e.g. try <code>ls &gt; testfile</code>).</p>
<h1 id="disk-repairerror-check">Disk repair/error check</h1>
<p>Linux kernels mount devices read-only when their filesystems have errors. You can repair the filesystem with:</p>
<pre><code> sudo fsck.vfat -y /dev/sdc</code></pre>
<p>(replace sdc by the right one)</p>
<h1 id="very-light-http-server-lightpd">Very light http server: lightpd</h1>
<p>https://wiki.archlinux.org/index.php/lighttpd pacman -S lighttpd</p>
<p>Config: /etc/lighttpd/lighttpd.conf Check if config file’s syntax is correct: lighttpd -t -f /etc/lighttpd/lighttpd.conf Default location of index.html file: /srv/http</p>
<p>To create the index.html file: echo ‘TestMe!’ &gt;&gt; /srv/http/index.html chmod 755 /srv/http/index.html</p>
<p>Starting and reloading: systemctl start lighttpd systemctl reload lighttpd</p>
<p>Enabling over boot: systemctl enable lighttpd</p>
<p>To enable php, install php, php-cgi and then add the following to /etc/lighttpd/lighttpd.conf (Note: not inside conf.d/fastcgi.conf etc, unlike what the arch wiki for lighttpd says): # Make sure to install php and php-cgi. See:<br />
# https://wiki.archlinux.org/index.php/Fastcgi_and_lighttpd#PHP</p>
<p>server.modules += (“mod_fastcgi”)</p>
<p># FCGI server # =========== # # Configure a FastCGI server which handles PHP requests. # index-file.names += (“index.php”) fastcgi.server = ( # Load-balance requests for this path… “.php” =&gt; ( # … among the following FastCGI servers. The string naming each # server is just a label used in the logs to identify the server. “localhost” =&gt; ( “bin-path” =&gt; “/usr/bin/php-cgi”, “socket” =&gt; “/tmp/php-fastcgi.sock”, # breaks SCRIPT_FILENAME in a way that PHP can extract PATH_INFO # from it “broken-scriptfilename” =&gt; “enable”, # Launch (max-procs + (max-procs * PHP_FCGI_CHILDREN)) procs, where # max-procs are “watchers” and the rest are “workers”. See: # https://redmine.lighttpd.net/projects/1/wiki/frequentlyaskedquestions#How-many-php-CGI-processes-will-lighttpd-spawn “max-procs” =&gt; 4, # default value “bin-environment” =&gt; ( “PHP_FCGI_CHILDREN” =&gt; “1” # default value ) ) )<br />
)</p>
<p>Finally, set in /etc/php/php.ini cgi.fix_pathinfo = 1 and systemctl reload lighttpd.service to have the effect of this new setting and test it works by the following php file content: <?php
 phpinfo();
 ?></p>
<p>To give php read/write access to a particular directory called ‘data’, do the following Find the user that runs the http process by ps aux | grep httpd In my case, the user is http and root. I’ll give the access to http. (internet suggests other keywords such as www-data etc) Make the user owner of the directory chown -R http:http /path/to/directory/data</p>
<p>Displaying console output while running shell commands thorough shell_exec() in php: add 2&gt;&amp;1 at the end of the shell command.</p>
<p>Error code display while running php: This is very useful while debugging but very dangerous while running because it is possible to figure out code from error messages.</p>
<p>Edit /etc/php/php.ini Change the line display_errors = Off to display_errors = On Important: Do not forget to revert it later.</p>
<p>Another way is to add the following codes to your php files: echo (‘showing errors!’); ini_set(‘display_errors’, 1); ini_set(‘display_startup_errors’, 1); error_reporting(E_ALL);</p>
<h1 id="creating-an-access-point-in-your-system">Creating an access point in your system</h1>
<p>Link: https://bbs.archlinux.org/viewtopic.php?id=162895 Download the create_ap directory from git or otherwise Not NAT or bridge needed. The script has options to set them or not. There are important dependencies. Check README or the create_ap file to find out.</p>
<p>Running:</p>
<p>systemctl disable netctl-auto@wlp6s0.service # So that is does not conflict with our .myscr file “wifi”, where we enabled it) systemctl stop netctl-auto@wlp6s0.service # so that already running service stops as well, disabling it alone is hence not enough ifconfig wlp6s0 up # To bring the interface up (important) # Then enter the directory and see help to set up aps # For example, the share your LAN’s internet through wifi access poing called “koboglo” with passphrase “lenovo1234” ./create_ap wlp6s0 eth0 koboglo lenovo1234</p>
<h1 id="mounting-unclean-ntfs-partition-caused-by-windows">Mounting unclean ntfs partition caused by windows</h1>
<p>install package called: ntfsprogs Then issue the command : ntfsfix /dev/sda1</p>
<h1 id="reconnect-wifi-and-reload-firefoxs-latest-tab">Reconnect wifi and reload firefox’s latest tab</h1>
<p># Reconnect wifi wifi</p>
<p># Sending Firefox the reload command, CTRL+R xdotool search –desktop 3 –class “Firefox” key –clearmodifiers “CTRL+R” # Here, –desktop 3 is necessary without which xdotools was unable to activate # The Number 3 is because firefox is located in the 4th taglist in awesome window manager. The count goes from 0,1,2,3,4,.. etc # You can find the desktop number using: xprop | grep WM_DESKTOP # and then clicking on the window with mouse</p>
<p># Activating the firefox window xdotool search –desktop 3 –class “Firefox” windowactivate</p>
<h1 id="turn-off-screen-blackeningscrensaver">Turn off screen blackening/scrensaver:</h1>
<p>Turn off:</p>
<p>xset s off</p>
<p>To see the screensaver options:</p>
<p>xset q</p>
<p>To change screen timeout time to 1 hour:</p>
<p>xset s 3600 3600</p>
<h1 id="calculate-the-size-of-a-directory-including-its-subdirectories">Calculate the size of a directory including its subdirectories</h1>
<p>The linux command <code>du</code> (see <code>man du</code>) estimates file space usage. To see the the total size of the directory <code>directory</code> along with all its subdirectories, do</p>
<p><code>du -sh direcory/</code></p>
<p>Here, the <code>-s</code> parameter shows the total sum of all the files and subdirectories and <code>-h</code> shows the result in a human readable format.</p>
<p>To show the size of all directory and subdirectory in the current location in ascending order, use</p>
<pre><code>du -sh ./* | sort -h</code></pre>
<p>Here, <code>sort -h</code> sorts in the human-readable format.</p>
<p>This method does not show you the hidden files or directories. So, here is one trick to do exactly that:</p>
<pre><code>du -sch .[!.]* * | sort -h</code></pre>
<p>The parameter <code>-c</code> produces a grand total. The shell pattern following the parameters make sure we are searching for all files including the ones that start with a dot. Whatever. There is a program specifically made for disk analyzing and cleanup purposes and it is awesome. It’s called <a href="https://dev.yorhel.nl/ncdu">ncdu</a>. Just install it and run <code>ncdu</code> and feel the wind.</p>
<h1 id="print-screen-in-linux-using-imagemagick">Print Screen in linux using imagemagick</h1>
<pre><code>import filename.png</code></pre>
<p>gives you a mouse pointer to click on the desired window to take a picture to filename.png.</p>
<p>To take the full screen shot,</p>
<pre><code>import -window root filename.png</code></pre>
<p>Numbering files so that they do not get overwritten (provided you take not more than one picture every second):</p>
<pre><code>import -verbose -window root capture-$(date +%d-%h-%Y-%H-%M-%S).png</code></pre>
<p>In this case,</p>
<pre><code>sleep 5; import -window root file.png;</code></pre>
<p>will be more effective.</p>
<p>Does not work: Taking a screenshot of screen 0 (of DISPLAY 0)through some shell: If you log in through ssh and want to capture a screenshot at that moment, issue:</p>
<pre><code>import -window root -display :0.0 -screen capture-$(date +%d-%h-%Y-%H-%M-%S).png</code></pre>
<h1 id="set-up-the-correct-time-zone-to-avoid-wrong-datetime-in-gmailgtalk">Set up the correct time zone to avoid wrong date/time in Gmail/gtalk</h1>
<p>timedatectl set-timezone Asia/Kolkata</p>
<p>For US, we can do</p>
<pre><code>timedatectl set-timezone US/Eastern</code></pre>
<p>Or,</p>
<pre><code>timedatectl set-timezone US/Central</code></pre>
<p>(Note that these timezones are not available via autocomplete or listed in <code>timedatectl list-timezones</code>.)</p>
<p>You can check if the change is applied using</p>
<pre><code>timedatectl status</code></pre>
<ul>
<li>To see the current time date info, timedatectl status</li>
</ul>
<p>Doesn’t work:To avoid the jumbled time over reboots between different OS like windows, force linux to use RTC time instead of it’s usual UTC. timedatectl set-local-rtc 1</p>
<p>Useful for now: Time synchronisation with a time server: timedatectl set-ntp true to activate this synchronisation, and to see if it is active: timedatectl status</p>
<p>systemctl status chronyd.service should show the running daemon, but in this case, it is not working. Maybe you have to set it up. It launches a service which you can see by systemctl status systemd-timesyncd.service -l The Config file which has to be modified for this to work is:/etc/systemd/timesyncd.conf</p>
<p>Final (standalone working solution):</p>
<ol type="a">
<li>Install ntp</li>
<li>Edit the config file: /etc/ntp.conf</li>
<li>Set up the right servers: By default it uses the arch severs and they should be enough. But for faster and/or more accurate syncing, we can use the indian servers which are up. The list can be found on: http://www.pool.ntp.org/</li>
</ol>
<p>For the time being, these are working:</p>
<p># indian and asian servers server 1.in.pool.ntp.org server 0.asia.pool.ntp.org server 2.asia.pool.ntp.org</p>
<ol start="4" type="a">
<li>Running the programme: A daemon is generally ran in the background so that the time can be synced all the time. But in our case, we only need to run it once whenever we need, without needing to write the daemon in the background. So, we run:</li>
</ol>
<p>ntpd -qg</p>
<p>Here, -q is for one-time run. The -g parameter is very important since it allows ntp to sync time even when the time difference is significantly high.</p>
<p>I guess it uses timezone info which should be preconfigured at your timedatectl.</p>
<ol start="5" type="a">
<li>This process changes the system time only and NOT the hardware clock. That is why it does not persist over reboots. To keep this time, issue</li>
</ol>
<p>hwclock –systohc</p>
<p>This actually sets the hw clock to be the local time. If you want to set UTC to be the hardware clock then use –utc along with –systohc.</p>
<h1 id="show-percentage-bar-while-copying-using-cp">Show percentage bar while copying using cp</h1>
<p>(has to be a better way though)</p>
<p>#!/bin/sh # # cpbar – era 2008-05-21 for unix.com # # Depends: # stat # cp # awk</p>
<p>syntax () { echo “Syntax: <span class="math inline">$0 srcfile destfile" &gt;&amp;2  echo " " "$</span>@” &gt;&amp;2 exit 1 }</p>
<p>test -r “$1” || syntax “File ‘$1’ not found” test -d “$2” &amp;&amp; syntax “Must name destination file (‘$2’ is a directory)”</p>
<p>size=<code>stat -c %s "$1"</code></p>
<p>cp “$1” "<span class="math inline">$2" &amp;  cppid=$</span>!</p>
<p>trap ‘echo; kill $cppid; rm -f “$2”; exit 127’ 1 2 3 5 15</p>
<p>while true; do nsize=<code>stat -c %s "$2"</code> awk -v f1=“$1” -v f2=“<span class="math inline">$2" -v size=$</span>size -v nsize=$nsize ’ BEGIN { printf”Copying %s to %s: %4.2f%%, f1, f2, 100*nsize/size }’ case $nsize in $size) break ;; esac sleep 1 done</p>
<p>echo</p>
<p>wait $cppid</p>
<p>###END</p>
<h1 id="setting-up-static-ip">Setting up static ip</h1>
<p>To set the ip and the netmask (subnet mask) (broadcast address will be set automatically, is it needed to change ever)</p>
<p>ifconfig enp7s0 10.208.22.26 netmask 255.255.255.0 up</p>
<p>Set the default gateway: ip route add default via 10.208.22.1</p>
<p>Setting up dns: Edit the file: resolv.conf (beware: not resole.conf) Add the nameserver 10.16.25.15</p>
<h1 id="to-see-the-default-programme-for-a-certain-filetype-we-need-xdg-mime.">To see the default programme for a certain filetype, we need xdg-mime.</h1>
<p>Note: now we can solve opening files through firefox download window.</p>
<p>To get mime type of photo.jpg:</p>
<p>$ xdg-mime query filetype photo.jpg</p>
<p>photo.jpg image/jpeg</p>
<p>Get default application</p>
<p>To get default .desktop file starter for image/jpeg mime type:</p>
<p>$ xdg-mime query default image/jpeg</p>
<p>gpicview.desktop;</p>
<p>Set the default file-browser</p>
<p>To make Thunar the default file browser, i.e. the default application for opening folders:</p>
<p>$ xdg-mime default Thunar.desktop inode/directory</p>
<p>Set the default PDF viewer</p>
<p>To use xpdf as the default PDF viewer:</p>
<p>(wont work, read further) $ xdg-mime default xpdf.desktop application/pdf</p>
<p>For a root user like myself, the above command won’t work since I am not in one of those normal user scenario, so we will have to change the file /usr/share/applications/mimeinfo.cache and put the desired programme name.desktop as the first choice. Save the file and issue the xdg-mime query kind of command to check whether it worked or not. Worked for me.</p>
<p>Example: Making ranger the default file manager:</p>
<ol type="a">
<li>Target filetype is directory. We need the mime-type.</li>
</ol>
<p>file –mine-type -b random_directory</p>
<p>We get the output: inode/directory. So, this is our target mime-type.</p>
<ol start="2" type="a">
<li>Create a .desktop file for ranger. Save the following content in a file called ranger.desktop.</li>
</ol>
<p>[Desktop Entry] Name=Ranger Exec=ranger Terminal=true Type=Application MimeType=inode/directory;</p>
<ol start="3" type="a">
<li>Install this .desktop file using:</li>
</ol>
<p>desktop-file-install ranger.desktop</p>
<ol start="4" type="a">
<li><p>Check that this is installed in this location: /usr/share/applications/</p></li>
<li><p>Now, make it the default application using (from any location):</p></li>
</ol>
<p>xdg-mime default ranger.desktop inode/directory</p>
<ol start="6" type="a">
<li>Check that it is working using: xdg-open random_directory</li>
</ol>
<p>Note: There is an alternative to the step e. You can edit this file /usr/share/applications/mimeinfo.cache and manually type inode/directory=ranger.desktop; Or, you can engage many applications for one mime-type like this: inode/directory=ranger.desktop;thunar.desktop;nautilus.desktop; But the .desktop file which comes first becomes the default one. Note: Step e actually modifies the file ~/.local/share/applications/mimeapps.list which is local (user-specific). Editing the actual /usr/share/applications/mimeinfo.cache actually applies to system-wide, but gets reverted on system update.</p>
<h1 id="make-the-volume-control-for-mplayer-the-keys-0-and-9-work-or-make-them-independent-of-the-system-volume-control">Make the volume control for mplayer ( the keys 0 and 9) work, or make them independent of the system volume control:</h1>
<p>Create the file ~/.mplayer/config and add this line to it: softvol=1</p>
<h1 id="reducing-your-screen-brightness-and-add-red-colour-at-night-so-that-you-can-fall-asleep-better-or-not-get-blinded-by-electronic-devices-like-twilight-in-android">Reducing your screen brightness and add red colour at night so that you can fall asleep better, or not get blinded by electronic devices (like twilight in Android)</h1>
<p>Run it from command line or with systemctl. Set the latitude and longitude of your location in the config file:</p>
<pre><code> ~/.config/redshift.conf</code></pre>
<p>Set the screen to be 0, and other things. Set the colour temperature also.</p>
<h1 id="managing-tasks-task-warrior">Managing tasks task warrior</h1>
<p>Install. It’s called just task. pacman -S task Then run it. You’ll be prompted to create the config file. Say yes. Modify the .taskrc file to use the light-256 theme, that works best with white terminal background. If you ever consider shifting to darker terminal, maybe explore the other themes, recommended: dark-256, obviously.</p>
<p>git add the files .taskrc, and the directory .task so that you can have them forever.</p>
<p>Basic commands: Create a task: task add “Name of the task” List the tasks: task Mark a task done: task ID done (IDs are 1, 2 3, … etc) Delete a task (including one that is done): task ID delete Modify a task name: task ID modify “new and modified task description” Add comments to already-existing task description (annotate): task ID annotate “and another thing” Add more info to a task: task ID modify project:projectname due:duedate Modify many tasks to add a common project name: task ID1 ID2 ID3 modify project:projectname Schedule a task to automatically disappear after a given time: task 1 modify until:eoy Schedule a task to automatically appear after a given time: task 1 modify wait:30th</p>
<p>Modify(e.g. change tagnames) a set of tasks by some attribute(e.g. project) : task project:projectname modify +tagname</p>
<p>Print [next] tasks with specific attributes:</p>
<p>print all the tasks in the “prj” project name: task project:prj print all the tasks in the “prj” project name and empty tag name: task project:prj tag: take all the tasks with “prj” project name and empty tag name and give them the tag name “newtag”: task project:prj tag: modify +newtag print all tasks which are started: task started (write “task reports” to see all possible options)</p>
<p>Now, some more info, to be better: http://taskwarrior.org/docs/best-practices.html</p>
<p>Assign a project to your tasks if possible:</p>
<p>task ID modify project:Home</p>
<p>Assign due dates where appropriate, for the important tasks:</p>
<p>task ID modify due:31st</p>
<p>When you start working on a task, mark it started:</p>
<p>task ID start</p>
<p>If you know the priority of a task:</p>
<p>task ID modify priority:M</p>
<p>Add useful tags to a task:</p>
<p>task ID modify +problem +house</p>
<p>Add the special tag +next to a task, to boost its urgency:</p>
<p>task ID modify +next</p>
<p>Represent dependencies, where appropriate, because there is a big difference in the urgency of a blocking task, than that of a blocked task:</p>
<p>task ID modify depends:OTHER_ID</p>
<p>Try not to have large, long-term tasks that will sit on your list forever. It can be very satisfying and motivating to complete tasks, so create more, but smaller, tasks.</p>
<p>Adding due dates:</p>
<p>The rules for date and time format can be changed from rc.dateformat setting (find out how to change it), but the default setting is the British Convention. example:</p>
<p>task add Open the store due:2015-01-31T08:30:00 task add Pay the rent due:eom</p>
<p>Other handy commands that can be used to mention due date/time:</p>
<p>Date &amp; Time</p>
<p>Taskwarrior supports date and time values. Date fields are used to track task creation, due date, scheduled date, end date and so on, as well as providing a date type for use with UDA fields.</p>
<p>Whichever format is used to accept and display date and time, Taskwarrior resolves it to a UTC epoch value, accurate to one second. This is called Unix Time, POSIX time, or Epoch time.</p>
<p>But you have full control over the format entered and the format displayed, and this document is a demonstration of this. Due Date Example</p>
<p>Let us begin with an example of specifying a due date when the task is created:</p>
<p>$ task add Pay the rent due:2015-01-31</p>
<p>Or adding a due date to an existing task:</p>
<p>$ task add Pay the rent $ task 1 modify due:2015-01-31</p>
<p>Finally removing a due date from a task:</p>
<p>$ task 1 modify due:</p>
<p>This examples uses the default rc.dateformat, which is Y-M-D, to read the date from the command line. rc.dateformat</p>
<p>The rc.dateformat setting allows you to specify other formats for date input. An example is the default, Y-M-D, which means a date is:</p>
<pre><code> a 4-digit year (&#39;Y&#39;)
 followed by a hyphen (&#39;-&#39;)
 followed by a 2-digit month (&#39;M&#39;)
 followed by a hyphen (&#39;-&#39;)
 followed by a 2-digit day (&#39;D&#39;)</code></pre>
<p>Here are the possible elements of rc.dateformat:</p>
<p>m 1 or 2 digit month number, eg ‘1’, ‘12’ M 2 digit month number, eg ‘01’, ‘12’ d 1 or 2 digit day of month number¸ eg ‘1’, ‘12’ D 2 digit day of month number, eg ‘01’, ‘30’ y 2 digit year, eg ‘12’, where the century is assumed to be ‘20’, therefore ‘2012’ Y 4 digit year, eg ‘2015’ h 1 or 2 digit hours, eg ‘1’, ‘23’ H 2 digit month hours, eg ‘01’, ‘23’ n 1 or 2 digit minutes, eg ‘1’, ‘59’ N 2 digit minutes, eg ‘01’, ‘59’ s 1 or 2 digit seconds, eg ‘1’, ‘59’ S 2 digit seconds, eg ‘01’, ‘59’ v 1 or 2 digit week number, eg ‘1’, ‘52’ V 2 digit week number, eg ‘01’, ‘52’ a 3-character English day name abbreviation, eg ‘mon’, ‘tue’ A Complete English day name, eg ‘monday’, ‘tuesday’ b 3-character English month name abbreviation, eg ‘jan’, ‘feb’ B Complete English month name, eg ‘january’, ‘february’ Everything else All other format characters are taken as literals</p>
<p>Including Time</p>
<p>Using rc.dateformat you can specify a date with or without elements that include time. If your dateformat omits any time elements, then you just specify the date, and the time defaults to 00:00:00.</p>
<p>An example shows this using a temporary override:</p>
<p>$ task add Pay the rent due:2015-01-01 $ task 1</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ID</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Description</td>
<td style="text-align: left;">Pay the rent</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Status</td>
<td style="text-align: left;">Pending</td>
</tr>
<tr class="even">
<td style="text-align: left;">Entered</td>
<td style="text-align: left;">2015-01-02 16:57:44 (8 seconds)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Due</td>
<td style="text-align: left;">2015-01-01 00:00:00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Last modified</td>
<td style="text-align: left;">2015-01-02 16:57:44 (8 seconds)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UUID</td>
<td style="text-align: left;">6eb7c4d7-6323-4ee3-bf13-63c580de3712</td>
</tr>
<tr class="even">
<td style="text-align: left;">Urgency</td>
<td style="text-align: left;">9.58</td>
</tr>
</tbody>
</table>
<p>$ task add Open the store due:2015-01-01T08:30:00 rc.dateformat:Y-M-DTH:N:S $ task 2</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ID</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Description</td>
<td style="text-align: left;">Open the store</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Status</td>
<td style="text-align: left;">Pending</td>
</tr>
<tr class="even">
<td style="text-align: left;">Entered</td>
<td style="text-align: left;">2015-01-02 16:58:15 (6 seconds)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Due</td>
<td style="text-align: left;">2015-01-01 08:30:00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Last modified</td>
<td style="text-align: left;">2015-01-02 16:58:15 (6 seconds)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UUID</td>
<td style="text-align: left;">bc8f9b89-8dea-4dae-87e5-b320b651c25c</td>
</tr>
<tr class="even">
<td style="text-align: left;">Urgency</td>
<td style="text-align: left;">9.419</td>
</tr>
</tbody>
</table>
<p>The first task added used the default rc.dateformat value of Y-M-D. You can see that the due date was recorded with time 00:00:00.</p>
<p>The second task added specified an rc.dateformat override value of Y-M-DTH:N:S. You can see that the due date was recorded with time 08:30:00, as specified.</p>
<p>You can specify date, or date + time, but whatever you specify must match your rc.dateformat setting. Reports</p>
<p>The rc.dateformat setting is used for both specifying dates on the command line, and displaying them in reports. Most reports allow a further override, for report-specific display formats, such as rc.report.REPORT.dateformat, but there are others. See man taskrc for a complete list.</p>
<p>For display purposes, there are two additional elements:</p>
<p>j 1, 2 or 3 digit day-of-year number, sometimes referred to as a Julian date, eg ‘1’, ‘11’, or ‘365’ J 3 digit day of year number, sometimes referred to as a Julian date, eg ‘001’, ‘011’, or ‘365’</p>
<p>Synonyms 2.4.0</p>
<p>In addition to formatted dates, you can use a date synonym instead:</p>
<p>$ task add Pay the rent due:eom</p>
<p>Here the synonym eom means ‘end of the month’. Synonyms are a useful shortcut to entering lengthy dates. Here is the full set:</p>
<p>now today<br />
sod<br />
eod<br />
yesterda tomorrow monday, january, later, s soy<br />
eoy<br />
soq<br />
eoq<br />
som<br />
socm<br />
eom, eoc</p>
<p>Here, eo=end of, so=starting of (the next), soc=starting of the current, d=day, w= week, m=month, y=year, q=quarter etc. See http://taskwarrior.org/docs/dates.html for more details.</p>
<p>A recurring task is a task with a due date that keeps coming back as a reminder. Here is an example:</p>
<p>task add Pay the rent due:1st recur:monthly until:2015-03-31</p>
<p>To get rid of unnecessary info that is displayed, this page can be a lifesaver:http://taskwarrior.org/docs/verbosity.html</p>
<p>The most useful info are:</p>
<p>Adding the line verbose=no to the file .taskrc will help you get rid of the footnote and header.</p>
<p>Here is an example of a custom report called “verybasic” which contains very specific columns that we want, in our desired order. Either add the following lines to .taskrc or add “task” to the beginning of every line and run individually in terminal (both have the same effect):</p>
<p>report.verybasic.description=‘A list with very basic information, created by me.’ report.verybasic.columns=id,project,tags,description.count,due report.verybasic.sort=start-,urgency- report.verybasic.filter=status:pending</p>
<p>To make this report your default output report, add to your .taskrc: default.command=verybasic</p>
<p>or, issue this command in terminal: task config default.command ‘verybasic’</p>
<p>To see this custom report in action, just run “task verybasic”. Detailed documentation found at: http://taskwarrior.org/docs/tutorials/report.html</p>
<p>To undo a change that you have made: task undo</p>
<p>Task warrior has a very good calendar display with useful info showing. Use task calendar You can combine more commands to generate desired output.</p>
<p>A task warrior front end vit. Compile from the AUR. I run into problems: vit freezes while I want to make any task done, or delete etc. Magically, it disappeared when I did this: I had a user-defined custom report which was not created carefully. I don’t know which one was missing, but I recreated one from the “next” report, (only deleted some fields) and now it works fine. I think, the description.count was converted to description only. But I have to verify.</p>
<p>Syncing your tasks through a remote server and have it on android:</p>
<p>The website freecinc website provides a service to host your tasks so that you do not need to set up your own server (although, one day, I will set it up, when I have my own website). To use this, simply log in to the website and follow their instruction. After you are done, in order to sync manually, run “task sync” in your client and done. To automate it, add this to your crontab -e:</p>
<h1 id="syncing-task-warrior">Syncing task warrior</h1>
<p>3 <em>/2 </em> * * task sync &amp;&amp; notify-send “Syncing Tasks” and send a littel notification every time.</p>
<p>In android, the app Mirakel gives you a way to upload a specially created config file so that you can sync with your server (freecinc, in this case). Format of this config file:</p>
<p>username: foo org: bar user key: aa0f8f67-c20c-4476-b1c4-ed72f293006c server: localhost:6544 client.cert: —–BEGIN CERTIFICATE—– … —–END CERTIFICATE—– Client.key: —–BEGIN RSA PRIVATE KEY—– … —–END RSA PRIVATE KEY—– ca.cert: —–BEGIN CERTIFICATE—– … —–END CERTIFICATE—–</p>
<p>Get your username, org and server from the line starting with “taskd.credentials=” in the file ~/.taskrc. The format of that line is taskd.credentials=org/username/user_key (note that the org comes before the username) Get your server from the line staring with “taskd.server=” Finally, insert the contents of the file <code>*.cert.pem</code>, <code>*.key.pem</code>, <code>*.ca.key</code>. Save it with any name and send it to the mobile phone so that you cam import it into mirakel.</p>
<p>Tips: Use arithmetic operations in attributes: task add newtask due:2days scheduled:due-1day</p>
<p>My new favourite is inthe.AM. This one has a web frontend as well as a nice server. Works similarly. You have to login with your email.</p>
<p>To use Mirakel effectively, I use these UDAs which are defined in my taskrc:</p>
<h1 id="very-nice-image-viewer-with-nice-features-better-than-feh-except-for-the-zooming-part">Very nice image viewer with nice features (better than feh, except for the zooming part)</h1>
<p>pacman -S sxiv</p>
<p>See then manage to see all the controls, most are very useful, similar to the vim keybindings, useful ones are:</p>
<p>Enter to see the thumbnail mode w,W to best fit e,E to fit image to height, width = to show 100% 3j to scroll 3 times j 85= to show it 85% b to toggle bars</p>
<p>Question: how to delete the thumbnails generated? Where is the cache file? Answer: ~/.cache/sxiv</p>
<p>Tips: Support opening .gifs: use <code>sxiv -a *.gif</code> Open all images recursively(means including subdirectories) in the current directory: sxiv -a -r .</p>
<h1 id="making-whole-linux-dark">Making whole linux dark</h1>
<ol type="I">
<li>Firefox:</li>
</ol>
<p>Change the firefox default page colors to dark background and white/yellow text</p>
<p>Install plugin: Dark Backgrounds Switcher</p>
<p>Change the menu bar and other components of firefox, without any plugin (developer option, from firefox 35 onwards, lucky me) Open about:config and look for the string: browser.devedition.theme.enabled Make it true by double clicking on that value. Press F12 to open developer mode, click on the wheel button on upper right corner, which is the Options button, scroll down to find “Dark Theme”.</p>
<ol start="2" type="I">
<li>Xterm:</li>
</ol>
<p>Change the terminal color: Edit the file .Xdefaults and add the following lines if do not exist: ## color scheme for xterm #xterm<em>background: grey11 #xterm</em>foreground: cornsilk1</p>
<ol start="3" type="I">
<li>Vim:</li>
</ol>
<p>Edit vim’s spell check highlight color: Changing the colors scheme altogether is the key. Add this line to .vimrc:</p>
<p>colorscheme slate</p>
<p>This scheme seems nice for now, shift to better one when possible.</p>
<ol start="4" type="I">
<li>task warrior</li>
</ol>
<p>In .taskrc, uncomment dark-green-256 theme.</p>
<ol start="22" type="A">
<li>Vimperator statusbar</li>
</ol>
<p>You have to set the colorscheme, can be downloaded other people’s or use my own. Coming soon, or will be uploaded to github.</p>
<ol start="6" type="I">
<li>Zathura</li>
</ol>
<p>In .config/zathura/zathurarc, add the lines:</p>
<p>set recolor-darkcolor “#93A1A1” set recolor-lightcolor “#002B36” Now either add the line to the file set recolor true or issue it inside the programme to activate it.</p>
<h1 id="remove-mouse-module-and-insert-again-to-disableenable-mouse">Remove mouse module and insert again to disable/enable mouse:</h1>
<p>rmmos psmouse removes the mouse</p>
<p>modprobe psmouse inserts it back, have to wait for 5-6 seconds.</p>
<h1 id="play-video-as-background-through-mplayer">Play video as background through mplayer</h1>
<p>mplayer video.ogv -rootwin -vf scale=1280:800 -noconsolecontrols</p>
<h1 id="copying-between-terminals">Copying between terminals:</h1>
<p>Theory: Shift+Insert:</p>
<p>Whatever is selected, be it by mouse or visual mode in vim, goes to the buffer. That means, copying to the buffer is done. No need to copy separately. That means, no need to press y to yank after selecting in vim, no need to press Ctrl+C in Firefox. Shift+Insert pastes. Tips: avoid selecting anything else in the meantime at all costs.</p>
<p>Theory: Ctrl+C:</p>
<p>So, you are selecting a string before pressing Ctrl+C. Selecting it makes it available for Shift+Insert. Also, it makes it available for Ctrl+V also. So, both will give you same results.</p>
<p>However, do the following, you’ll end up with two different buffers to use whenever possible: 1. Select text_a in firefox (text_a goes to Shift+Insert Buffer) 2. Press Ctrl+C (text_a goes into Ctrl+V buffer) 3. Select text_b (text_b goes into Shift+Insert buffer)</p>
<p>Now, in firefox text field, you get the following:</p>
<p>Shift+Insert -&gt; text_b Ctrl+V -&gt; text_a</p>
<p>But in xterm, you have only Shift+Insert available, so only text_b is available to you for terminal.</p>
<p>Both of them are X commands.</p>
<p>So, copying from firefox to terminal or vim is easy. What about the other way round? The only thing everybody talks about is the using screen. It gives you the functionality to copy-paste between different instances terminals within screen through some really weird key strokes.</p>
<h1 id="the-solarized-color-palate-has-some-nice-symmetry.-you-just-invert-it-and-start-from-the-top-removing-the-base-color-and-stop-wherever-needed.-the-only-benefit-is-that-you-can-interchange-between-the-dark-light-schemes-very-fast.">The solarized color palate has some nice symmetry. You just invert it and start from the top, removing the base color and stop wherever needed. The only benefit is that you can interchange between the dark-light schemes very fast.</h1>
<p>You can set the colors in the .Xresources file and done. The vim colorscheme will do the rest of the work. Beware though: xterm does not support many boldface colors for many colorcodes. So, you will have to change either the termianl, or the colors.</p>
<p>In .Xresources file, replace all the colors in #define section with the TERM hex-codes, which you will find in the comment section. The result is not blues, though. But you will be able to use all the shades of grey, which is nice. Currently I am trying to look for replacements for the colors that are not supported</p>
<h1 id="gtk-bookmarks">GTK+ bookmarks:</h1>
<p>While locating file through GTK+ dialog box (e.g. “Save as” in Firefox or GIMP), you might want to create a “bookmark” of a directory that you want to access with one click. So generally you can drag and drop those directories to the left pane and they stay there. These locations can be saved/modified/added through the file ~/.gtk-bookmarks</p>
<h1 id="loading-the-new-.xresources">Loading the new .Xresources</h1>
<p>xrdb ~/.Xresources</p>
<h1 id="using-wicd">Using wicd</h1>
<p>Install wicd, wicd-gtk</p>
<p>Run wicd Run dhcpcd on the wlan card: dhcpcd wlp6s0b1 Finally, run wicd-gtk</p>
<p>Then connect.</p>
<h1 id="youtube-viewer-and-downloader-for-terminal">Youtube viewer and downloader for terminal</h1>
<p>pacman -S youtube-viewer youtube-dl</p>
<p>To launch, youtube-viewer or, youtube-dl URL</p>
<p>See the manpage for more details.</p>
<h1 id="simple-client-server-using-netcat">Simple client-server using netcat</h1>
<p>Important: Must install openbsd-netcat. I accidentally installed the gnu-netcat and it did not support many of the commands and the standard examples given in the internet failed.</p>
<p>After installation, use it using nc.</p>
<p>Open a listening port in the server: ( -l for lsten, -v for verbose)</p>
<p>nc -l -v 1432</p>
<p>Connect to the server</p>
<p>nc server_name_or_ip 1432</p>
<p>If it succeeds, cursors in both the computers will wait. Now type text in one to send it to the other.</p>
<h1 id="pacman-stuff">Pacman stuff:</h1>
<p>Instead of keeping track of every package you are installing using pacman, issue this to show all explicitly installed packages:</p>
<p>pacman -Qei</p>
<p>Note: -Q is the query mode, -e for explicitly installed, -i for detailed info about the packages. Now you can use grep, awk, sort etc to do whatever you want with them.</p>
<p>To find all the orphan packages, issue</p>
<p>pacman -Qdt</p>
<p>Here, -d shows all the packages which were installed as a dependency of another packages. -t shows that are not required anymore.</p>
<h1 id="dns-server-using-ngrok-and-tcp-tunelling-for-sshing-into-the-local-machine">DNS server using ngrok and tcp tunelling (for sshing into the local machine):</h1>
<p>Download the ngrok software (Note; Do NOT install it through AUR as it is old) Extract it. At this point, you will be able to use http server using ./ngrok http 80 In order to use ssh, you need to create an account. I logged in using github account and did not have to create a account. Next step is authenticating the key that they provide you. It will be written in that login page only. Do that. Run the tcp tunnel using ./ngrok tcp 22 Now you can log in to you local server using the global hostname:port that thy show in the forwarding tab. To get hold on this port number (so that you can dump it and git commit it), you need to do the following: wget http://localhost:4040/ (Here, we are collecting the source code of the client API that ngrok creates for monitoring purposes) We get the index.html page in this process. Now we extract the address from it like this:</p>
<pre><code>   cat index.html | grep &quot;tcp://&quot; | awk -F&quot;/&quot; &#39;{print $3}&#39; | awk -F&quot;\\&quot; &#39;{print $1}&#39;</code></pre>
<p>Now, we can easily update (git commit) this info so that we can access from anywhere. I mean, create a script to run ngrok and git commit together to dump this port information along with uploading it (to the git repo to use somewhere else)</p>
<h1 id="cleaning-up-your-arch-system">Cleaning up your Arch system</h1>
<ol type="1">
<li>Delete the log files. One big file is /var/log/journal You can delete its content but NOT the directory itself to temporarily make the boot process fast.</li>
</ol>
<p>To set a global limit of maximum size of journal files, edit the file /etc/systemd/journald.conf and set</p>
<p>SystemMaxUse=50M</p>
<p>Delete /var/log/wtmp and wtmp.1 files for last login etc. Note: the command ‘last’ does not work. Will it work after reboot?</p>
<ol start="2" type="1">
<li>Pacman old packages in cache There are nice commands for that which can be found in another topic.</li>
</ol>
<h1 id="mts-mblaze-activation-using-usb_modeswitch">MTS Mblaze activation using usb_modeswitch</h1>
<p>Install the package usb_modeswitch. Reboot. It should work. If it doesn’t: Do lsusb and look at the device and vendor number. I got Bus 002 Device 005: ID 12d1:1f01 Huawei Technologies Co., Ltd. E353/E3131 Here, we need the number 12d1:1f01. Which is our DefaultVendor:DefaultProduct. If we are lucky, we can find what command to pass by looking at /etc/usb_modeswitch.setup Here, search for this number and copy the whole section. I got:</p>
<p>######################################################## # Huawei E353 (3.se) # # Contributor: Ulf Eklund</p>
<p>DefaultVendor= 0x12d1 DefaultProduct=0x1f01</p>
<p>TargetVendor= 0x12d1 TargetProduct= 0x14db</p>
<p>MessageContent=“55534243123456780000000000000a11062000000000000100000000000000”</p>
<p># Driver is cdc_ether NoDriverLoading=1</p>
<p>########################################################</p>
<p>Now, we just put this whole thing inside /etc/usb_modeswitch.conf. (Note: pasting these line after the content of the file did not work. I Deleted everything and then pasted it.)</p>
<p>Now launch the programme using usb_modeswitch -c /etc/usb_modeswitch.conf And it worked. Now you can lsusb and see that the numbers have changed.</p>
<p>Note: this the manual process and for some reason it doesn’t work automatically. The method that worked for me is this: uninstall usb_modeswitch: pacman -R usb_modeswitch Reboot: reboot Install: pacman -S usb_modeswitch Reboot: reboot The rebooting are important because /lib/udev/rules.d/40-usb_modeswitch.rules get modified and the effects are applied on reboots.</p>
<h1 id="applying-particular-config-file-to-a-particular-file-in-vim">Applying particular config file to a particular file in vim</h1>
<p>Create a somefile.vim containing settings for the file. (Only the ones OTHER THAN the main ~/.vimrc) Run it with -S param. vim -S somefile.vim filename</p>
<h1 id="calculating-with-bc">Calculating with bc</h1>
<p>Run bc and calculate away, but it is very important to remember these things: Issue “scale=5” to let bc use 5 digits after the decimal point. Otherwise it will show you ridiculous things like 10/3=3 etc. By default, scale is set to 0 so floats are treated as int. Use “last” to refer to “Ans”, which is the last number is buffer. You can declare variable and do their calculations like this: a=50 b=30 c=a+b c 80 etc. # Conky with ring-shaped clock</p>
<p>Install conky-lua-nv (with lua and nvidia support) from AUR. Install xcompmgr for transparency. (Have to run while conky runs) Install the font Santana. Download and extract, then move the folder to /usr/share/fonts/ then fun fc-cache -vf. Running conky with a config file settings.conf: conky settings.conf # Reverting a file or directory to its previous state in git (Or, restoring deleted files :P)</p>
<p>First, stop any automated git commits by commenting out the necessary lines in crontab -e, or something else. Next, find out the right commit you want the file to be reverted to using git log filename Here, you should note down the commit number. Let’s say it is abcdef Now, get it back using git checkout abcdef filename</p>
<p>Done. Now git commit to make this change permanent. Resume your crontab based auto-commit.</p>
<h1 id="vim-plugin-pathogen">Vim plugin Pathogen</h1>
<p>Follow instructor from git. # Using Ledger, the money management program Install ledger from AUR, pretty long compilation time. Install the plugin vim-ledger (preferably using Pathogen. See prev entry)</p>
<pre><code> Entering data in a .ledger file:
 Enter today&#39;s date using &lt;F6&gt; (added a line in .vimrc to use strftime())
 Auto-completion of the account names: Ass:Ch&lt;C-X&gt;&lt;C-O&gt; gives Assets:Checking.
 zM and zR  to fold and show all folds as usual.
 There is aligning feature that I am yet to get used to.
 And automated currency insertion is there too.
 
 Useful things to include:
    Include directives, so I can keep my business data in its own file, while pulling it into my main one.
Simple refactorings, like putting &quot;Y 2012&quot; at the top, so I don&#39;t have to write the year in each transaction.
Account aliases, so I can just type &quot;rent&quot;, rather than &quot;income:rental&quot; and &quot;repairs:contractor&quot; rather than &quot;expenses:home repair:contractor&quot;

 Reports:
    Shows balance of all accounts starting with expenses since last October, sorted by total:
    ledger -b &quot;last oct&quot; -S T bal ^expenses
Shows the register of expenses with multiple entries combined (totalled):
    ledger  register expenses --collapse
See weekly postings: -W (for register mode)</code></pre>
<h1 id="replacing-entries-in-file-with-another-one">Replacing entries in file with another one</h1>
<p># sed -i ‘s//sbin/resolvconf//usr/bin/resolvconf/g’ vpnc-script</p>
<p>Note: Can be used for config files containing Solarized color palette.</p>
<h1 id="connect-to-a-vpn-to-have-their-external-ip-to-use-mathscinet-and-stuff">Connect to a VPN to have their external ip to use MathSciNet and stuff</h1>
<p>openconnect go.vpn.gwu.edu</p>
<h1 id="dumping-or-redirecting-your-microphone-feed-through-ssh">Dumping or redirecting your microphone feed through ssh</h1>
<p>arecord record the sound in CD quality in raw format</p>
<p>arecord -f cd -t raw</p>
<p>oggenc (need vorbis-tools for this) encodes the raw stream into ogg format (compression for low datarate)</p>
<p>oggenc - -r</p>
<p>(note the extra - for some reason, check manpage)</p>
<p>Finally log in to a remote ssh host and use their mplayer to play this encoded stream</p>
<p>ssh user@host mplayer -</p>
<p>Everything together:</p>
<p>arecord -f cd -t raw | oggenc - -r| ssh user@host mplayer -</p>
<h1 id="display-the-webcam-feed-with-mplayer-play-the-webcam">Display the webcam feed with mplayer (play the webcam):</h1>
<p>mplayer tv:// -tv device=/dev/video0</p>
<p>where /dev/video0 is the device.</p>
<ol start="98" type="1">
<li>Connecting another host though lan cable and give it an ip address though dhcpd Install dhcpd ( note: it is not dhcpcd and is not installed by default) If the host (laptop) is going to have the ip 139.96.30.100, do the following.</li>
</ol>
<p>ip link set up dev enp7s0 ip addr add 139.96.30.100/24 dev enp7s0</p>
<p>Here, enp7s0 is your (laptop/server’s) ethernet card. ifconfig to check that the card really got the ip.</p>
<p>Now we are going to follow what the archwiki page of dhcpd says.</p>
<p>The config file should have the following:</p>
<pre><code>option domain-name-servers 139.96.30.100;
option subnet-mask 255.255.255.0;
option routers 139.96.30.100;
subnet 139.96.30.0 netmask 255.255.255.0 {
  range 139.96.30.150 139.96.30.250;
}</code></pre>
<p>In this case, the dns is the server. The subnet mask has to be consistent with the ip range, whatever that means. You can also attach a static ip to a particular device if you like, by modifying the subnet “block” like this:</p>
<pre><code> subnet 139.96.30.0 netmask 255.255.255.0 {
  range 139.96.30.150 139.96.30.250;

  host macbookpro{
   hardware ethernet 70:56:81:22:33:44;
   fixed-address 139.96.30.199;
  }
}   </code></pre>
<p>Finally, create the service file to run dhcpd though systemctl. /etc/systemd/system/dhcpd4@.service</p>
<pre><code>[Unit]
Description=IPv4 DHCP server on %I
Wants=network.target
After=network.target

[Service]
Type=forking
PIDFile=/run/dhcpd4.pid
ExecStart=/usr/bin/dhcpd -4 -q -pf /run/dhcpd4.pid %I
KillSignal=SIGINT

[Install]
WantedBy=multi-user.target</code></pre>
<p>To run this dhcpd on the network interface, run systemctl start dhcp4@enp7s0.service</p>
<p>Now attach the other device to the server/laptop with a typical lan cable and see the lights flash. After some time, issue: ip neigh show You can see the other device’s ip listed there. Most probably it will have the first ip possible, which is 139.96.30.150. Edit: ip neigh show does not show all the ips. cat /var/lib/dhcp/dhcpd.leases might show some useful information.</p>
<ul>
<li>When ssh-ing to an user does not give you access to .bashrc Do the following: Edit .bash_profile and add</li>
</ul>
<pre><code>        if [ -f ~/.bashrc ]; then
          . ~/.bashrc
        fi</code></pre>
<h1 id="how-to-connect-to-hdmi">How to connect to hdmi</h1>
<p>xrandr to find the HDMI connection. In this case, it is called HDMI-0 xrandr –output LVDS –off –output HDMI-0 –auto Click on the checkbox " Mathe this the default X-Server screen" while selecting the external display.</p>
<p>See the list of connected displays with xrandr –current Set the HDMI0 to be the biggest screen and current laptop screen to be a small part of it by xrandr –output HDMI-0 –auto</p>
<p>Turn off the hdmi temporarily with xrandr –output HDMI-0 –off</p>
<p>HDMI -Audio</p>
<p>Use aplay -l to get the discover the card and device number. For example:</p>
<p>$ aplay -l</p>
<p>Now try different number to see which one actually works by</p>
<p>$ aplay -D plughw:1,3 /usr/share/sounds/alsa/Front_Center.wav</p>
<p>In my case, 1,3 works. Now Edit the .asoundrc to</p>
<p>pcm.!default { type hw card 1 device 7 }</p>
<p>If Kodi cannot play audio with all the hdmi devices, try alsactl restore or alsactl kill quit and alsactl init</p>
<h1 id="speeding-up-the-internet-using-the-fastest-dns-server">Speeding up the internet using the fastest DNS server</h1>
<p>Install namebench. There is a AUR repo for namebench. But it needs python2-graphy, which has to be installed from AUR first. After installing, run using: namebench.py After the test is finished, it will generate some results. You can visualize the data by opening the .html file that is generated in /tmp.</p>
<p>In the router, go to My Network &gt; Network Connection &gt; Broadband Connection &gt; Settings &gt; DNS Server: Use the following DNS server (from dropdown) and set it.</p>
<p>If using pi-hole to block ads, use the fastest DNS as the second DNS server. The first one should be the ip address of the Pi running a pi-hole.</p>
<h1 id="google-drive-client-for-linux">Google drive client for linux:</h1>
<p>A git-like command line tool called drive (https://github.com/odeke-em/drive) has implemented all the features though auth2 secret key. Follow the instructions in its readme file, run drive init ~/gdrive to start the service. In the command line, it will give you alink to vist to get a secret_key which you enter in the command line. After that pull, push etc covers everything, Look at the Readme in the github for all information.</p>
<p>After drive init, go to the directory you initiated drive and then drive pull ‘directory name’ pulls all the files, directories etc of ‘directory’ name.</p>
<p>Similar to git, to push files to drive, you can create subdirectory inside the local gdrive structure. For example, cd ~/grive mkdir new-folder cd new-folder cp ~/newfile ./ drive push Be aware, if you do not have a copy of the remote files in the local location, drive push will delete the ones that are not present in the local path or in its children.</p>
<p>Issue: the authentication token expires occasionally, forcing you to follow some link, clicking on “Accept” and generate token, copy-paste it to the terminal window.</p>
<p>Deleting files from drive:</p>
<p>Either drive trash ‘file to be trashed’</p>
<p>Or, remember the name (with path) of the directory you want to delete. rm -r in local path. Then drive push ‘path to the deleted file’ to delete it remotely.</p>
<p>To empty trash drive emptytrash</p>
<p>To permanently delete files without trashing it first (no need because I have infinite space in my institution-given drive) use drive delete ‘file to be deleted forever’</p>
<p>To list files upto 1 depth inside some directory drive list</p>
<p>To list files upto 3 directory depth drive list -depth 3</p>
<p>You can use strings to look for while listing drive list –matches mp4 pdf mp3</p>
<p>To first sort by modTime, then largest-to-smallest and finally most number of saves inside the directory Photos drive list –sort modtime,size_r,version_r Photos</p>
<p>To see stats of a directory recursively drive stat -r ‘directory name’ or until depth 3 drive stat -depth 3 ‘directory’</p>
<p>drive allows you to create an empty file or folder remotely Sample usage:</p>
<p>$ drive new –folder flux $ drive new –mime-key doc bofx $ drive new –mime-key folder content $ drive new –mime-key presentation ProjectsPresentation $ drive new –mime-key sheet Hours2015Sept $ drive new –mime-key form taxForm2016 taxFormCounty $ drive new flux.txt oxen.pdf # Allow auto type resolution from the extension</p>
<p>Show all information about your drive account drive quota in more detail drive about</p>
<p>drive allows you to copy content remotely without having to explicitly download and then reupload.</p>
<p>$ drive copy -r blobStore.py mnt flagging</p>
<p>$ drive copy blobStore.py blobStoreDuplicated.py</p>
<p>To perform a rename:</p>
<p>$ drive rename url_test url_test_results $ drive rename openSrc/2015 2015-Contributions</p>
<p>drive allows you to move content remotely between folders. To do so:</p>
<p>$ drive move photos/2015 angles library archives/storage</p>
<p>Command Aliases</p>
<p>drive supports a few aliases to make usage familiar to the utilities in your shell e.g:</p>
<pre><code> cp : copy
 ls : list
 mv : move
 rm : delete</code></pre>
<p>The url command prints out the url of a file. It allows you to specify multiple paths relative to root or even by id</p>
<p>$ drive url Photos/2015/07/Releases intros/flux</p>
<h3 id="fixing-clashes">Fixing clashes</h3>
<ul>
<li>List the clashes with</li>
</ul>
<pre><code>drive clashes list &lt;path&gt;</code></pre>
<ul>
<li>Resolve the clashes with</li>
</ul>
<pre><code>drive clashes -fix &lt;path&gt;</code></pre>
<ol start="101" type="1">
<li>OpenFOAM</li>
</ol>
<p>http://openfoam.com/download/install-binary.php</p>
<p>Follow this tutorial and after running openMesh, you get an error. ‘pwd’ to see you path, ‘cd cavity’ and run again to resolve.</p>
<p>While running, systemctl start docker in the beginning and do everything else.</p>
<h1 id="moving-root-to-another-partition">Moving /root to another partition</h1>
<p>Create new ext4 partition, say /dev/sda7. Mount it in a directory, say /otherlin Copy all data from /root to /otherlin using the following commands cp -urp /root/. /otherlin/ Note that -r for recursive copy and -p is to preserve permission, date etc. Here, -u means update, i.e. doesn’t overwrite already copied files. Note that, cp -rp ~/* /otherlin is not enough since it does not copy the dot files. Alternative tools suggested: rsync, and curl (nice use!) to have a progress bar etc. Find the UUID for the new partition using bkid Edit /etc/fstab and add the line UUID=daef66f2-4c7a-4daa-9d7d-f217a3a3994f /root ext4 rw,relatime,data=ordered 0 2 Here, the UUIS should be replaced by the appropriate one. 0 means it doesn’t have to be backed up. 2 means the system checks the partition after the first one (1 is / so / gets checked first; 0 means no checking).</p>
<p>Back up the current /root by mv /root /root.old It failed the first time and had to uncomment the new line in fstab and reboot and try again to succeed. Remount all the drives by mount -a # Fixing boot after erasing grub Install another linux, for example, Manjaro from USB livecd. It will come with its own grub. While booting through this new grub, if you get an error saying the UUID does not exist etc, edit the /boot/grub/grub.cfg file. Fix the UUID in the menuenry for the target linux. Usually, the the correct UUID appears in the first line, but in the lines containing the intiramfs, the UUID is messed up. Fix them in all the places. The config file should use the UUID of the old install, not the new one.</p>
<h1 id="writing-a-manpage">Writing a manpage</h1>
<p>It uses something called troff markdown language. Create a file starting with the following lines and open with man -l filename.</p>
<p>Body of the manpage: .Dd date-of-modification .Dt name-of-the-article 7 (7 for miscellaneous manual. see man man for explanation) .Sh NAME .Nm name of the article .Nd description of the article</p>
<p>Caution · Keep codes in within a .Bd -literal … .Ed block. · Do NOT write Em anywhere in your text, it will vanish. Write &amp;Em instead. Frequently used macros .Sh New Section .Ss New subsection .Bl begin list. It can take the following parameters: -bullet, -item, -enum, -tag, -hang etc. .It items inside .Bl and .El .El end list .Pa path for a filename .Bd begin a display block, It takes a few parameters, most importantly -literal which is useful for source codes, spaced and tabbed text. .Dl literal text of one line .Ed end display block one line of literal text. begins bold begins Italian ends bold and/or Italian .Em emphasize (a line of bold, similar to … ). If using inside an item of list, use without the dot, e.g. .It Em tagname</p>
<p>escape chars generates a , &amp; replaces at the beginning of a sentence, but doesn’t generate a .</p>
<pre><code>               Type        Output
               \e            \
               \efB          \fB
               \&amp;.           .
               \&amp;Em          Em

 See the BSD manpage for mdoc online. (Note: mdoc for Arch is something else)
 http://man7.org/linux/man-pages/man7/mdoc.7.html

 Some examples:
 http://manpages.ubuntu.com/manpages/trusty/pt/man7/mdoc.samples.7.html

 There is a way include a custom file to man database.</code></pre>
<h1 id="unity-3d">Unity 3D</h1>
<p>Install linpng12 from AUR.</p>
<p>Install unity 3d from AUR. Note: The package build is 11GB after makepkg -s and creates a .sh file and a directory. Instead of pacman -U, use the generated install script as there will be no .xi file to install. This is also an advantage since these files can be moved to another partition and launched. These are 3GB long.</p>
<p>Watched tutorial on game rolling the ball on their official site. Lessons: A “is Trigger” object with a “Rigid body” component is a “Dynamic collider” and uses more resources. A “is Trigger” object without“Rigid body” component is a “Static collider” is ideal. Setting “kinemetic” field will give you desired result.</p>
<h1 id="progress-bar-for-cp-firefox-download-dd-tar-cat">Progress bar for cp, firefox download, dd, tar, cat</h1>
<p>Use ‘progress’. https://github.com/Xfennec/progress See man page for details.</p>
<h1 id="wpa_supplicant">wpa_supplicant</h1>
<p>Find the network by scanning iwlist wlp6s0b1 scan | grep ESSID The list is NOT ordered according to signal strength. or, use wifi-menu but cancel it after it finds the ssids.</p>
<p>To create a config file, see manpage of wpa_supplicant.conf</p>
<p>Works only for home wifi (have to check for work wifi): If you do not want to store the password and create a config file, use wpa_passphrase wpa_passphrase ssid_name you shall enter the passphrase from stdin and will be encrypted. Now copy the code from the file and create a config file. Delete the commented line containing the actual password.</p>
<p>Alternatively, you can do the following:</p>
<p>For home wifi, this works: network={ ssid=“home” psk=“passphrase” }</p>
<p>For GWireless, this works: network={ ssid=“GWireless” key_mgmt=WPA-EAP eap=PEAP identity=“netID” password=“password” }</p>
<p>For eduroam, this works: network={ ssid=“eduroam” key_mgmt=WPA-EAP eap=PEAP identity=“email id” password=“password” }</p>
<p>To run the config file with debugging:</p>
<p>wpa_supplicant -i wlp6s0b1 -c /path/of/config/file.conf -d</p>
<p>To run it in the background, replace -d by -B</p>
<p>Finally, run dhcpcd if not running already by dhcpcd or systemctl restart/start/enable dhcpcd.service</p>
<h1 id="find-out-name-of-the-linux-distribution">Find out name of the linux distribution</h1>
<p>cat /etc/<em>-release typically, os-release has all the info, including the pretty name. For the linux kernel version, cat /proc/version </em> Determine which physical disk partition mounted on a directory For example, the / filesystem is installed on df / The directory /root is located in df /root Conversely, to see a list of all block devices and their mountpoints, lsblk</p>
<h1 id="fix-pacman--syu-error-with-wrong-pgp-keys">Fix pacman -Syu error with wrong pgp keys</h1>
<p>pacman-key –refresh-keys</p>
<h1 id="killing-processes">Killing processes</h1>
<p>To find the pid of the process, do pidof processname or, ps aux | grep processname To kill process with pid kill pid To kill stubborn unresponsive process kill -9 pid To kill all processes with name killall processname killall -9 processname</p>
<p>Unmounting partitions in use: Find out which process is using it by lsof | grep /mountpoint killall/kill [-9] processname/pid # [Abandoned: couldn’t see any improvement] Speeding up firefox by moving the profile to ram https://fixmynix.com/speed-up-firefox-with-ram-cache-and-tmpfs-linux/ Note: Setting browser.cache.disk.enable to false and setting browser.cache.memory.enable to true accelerates reloading recently loaded page elements. It comes with the variable browser.cache.memory.capacity which has to be created and specified as well. Eg: 409600. Reference: http://kb.mozillazine.org/Browser.cache.memory.enable Note: This specified size is OUTSIDE the profile directory of firefox. The precess so far has not used any ramfs yet.</p>
<p>N: Didn’t follow the first few http, ssl variable modifications. Starts from editing memory_cache variable. Main problem: the profile directory gets bigger and bigger and soon the tmpfs is full. Q: Can I sync while closing firefox instead of cronjob every 5 mins? Well, to save accidental crash, 5 mins seems better, still. Q: How to preserve the installed addons and login to pushbullet? Q: Why allocate capacity 2M and create tmpfs for 128mb? Q: Moving .vimrc to ram. Q: Wat else can I move to ram?</p>
<h1 id="compress-and-uncompress-zipunzip-files-using-aunpack">Compress and uncompress (zip/unzip) files using aunpack</h1>
<p>To extract all files from archive <code>foobar.tar.gz</code> to a subdirectory (or the current directory if it only contains one file): aunpack foobar.tar.gz</p>
<p>To create a zip archive of two files <code>foo' and</code>bar’: apack myarchive.zip foo bar To compress the content of current directory into a zip file called comp.zip apack comp.zip *</p>
<p>To list contents of the rar archive <code>stuff.rar</code>: als stuff.rar</p>
<h1 id="calendar.vim">calendar.vim</h1>
<p>Since I have pathogen to install vim plugins, cloning the repo to .vim/bundle/ installs it. Setting the google options in .vimrc, when I do :Ca inside vim, I cannot copy the link got google authentication. So I opened it in gvim and copied it. But in gvim, I cannot paste the code that I received from google. So I hand-typed it. Very annoying.</p>
<p>Here is a quick possible solution: 1. Open gvim 2. Type :Ca 3. Copy the link 4. Paste in browser, proceed, get a code 5. Edit the file .vim/bundle/calendar.vim/google/client.vim and navigate to the line: let code = input(printf(calendar#message#get(‘access_url_input_code’), (This line is inside a function called access_token_async. The input code here is not able to access the bufferes “+,”* etc. So we manually supply the value of variable ‘code’. Make sure this modification does not stay for long) 6. Modify the line to let code = ‘xxxx_your_code_goes_here_xxxx’ 7. Save the file. 8. Open usual vim and run :Ca and it should work directly. 9. Undo the changes in client.vim and save it back. This step is necessary because you don’t want to leave the code in a config file that is possibly uploaded to github. Make sure there are no git commits in the time interval between the two saves otherwise someone can look at the history of the file and retrieve it.</p>
<p>See the calendar.vim/doc/calendar.txt for a complete help which I followed mostly. As a shortcut in awesomerc, add <code>xterm -e vim +:Ca</code> to open vim in a terminal with command :Ca and mapped it to Modkey+C</p>
<h1 id="installing-packages-in-r">Installing packages in R</h1>
<p>install.packages(“ggplot2”)</p>
<h1 id="r-tutorial">R tutorial</h1>
<p>Add “day of the week” column to your data with date: Let the data be tran and <code>tran$Date</code> is is date format (possibilities)</p>
<pre><code> tran$day &lt;- weekdays(as.Date(tran$Date))</code></pre>
<p>Order your data by day of the week like this: (data is daily, day is DoW)</p>
<pre><code> daily$DoW &lt;- factor(daily$DoW, levels= c(&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;))
 daily[order(daily$DoW), ]</code></pre>
<p>Plot frequency distribution of days of the week</p>
<pre><code> barplot(table(tran$day))</code></pre>
<p>Create a sequence of weekdays, starting from today’s day like this: Get today’s date t &lt;- Sys.Date() Create a sequence of 7 days by: adjust t+const to fix the starting day dayseq &lt;- weekdays(seq.Date(t,t+6,by=1)) Get the corresponding weekday value by weekdays(dayseq) or, daynames &lt;- weekdays(dayseq, abbreviate=TRUE)</p>
<p>Lesson Learned: IF you have a data with a variable name Category, and Catergoy can be either Grocery, Shopping or Travel, then first convert the variable into a factor using: data<span class="math inline"><em>C</em><em>a</em><em>t</em><em>e</em><em>g</em><em>o</em><em>r</em><em>y</em> &lt;  − <em>f</em><em>a</em><em>c</em><em>t</em><em>o</em><em>r</em>(<em>d</em><em>a</em><em>t</em><em>a</em></span>Category) Then you can use levels(data<span class="math inline"><em>C</em><em>a</em><em>t</em><em>e</em><em>g</em><em>o</em><em>r</em><em>y</em>)<em>t</em><em>o</em><em>s</em><em>e</em><em>e</em><em>a</em><em>v</em><em>e</em><em>c</em><em>t</em><em>o</em><em>r</em><em>w</em><em>i</em><em>t</em><em>h</em><em>o</em><em>n</em><em>l</em><em>y</em>3<em>v</em><em>a</em><em>r</em><em>s</em>.<em>Y</em><em>o</em><em>u</em><em>c</em><em>a</em><em>n</em><em>c</em><em>h</em><em>a</em><em>n</em><em>g</em><em>e</em><em>t</em><em>h</em><em>e</em><em>f</em><em>a</em><em>c</em><em>t</em><em>o</em><em>r</em><em>d</em><em>a</em><em>t</em><em>a</em></span>Category the way you change a vector.</p>
<p>The problem is to edit an entry in the data frame which is a category type. For example, if you want to change data[4,“Category”] to “hello”, you cannot change it using data[4,“Category”] &lt;- “hello” !!! Here is what to do: Change the type of Category varaible to character using: data<span class="math inline"><em>C</em><em>a</em><em>t</em><em>e</em><em>g</em><em>o</em><em>r</em><em>y</em> &lt;  − <em>a</em><em>s</em>.<em>c</em><em>h</em><em>a</em><em>r</em><em>a</em><em>c</em><em>t</em><em>e</em><em>r</em>(<em>d</em><em>a</em><em>t</em><em>a</em></span>Category) Edit the value: data[4,“Category”] &lt;- “hello” Change the variable type back to factor: data<span class="math inline"><em>C</em><em>a</em><em>t</em><em>e</em><em>g</em><em>o</em><em>r</em><em>y</em> &lt;  − <em>f</em><em>a</em><em>c</em><em>t</em><em>o</em><em>r</em>(<em>d</em><em>a</em><em>t</em><em>a</em></span>Category)</p>
<p>So annoying!</p>
<p>qqplot2 help: A line plot : qplot(x=Date, y=Amount, data=tran, geom=c(‘point’,‘line’), color=Category, alpha = I(0.7))</p>
<p>The following prints number of times we did grocery, shopping etc w.r.t. date qplot(factor(timeS), data=tran, geom=“bar”, fill=factor(Category))</p>
<p>The following prints two side by side maps for each user. Each picture contains the count of grocer, Shopping and travel represented by different colors. The x-axis is time span. ggplot(tran, aes(timeS, fill=Category)) + geom_bar() + facet_wrap(~ User)</p>
<p>A slight invariant: ggplot(tran, aes(timeS, fill=User)) + geom_bar() + facet_wrap(~ Category)</p>
<p>stat=‘identity’ is the option that lets you plot y vs x instead of the defualt statistics count.</p>
<p>Plot amount vs date/timeS, stacked with category ggplot(tran) + geom_bar(aes(timeS, Amount, fill=Category), stat=‘identity’)</p>
<p>Withe separate user: ggplot(tran) + geom_bar(aes(timeS, Amount, fill=Category), stat=‘identity’) + facet_wrap(~ User)</p>
<p>Seperate picture by category, both users in the same picture, 2rows of pictures ggplot(tran) + geom_bar(aes(x=timeS, y=Amount, fill=User), stat=‘identity’) + facet_wrap(~ Category, nrow = 2)</p>
<p>Facet_wrat w.r.t User of all categories with a greyscale of total amount of both users in the background ggplot(tran) + geom_bar(aes(timeS, Amount, fill=Category), stat=‘identity’) + geom_bar(data=transform(tran, User=NULL), aes(x=timeS, y=Amount), stat=‘identity’, alpha=I(0.2)) + facet_wrap(~User)</p>
<p>To have a picture in the background of every facet, we need to create a facet without the facet variable. For example, in the previous case, transform(tran, User=NULL) gives you a data without the facet variable ~User. We plot a bar geometry of this data.</p>
<p>Alternate representation with Category and User interchanged ggplot(tran) + geom_bar(aes(timeS, Amount, fill=User), stat=‘identity’) + geom_bar(data=transform(tran, Category=NULL), aes(x=timeS, y=Amount), stat=‘identity’, alpha=I(0.2)) + facet_wrap(~Category)</p>
<p>In this context, manysum is nothing but ggplot(tran) + geom_bar(aes(timeS, Amount, fill=User), stat=‘identity’)</p>
<h1 id="installing-xournal-from-source-and-adding-useful-patches">Installing xournal from source and adding useful patches:</h1>
<p>So, apt-get install doesn’t give you the latest version (e.g. now it is the 2.8.2016 version) or the patches the community developed.</p>
<p>To install the development dependencies, do sudo apt-get build-dep xournal</p>
<p>Download the latest tar, extract it with tar -xf xournal.<strong>.tar.gz cd xournal.</strong></p>
<p>Details of patching can be found here: https://sourceforge.net/p/xournal/discussion/554377/thread/5d03da22/ Here is the summary: Patch the source code with the download patch file</p>
<pre><code>patch -p1 &lt; patchfile.patch</code></pre>
<p>Note: if the patchfile is a tar file, extract and then -p1 should be change to -p2 or the required number of depth of path.</p>
<p>Compile and install this modified source file, follow http://xournal.sourceforge.net/manual.html#installation</p>
<p>Summmary:</p>
<p>To install in the user directory (~/bin/), do:</p>
<pre><code>./autogen.sh; ./configure --prefix=$HOME; make; make install; make home-desktop-install</code></pre>
<p>The last step is to set mime-type etc.</p>
<p>To install it in the system, do with sudo: ./autogen.sh make (as root) make install (as root) make desktop-install</p>
<p>So, far used the following patches: various improvements, linewidth-patch, vi-style scrolling</p>
<p>Caution: If you use the linewidth-patch, older versions of xournal will not be able to open the files saved by the patched version. Chances are, this patch will not end up in the official version in future, making all the files created with the patched version useless.</p>
<h3 id="xournal-patches">Xournal patches</h3>
<p>Install xournal from the patched version from xournal-patches by following the INSTALL file from the source code, satisfying the dependencies (see lin/TODO new installation), make and sudo make install</p>
<p>Open “Software &amp; Update” app and check the “source codes” box, password and reload Install build-dependencies for xournal using: <code>sudo apt-get build-dep xournal</code> In the patched source code directory, (archyhome/xournal-patches/xournal-0.4.8.2016)</p>
<pre><code>./autogen.sh
make
sudo make install
sudo make desktop-install</code></pre>
<h1 id="drawing-with-touchscreen-in-xournal">Drawing with touchscreen in xournal</h1>
<ol type="1">
<li>Select ‘Designate as touch screen’ and select the touch screen</li>
<li>Turn OFF ‘Pen disables touch’. Then draw.</li>
</ol>
<p>To log the input events, add the following line at the top of the file src/xo-callbacks.c: #define INPUT_DEBUG 1 Then, compile and run from terminal to see all the input events popping up at the terminal.</p>
<h1 id="setting-up-raspberry-pi-zero-w">Setting up raspberry pi zero w</h1>
<p>Ethernet over usb: Follow the popular guide to add two lines related to modules in the first (boot) partition: 1: open up the boot partition on the micro sd with finder and in the file config.txt add dtoverlay=dwc2 to a line on the bottom and save it. 2: Create a new file called ssh using textedit and save it onto the boot partition. Use ‘get info’ to remove the extension on the file, and it should appear as an EXEC file. You can now eject the card and boot it on your RPi 3: Finally, open up the cmdline.txt. replace all text with this:</p>
<p>dwc_otg.lpm_enable=0 console=serial0,115200 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait modules-load=dwc2,g_ether quiet init=/usr/lib/raspi-config/init_resize.sh</p>
<p>Edit /etc/network/interfaces to add usb0 related info: allow-hotplug usb0 iface usb0 inet dhcp</p>
<p>Plug in a <em>good</em> usb cable to the usb port, not the power in and then set up the retrying nm-applet attempt to connect to the wired network and fail repeatedly. At this point, you can connect to the pi using ssh pi@raspberrypi.local If the repeated attemp to connect and fail message from nm-applet is bothersome, run dhcpcd enp7e0u1i7 (or whatever is the hardware name from ifconfig) on your laptop. Note: dhcpcd in not installed by default so install it using sudo apt-get install dhcpcd5</p>
<p>For wifi: Use wpa_passphrase <ssid_name> to get the config file. Add it to /etc/wpa_supplicant/wpa_supplicant.conf Next, add the following to /etc/network/interfaces auto wlan0 allow-hotplug wlan0 iface wlan0 inet dhcp wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf</p>
<p>You can set up multiple networks in the wpa_supplicant.conf file and the first available one will be used (I think. Or, maybe wrt signal strength? However, it is working according to order of appearance)</p>
<h1 id="install-cocalc-notebook-locally">Install Cocalc notebook locally</h1>
<p>No need to install sage or sagemath.</p>
<p>Follow the instruction to install the cocalc-docker. It is just one line long code. It will download, extract and install. I had to use sudo to get it to work since I installed docker using sudo (<code>sudo apt-get install docker.io</code>. To open it in browser, make sure to use <code>https://localhost</code> instead of <code>http://localhost</code>.</p>
<p>I had create account (fake email id are ok, since they are local)</p>
<p>To start and stop cocalc, use <code>sudo docker start cocalc</code> <code>sudo docker stop cocalc</code></p>
<p>To view equations in latex rendering, use the function <code>view()</code>. To print out the latex code of it, use the function <code>latex()</code>.</p>
<p>To define variables in a latex-friendly way so that the view command prints it right, use</p>
<p>u_th_x = var(‘u_th_x’, latex_name = ‘u_{\theta}(x)’}</p>
<p>Later, do <code>view(u_th_x)</code> to see it rendered correctly.</p>
<h1 id="experiments-on-lock-screen-on-suspend-and-lid-close">Experiments on lock screen on suspend and lid close</h1>
<p>Facts (for Xubuntu): * xflock4 runs the default lock-screen program, which is slock if light-locker is not running. Otherwise, light-locker will run (xfce’s own lock screen window) * xfce4-power-manager and /etc/systemd/logind.conf interferes with the lid response. - By default, xfce4-power-manager inhibits logind-related events and takes over the buttons and lid events. If this is not the case, check if logind has precedence by issuing</p>
<pre><code>xfconf-query -c xfce4-power-manager -p /xfce4-power-manager/logind-handle-lid-switch</code></pre>
<p>or</p>
<pre><code>xfconf-query -c xfce4-power-manager -p /xfce4-power-manager/logind-handle-power-key</code></pre>
<ul>
<li>See the capabilities of <code>xfce4-power-manager</code> with</li>
</ul>
<pre><code>xfce4-power-manager --dump</code></pre>
<ul>
<li><p>To specify which one manages the button or lid events, see <a href="https://docs.xfce.org/xfce/xfce4-power-manager/faq#how_can_i_make_logind_handle_button_events_instead_of_xfce4-power-manager">link</a></p></li>
<li><p>Install <code>pm-utils</code> to enable suspend (and possible hibernate) option if it is missing</p></li>
</ul>
<h2 id="to-use-logind-for-suspend-on-lid-close">To use logind for suspend-on-lid-close</h2>
<ul>
<li>first check if logind can suspend properly using</li>
</ul>
<pre><code>sudo systemctl suspend</code></pre>
<ul>
<li>check if pressing the power button can suspend properly by uncommenting</li>
</ul>
<pre><code>HandlePowerKey=suspend</code></pre>
<p>in the file <code>/etc/systemd/logind.conf</code> and restarting logind using</p>
<pre><code>systemctl restart systemd-logind.service</code></pre>
<ul>
<li>allow <code>logind</code> to handle lid-switch</li>
</ul>
<pre><code>xfconf-query -c xfce4-power-manager -p /xfce4-power-manager/logind-handle-lid-switch -n -t bool -s true</code></pre>
<ul>
<li>Uncomment the lines in <code>/etc/systemd/logind.conf</code>:</li>
</ul>
<pre><code>HandleLidSwitch=suspend
HandleLidSwitchExternalPower=suspend</code></pre>
<p>Read more on the <a href="https://www.freedesktop.org/software/systemd/man/logind.conf.html">options</a> Note: docked means an external display is connected</p>
<ul>
<li>restart logind</li>
</ul>
<pre><code>systemctl restart systemd-logind.service</code></pre>
<hr />
<h3 id="suspend-and-lock-screen-with-logind-and-systemctl">suspend and lock screen with logind and systemctl</h3>
<p>We follow this link: https://wiki.archlinux.org/index.php/Slock#Lock_on_suspend</p>
<p>First, we set up lock screen service using slock when sleep target is triggered.</p>
<h2 id="etcsystemdsystemslock.service">‘/etc/systemd/system/slock@.service’</h2>
<p>[Unit] Description=Lock X session using slock for user %i Before=sleep.target</p>
<p>[Service] User=%i Environment=DISPLAY=:0 ExecStartPre=/usr/bin/xset dpms force suspend ExecStart=/usr/bin/slock</p>
<p><a href="#install">Install</a> WantedBy=sleep.target</p>
<p>Next, Enable the slock@user.service systemd unit for it to take effect for the username user: <code>sudo systemctl  enable slock@debdeep.service</code> do start to see if the script works (without closing the lid) <code>sudo systemctl  start slock@debdeep.service</code> (expected behavior: slock will run)</p>
<p>Then, we follow this link to set up the lid response: https://askubuntu.com/questions/1009387/laptop-doesnt-suspend-properly-on-closing-lid</p>
<h2 id="etcacpilid.sh">/etc/acpi/lid.sh</h2>
<p>#!/bin/sh</p>
<p>grep -q closed /proc/acpi/button/lid/LID0/state if [ $? = 0 ] then nmcli radio wifi off # note the change systemctl suspend else nmcli radio wifi on fi</p>
<p>Then, add this script to</p>
<pre><code>/etc/acpi/events/lm_lid
---------------------
event=button/lid.*
action=/etc/acpi/lid.sh</code></pre>
<p>Finally, set the permissions and restart the services</p>
<p>sudo chmod 755 /etc/acpi/lid.sh sudo /etc/init.d/acpid restart</p>
<p>Make sure to set HandleLidSwitch=ignore in /etc/systemd/logind.conf Actually, I have only HandlePowerKey=suspend option uncommented. I guess HandleLidSwitch=ignore is not really necessary. Then restart the logind service using: sudo service systemd-logind restart</p>
<h1 id="fixing-the-bug-of-disappearing-clients-on-suspend">Fixing the bug of disappearing clients on suspend</h1>
<p>Update to version 4.3 where one of the changes was to stop awesome from removing all the screens, which is what I think was happening.</p>
<p>First, enable the <code>source code</code> repository in <code>software-properties-gtk</code>. Then, install the latest version of awesome from github using</p>
<pre><code>sudo apt build-dep awesome
git clone https://github.com/awesomewm/awesome
cd awesome
make package -j5
sudo dpkg -i build/*.deb</code></pre>
<p>After the restart, the session awesome might vanish from the login window. Add the following to /usr/share/xsessions/awesome.desktop</p>
<pre><code>[Desktop Entry]
Encoding=UTF-8
Name=awesome
Comment=Highly configurable framework window manager
TryExec=awesome
Exec=awesome
Type=Application</code></pre>
<p>121: Vimtex experience Install via pathogen using:</p>
<pre><code>cd .vim/bundle
git clone https://github.com/.../vimtex</code></pre>
<p>Install <code>latexmk</code> using <code>sudo apt-get install</code></p>
<p>Setting zathura as the default viewer let g:vimtex_view_method = ‘zathura’</p>
<p>Check the info using <leader>li (<leader> = ) Start the continuous compile mode using . At this point, automatically compiles when the file is saved. to display the pdf file and do a forward search</p>
<p>:VimtexLabelsOpen|:VimtexLabelsToggle: open table of labels or :VimtexTocOpen|:VimtexTocToggle: open a clickable toc in the left pane (q will close the window) :VimtexCompileOutput: show the output form the compilation command (i.e. from latexmk) :VimtexErrors: open quickfix window if there are errors or warnings. :VimtexClean: clean auxilliary files like <em>.aux, </em>.out, and so on files. Use :VimtexClean! to remove everything, including the generated pfd file.</p>
<p>delete surround environment (dse) and cse works. So do dsc and csc for commands. tse (toggle star environment) and tsc toggles star in envs and commands tsd (toggle star delimiter) changes the surrounding delimiter to appropriate latex version, eg. () becomes ( )</p>
<p>To traverse through the autocomplete dropdown list, use C-P and C-N instead of the arrows. Eg. type \cite{Bour<C-X> <C-O> Then use C-P and C-N to choose the right one. It supports regex as well</p>
<p>Now % can jump through ( and )</p>
<p>Close matching delimiters (brackets or other pairing symbols like $, $$ etc) using ]] in insert mode. In insert mode, ]] also closes the current unclosed environment.</p>
<p>In normal mode, [[ and ]] jump through sections and subsections. Moreover ]m jumps through the start of the next environment (faster navigation, also use )</p>
<p>to see all the macros, like = <code>\</code>a` etc</p>
<p>To be able to access the help file (:h vimtex), you might get errors that it does not exit. In that case run :Helptags by which pathogen creates a list of all help files from doc directories. Use Ctrl-w + O to make the help window fullscreen. Ctrl-w + C closes a window.</p>
<p>Syntax folding and expanding: zi and za to fold and unfold all</p>
<p>Q: Is it convenient or worth it to make all the greek letters with (a<Tab> = )? Maybe not, since we already have <code>\</code>a<code>(typed quickly). See \lm for a complete list. Q: How to add align* environment quickly?  Using Ultisnip, so use al*&lt;Tab&gt; Q: How to add templates quickly?  Using Ultisnip, decided to use</code>_pde` etc. (leading underscore for template completion) Q: Good to know: shutting down continuous compile. Added the line let g:vimtex_view_forward_search_on_start = 0 to .vimrc to stop launching the pdf reader twice. Q: vim-easymotion leader key bug is not here anymore, but is very slow Turned off most of it, kept for word jump. However, it interferes with vim-sandwitch command m( to select ( ) pair. Q: In-file timestamp for current save time. Not sure yet, need to use autocommand. Q<em>: Jump to locations of the file for application process. to open a table of contents. Also jumps to compiled part. Q: Need shortcut for sac&lt;align</em>&gt; etc (<F7> works for command) Still need to unify the behavior of <Tab> and <F7>. Q: Intuitive conflict between vim-sandwich (sree = surround replace env by env) and default (cse = change surround e)</p>
<p>Features from vim-latex-suit: frac needs to be two-key</p>
<p>Selected text enclosed by command or environment: Using vim-sandwich instead of vim-surround. The default keybindings are intuitive sa, sd, sr (surrounding add/delete/replace), followed by the delimiters. Works in visual mode as well. Works with vimtex environments and commands with sac and sae (surround add command/environment) both in normal and visual mode. <F7> still works in normal and visual mode to create commands. However, the brace does not close automatically, which is a problem.</p>
<p>Idea: maybe map S-<F7> to cse and S-<F5> to csc</p>
<p>Using Ultisnip: I am using Tab for both TriggerExpand and TriggerJumpNext. (Instead of Tab and C-j respectively, to preserve placeholder jump &lt;++&gt;)</p>
<p>If you hit Esc or do undo while filling up one of the fields in a snippet, Tab does not take the cursor to the next place anymore. In that case, to jump to the next place in the incomplete (actually, untraversed) snippet, enter Insert mode, and then hit Tab. Be careful to not expand the current word. Therefore: Shortcut to resume incomplete snippet traversal: i <tab> Note: As long as the cursor does not reach $0 (or at the end of the snippet if $0 is absent), the snippet does not end</p>
<p>While writing snippets, the backslashes need escaping (for new line, etc)</p>
<p>Converting selections to environments using <span class="math inline">$VISUAL snippets: select text in visual mode, press &lt;tab&gt;. This deletes the selected text and you enter the insert mode. Now, type the trigger word for the snippet which has `$</span>VISUAL` in it. Now pressing <tab> again will expand the snippet with copies visual mode text pasted in the right location.</p>
<h1 id="how-to-locate-the-path-of-a-executable-file-use-which">How to locate the path of a executable file: use <code>which</code></h1>
<pre><code>which zathura
which vim</code></pre>
<h1 id="setting-up-neovim">Setting up neovim</h1>
<p>Install with <code>sudo apt-get install neovim</code></p>
<p>Launch with <code>nvim</code></p>
<p>To make neovim use the config and plugins of vim, create the file <code>~/.config/nvim/init.vim</code> and insert</p>
<pre><code>&quot; Using the path and plugings of vim 
set runtimepath^=~/.vim runtimepath+=~/.vim/bundle
let &amp;packpath=&amp;runtimepath
source ~/.vimrc</code></pre>
<p>For vimtex, we need to use servermode, which is not directly available. Install it using <code>sudo pip3 install neovim-remote</code> (Note that the sudo is added to make sure the installation path is found by the shell. Otherwise, we need to add the path of local installation to <code>$PATH</code>)</p>
<p>vimtex now advises (link:https://github.com/lervag/vimtex/wiki/introduction#neovim) to add the following to init.vim</p>
<pre><code>&quot; Do this after installing neovim-remote using pip3
let g:vimtex_compiler_progname = &#39;nvr&#39;</code></pre>
<p>Apparently, nvim <em>always</em> launches itself in server mode by default, so no need to launch it in servermode (with <code>--listen</code> parameter) unlike vim.</p>
<p>The behavior of nvim seems to be a bit faster than vim, although I am yet to be sure. coc.nvim still hangs as soon as more than the main option is uncommented in .vimrc.</p>
<h1 id="coc.nvim">coc.nvim</h1>
<h2 id="installation">Installation:</h2>
<p>[deprecated] <code>git clone</code> the plugin to <code>.vim/bundle/</code> directory (if using Pathogen for managing plugins. Inside the downloaded path, run <code>install.sh</code> which downloads node.js and installs it. [New, didn’t work properly] Modification to the official instruction to get nodejs: use sudo to install nodejs Install nodejs as root using</p>
<pre><code>curl -sL install-node.now.sh/lts | sudo bash</code></pre>
<p>Copy-paste the suggested config into .vimrc, then TURN OFF mapping with <code>&lt;cr&gt;</code> since it causes infinite loops and makes nvim (and vim) freeze!!</p>
<p>Caution: vim (and nvim) hangs when this part of the .vimrc (suggested by coc.nvim documenttion) is turned on.</p>
<pre><code>&quot;&quot; Use &lt;cr&gt; to confirm completion, `&lt;C-g&gt;u` means break undo chain at current
&quot;&quot; position. Coc only does snippet and additional edit on confirm.
&quot;if exists(&#39;*complete_info&#39;)
&quot;  inoremap &lt;expr&gt; &lt;cr&gt; complete_info()[&quot;selected&quot;] != &quot;-1&quot; ? &quot;\&lt;C-y&gt;&quot; : &quot;\&lt;C-g&gt;u\&lt;CR&gt;&quot;
&quot;else
&quot;  imap &lt;expr&gt; &lt;cr&gt; pumvisible() ? &quot;\&lt;C-y&gt;&quot; : &quot;\&lt;C-g&gt;u\&lt;CR&gt;&quot;
&quot;endif</code></pre>
<p>So, make sure to turn it off. One bugreport says upon hitting <cr>, vim goes into an infinite loop of <cr>s.</p>
<p>Moreover, turn off do the following change to .vimrc to avoid slow load of ranger upon pressing <leader>r.</p>
<pre><code>&quot;nmap &lt;leader&gt;rn &lt;Plug&gt;(coc-rename)
nmap &lt;leader&gt;&lt;f2&gt; &lt;Plug&gt;(coc-rename)</code></pre>
<p>To use ultisnip snippets, install the coc-extension <code>coc-snippet</code> using <code>:CocInstall coc-snippets</code> (and other extensions if needed). The snippets show up with a tilde at the end.</p>
<p>Note: snippets defined using regex do not show up :(</p>
<p>To use intelliSense code expansion and jumping etc, we need to install language server specific to that language, either using <code>:CocInstall</code> or manually and then configure using <code>:CocConfigure</code>.</p>
<p>If you want the definitions, implementations etc to open in a new tab (jump to existing tab if it is already open, <code>drop</code>), add the following to <code>~/.vim/coc-settings.json</code> or via <code>:CocConfig</code>: (<strong>Caution:</strong> Does not work when the file is not already open. Use the next <code>nmap</code> command and replace the existing <code>gd</code>)</p>
<pre><code>{
    &quot;coc.preferences.jumpCommand&quot;: &quot;drop&quot;
}</code></pre>
<p>Alternatively, to open <em>only</em> the definitions in a new tab, edit the line with shortcut <code>gd</code> in <code>vimrc</code> to</p>
<pre><code>nmap &lt;silent&gt; gd :call CocAction(&#39;jumpDefinition&#39;, &#39;tab drop&#39;)&lt;CR&gt;</code></pre>
<p>For example, to use C++ code completion, jumping to definition etc, we use <code>clang</code>. Install it using <code>sudo apt-get install clang</code>. Then install the extension using <code>:CocInstall coc-clang</code>. Now, we have more information on the auto-completion, including argument names for functions etc. It does not work well since it cannot find many paths of header files, for example.</p>
<p>To use coc code-completion with vimtex, install <code>:CocInstall coc-vimtex</code> (I tried coc-texlab, which is a language server for tex, could not see and linting hapending, so abandoned. Maybe look into it in details?)</p>
<p>Could not find one with matlab yet.</p>
<h2 id="features">features</h2>
<ul>
<li><code>:CocList services</code> to open services list, you will have id state and filetypes for each service.</li>
</ul>
<h2 id="how-to">How to</h2>
<ul>
<li>Get suggestions from predefined snippets (from <code>Ultisnips</code>) with <code>:CocInstall coc-snippets</code></li>
<li>Pressing tab should automatically fill up the cursor position with the first suggestion, instead of having to press ctrl-n. How to do that? Notice: <S-Tab> actually does what is expected.</li>
<li>How to resolve behavior of pressing tab twice when the first result is a snippet?</li>
<li>what is the purpose of Ctrl-space to coc#refresh()??</li>
</ul>
<h2 id="coc-pyright-for-python">coc-pyright for python</h2>
<p><a href="https://github.com/fannheyward/coc-pyright">link</a> * Install</p>
<pre><code>:CocInstall coc-pyright</code></pre>
<ul>
<li>Organize the lines with <code>import</code> with</li>
</ul>
<pre><code>:CocCommand pyright.organizeimports</code></pre>
<ul>
<li>Format the code with <code>:Format</code> to make it work, first <code>pip3 install autopep8</code> then run <code>:CocConfig</code> and add within the fist (outermost) curly braces:</li>
</ul>
<pre><code>{
&quot;python.formatting.autopep8Path&quot;: &quot;~/.local/bin/autopep8&quot;,

}</code></pre>
<p>Otherwise, the plugin cannot find the installation location!</p>
<ul>
<li>[Doesn’t work] For packages like <code>numpy</code>, a type stub needs to be created to avoid error messages</li>
</ul>
<pre><code>:CocCommand pyright.createtypestub numpy</code></pre>
<p>This creats a directory called <code>typings</code> where stubs are kept.</p>
<h2 id="code-completion-and-definition-for-cc-files">Code completion and definition for C/C++ files</h2>
<ul>
<li>Install the C/C++ language server <code>clangd</code> with <code>sudo apt-get install clangd</code></li>
<li>Install the clangd extension to coc using <code>:CocInstall  coc-clangd</code>. Alternatively, provide the configuration using <code>:CocConfig</code> and pasting the following:</li>
</ul>
<pre><code>{
&quot;languageserver&quot;: {
    &quot;clangd&quot;: {
      &quot;command&quot;: &quot;clangd&quot;,
      &quot;rootPatterns&quot;: [&quot;compile_flags.txt&quot;, &quot;compile_commands.json&quot;, &quot;.git/&quot;],
      &quot;filetypes&quot;: [&quot;c&quot;, &quot;cpp&quot;, &quot;objc&quot;, &quot;objcpp&quot;]
    }
  }
}</code></pre>
<p>Alternatively, use the <code>ccls</code> (<code>sudo snap install ccls --classic</code>) and include in <code>:CocConfig</code></p>
<pre><code>{
    &quot;languageserver&quot;: {
        &quot;ccls&quot;: {
            &quot;command&quot;: &quot;ccls&quot;,
            &quot;filetypes&quot;: [
                &quot;c&quot;,
                &quot;cpp&quot;,
                &quot;objc&quot;,
                &quot;objcpp&quot;
            ],
            &quot;rootPatterns&quot;: [
                &quot;.ccls&quot;,
                &quot;compile_commands.json&quot;,
                &quot;.vim/&quot;,
                &quot;.git/&quot;,
                &quot;.hg/&quot;
            ],
            &quot;initializationOptions&quot;: {
                &quot;cache&quot;: {
                    &quot;directory&quot;: &quot;/tmp/ccls&quot;
                }
            }
        }
    }
}</code></pre>
<ul>
<li>Install <code>ccls</code> from source <a href="https://github.com/MaskRay/ccls/wiki/Build">link</a></li>
</ul>
<pre><code># download
git clone --depth=1 --recursive https://github.com/MaskRay/ccls
cd ccls

# install dependencies
sudo apt install cmake clang libclang-dev
sudo apt install zlib1g-dev libncurses-dev

# cmake configure
cmake -H. -BRelease -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_PREFIX_PATH=/usr/lib/llvm-7 \
    -DLLVM_INCLUDE_DIR=/usr/lib/llvm-7/include \
    -DLLVM_BUILD_INCLUDE_DIR=/usr/include/llvm-7/

# cmake build
cmake --build Release

# install
sudo cmake --build Release --target install</code></pre>
<ul>
<li><p>In your C/C++ project, generate a file called <code>compile_commands.json</code> using <code>CMake</code> (if the project is CMake-based) or <code>bear</code> (if the project is <code>make</code>-based) in the following way. <a href="https://releases.llvm.org/8.0.0/tools/clang/tools/extra/docs/clangd/Installation.html">link</a></p></li>
<li>If your project builds with CMake, it can generate <code>compile_commands.json</code>. You should enable it with:</li>
</ul>
<pre><code>cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=1</code></pre>
<p><code>compile_commands.json</code> will be written to your build directory. You should symlink it (or copy it) to the root of your source tree, if they are different.</p>
<pre><code>ln -s ~/myproject/compile_commands.json ~/myproject-build/</code></pre>
<ul>
<li>Other build systems, using <code>Bear</code>: Bear (<code>sudo apt-get install bear</code>) is a tool that generates a <code>compile_commands.json</code> file by recording a complete build.</li>
</ul>
<p>For a make-based build, you can run</p>
<pre><code>make clean; bear make</code></pre>
<p>to generate the file (and run a clean build!)</p>
<ul>
<li>Edit a file with <code>vim</code>. At this point coc should recognize the file. Verify that with <code>:CocList services</code>. Now, place the cursor over a call of a function and press <code>gd</code> (<code>&lt;Plug&gt;(coc-definition)</code> in <code>.vimrc</code>) to jump to the definition of the function.</li>
</ul>
<h1 id="cc-compilation-troubleshooting">C/C++ compilation troubleshooting</h1>
<ul>
<li><code>error: No rule to make target: .../libname.so</code> Multiple occurrence of the .so file. Find multiple installs of the library using <code>apt search libname</code> and remove more than one instances.</li>
</ul>
<p>Another way to find the packages responsible for the required files is using <code>apt-file search</code>:</p>
<p><code>apt-search file /usr/lib/x86_64-linux-gnu/openmpi/lib/libmpi.so</code></p>
<p>The method still did not work, so I had to manually create symbolic links pointing to them with:</p>
<p>cd /usr/lib/x86_64-linux-gnu/openmpi/lib/ ln -s libmpi.so.* libmpi.so ln -s libmpi_cxx.so.* libmpi_cxx.so</p>
<ul>
<li>The DSO missing from command line message:</li>
</ul>
<p>Easiest fix: use <code>-lpthread</code> when <code>${CMAKE_CXX_COMPILER_ID} STREQUAL "GNU"</code>. I.e., in the CMakeLists.txt, modify the appropriate lines to</p>
<p>Common ways to inject this into a build are to export LDFLAGS before running configure or similar like this:</p>
<pre><code>if (&quot;${CMAKE_CXX_COMPILER_ID}&quot; STREQUAL &quot;GNU&quot;)
    #set(CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -lpthread&quot;)
    set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -pthread&quot;)</code></pre>
<p>Another fix: export a environment variable like this:</p>
<pre><code>export LDFLAGS=&quot;-Wl,--copy-dt-needed-entries&quot;</code></pre>
<p>As a workaround it’s possible to switch back to the more permissive view of what symbols are available by using the option <code>-Wl,--copy-dt-needed-entries</code>.</p>
<p>Sometimes passing <code>LDFLAGS="-Wl,--copy-dt-needed-entries"</code> directly to make might also work.</p>
<p>details: <a href="https://stackoverflow.com/questions/19901934/libpthread-so-0-error-adding-symbols-dso-missing-from-command-line">link</a> This error is displayed when the linker does not find the required symbol with it’s normal search but the symbol is available in one of the dependencies of a directly specified dynamic library. In the past the linker considered symbols in dependencies of specified languages to be available. But that changed in some later version and now the linker enforces a more strict view of what is available. The message thus is intended to help with that transition.</p>
<h1 id="running-script-for-motion">Running script for motion</h1>
<p>To call scripts from motion via <code>on_picture_save</code> or <code>on_event_end</code>, we need to make sure that the script is accessible by the user <em>motion</em>. The software motion creates a user called motion.</p>
<p>To make files and directories owned by (and hence accessible by) the user motion and the group motion, we need to issue</p>
<pre><code>chown -R motion:motion dir_within_anoter_user</code></pre>
<p>Note that, motion cannot even write to a location that is owned by another user even when we run motion as super user (via <code>sudo systemctl motion start</code>).</p>
<h1 id="motioneye-on-usual-ubuntu">MotionEye on usual Ubuntu</h1>
<pre><code>sudo docker create -v $HOME/Pictures:/pics -t -p 8765:8765 -p 8081:8081 --shm-size=4096m --name motioneye --privileged=true -e TZ=Asia/Colombo --restart=&quot;always&quot; ccrisan/motioneye:master-amd64</code></pre>
<p>This starts docker with an additional mount point where <code>$HOME/Pictures</code> exists.</p>
<ul>
<li>run</li>
</ul>
<pre><code>sudo docker start motioneye</code></pre>
<ul>
<li>Set admin password</li>
<li>Turn on <code>Movies</code> or <code>Still images</code></li>
<li><code>File Storage</code>: select the storage device with appropriate size. In Root directory, <code>/</code> means <code>/pics</code> (set while creating the docker)</li>
<li><p>Apply to take effect</p></li>
<li>See the installed docker images with</li>
</ul>
<pre><code>sudo docker images -a</code></pre>
<ul>
<li>Uninstall an image with</li>
</ul>
<pre><code>sudo docker image rm ID</code></pre>
<h1 id="motioneye-on-raspberry-pi">MotionEye on raspberry pi</h1>
<ul>
<li>Convert the image file <code>.img.xz</code> file into <code>.img</code> using <code>unxz</code>.</li>
</ul>
<pre><code>unxz motioneye.....img.xz</code></pre>
<ul>
<li>Copy to sd card</li>
</ul>
<pre><code>sudo dd if=motioneye....img of=/dev/sdb bs=4M</code></pre>
<ul>
<li>Set the wifi information in the 30MB partition that contains <code>boot.ini</code> files etc by creating <code>wpa_supplicant.conf</code> file with</li>
</ul>
<pre><code>country=US
update_config=1
ctrl_interface=/var/run/wpa_supplicant

network={
    scan_ssid=1
    ssid=&quot;MyWiFiSSID&quot;
    psk=&quot;password&quot;
}</code></pre>
<ul>
<li><p>Let it boot and log in using <code>user:admin</code> <code>pass:&lt;blank&gt;</code> to the web interface and set an new passwd</p></li>
<li>Port forwarding to raspberry pi with internal port:
<ul>
<li>Web interface: 80</li>
<li>Camera stream: 8081</li>
</ul></li>
<li>Improvement settings:
<ul>
<li>Delete local files everyday</li>
</ul></li>
<li>Set up google photos <a href="https://github.com/ccrisan/motioneye/issues/1607#issuecomment-656123443">instruction</a>
<ul>
<li>Click <code>Enable API</code></li>
<li>create project</li>
<li>specify product name</li>
<li>Select Oauth type <code>Desktop App</code></li>
<li>save the keys</li>
<li>Enable <code>Enable debug</code> in <code>Expert settings</code> in web interface of motioneye (now ssh connection can write into the filesystem)</li>
<li>Retrieve a file from the motioneye server via ssh from</li>
</ul>
<pre><code>scp admin@192.168.0.133:/usr/lib/python2.7/site-packages/motioneye/uploadservices.pyc ./</code></pre>
<ul>
<li>Make a backup copy</li>
</ul>
<pre><code>scp admin@192.168.0.133:/usr/lib/python2.7/site-packages/motioneye/uploadservices.pyc{,.bak}</code></pre>
<ul>
<li>Replace the string <code>"349038943026-m16svdadjrqc0c449u4qv71v1m1niu5o.apps.googleusercontent.com"</code> with your client ID</li>
<li>Replace the string <code>"jjqbWmICpA0GvbhsJB3okX7s"</code> with your client secret</li>
<li>Save the file</li>
<li>copy it back to the server</li>
</ul>
<pre><code>scp uploadservices.pyc admin@192.168.0.133:/usr/lib/python2.7/site-packages/motioneye/uploadservices.pyc</code></pre></li>
</ul>
<h1 id="update-gemfile.lock-of-github-website-repository-to-the-latest-version">Update Gemfile.lock of github website repository to the latest version</h1>
<p>Instead of updating the version numbers by hand in <code>Gemfile.lock</code>, automatically generate the <code>Gemfile.lock</code> with the latest versions available (which is hopefully equal or even higher than the version number suggested by Github security vulnerability message), using</p>
<pre><code>bundle lock --update</code></pre>
<p>(You need <code>ruby-bundler</code> installed for this to work.) Now check the generated <code>Gemfile.lock</code> to see if version number stated in security vulnerabilities section of your github repository matches the version number in <code>Gemfile.lock</code>. It should match or show even a higher (more latest) version number.</p>
<p>Another way to manually specify the version number is to add it to <code>Gemfile</code> file (not <code>.lock</code>) like this:</p>
<pre><code>gem &quot;kramdown&quot;, &quot;&gt;= 2.3.0&quot;</code></pre>
<p>and then update the lockfile using <code>bundle lock --update</code>.</p>
<h1 id="vim-matlab-modifications">vim-matlab modifications</h1>
<p>Git clone vim-matlab and make the following changes.</p>
<ul>
<li><code>mlint</code> as code checker (linter): First locate <code>mlint</code>. The location of the binary <code>matlab</code> can be found using</li>
</ul>
<pre><code>whereis matlab</code></pre>
<p>My output is <code>matlab: /usr/local/bin/matlab</code>. A quick <code>ls -l</code> shows that it is actually a soft link to <code>/usr/local/MATLAB/R2020a/bin/matlab</code>. The binary <code>mlint</code> must be nearby. Turns out, mlint is in the location <code>/usr/local/MATLAB/R2020a/bin/glnxa64/mlint</code>. Create a soft link in <code>/usr/local/bin/</code> of <code>mlint</code> using</p>
<pre><code>ln -s /usr/local/MATLAB/R2020a/bin/glnxa64/mlint mlint</code></pre>
<p>Now, mlint can be invoked from other terminals like this: <code>mlint filename.m</code>.</p>
<p>Therefore, <code>$HOME/.vim/bundle/vim-matlab/compiler/mlint.m</code> can access it. Now, we need to set mlint as a compiler for the .m files. Filetype-specific options can be set in the <code>ftplugin</code> directory. So, in the file <code>$HOME/.vim/bundle/vim-matlab/ftplugin/matlab.vim</code>, we add</p>
<pre><code>compiler mlint</code></pre>
<p>Now, after opening a .m file, we can issue <code>:make</code> and then <code>:copen</code> to see error messages. We can combine these options together and another line to the file <code>ftplugin/matlab.vim</code></p>
<pre><code>map &lt;silent&gt; &lt;Leader&gt;ll :make&lt;CR&gt;:copen&lt;CR&gt;</code></pre>
<p>This launches the errors when we press <code>\ll</code>, to be consistent with latex shortcut.</p>
<ul>
<li>Enable matlab jump of cursor between <code>for</code> and associated <code>end</code> using % Matchit has been added to the main vim version since v6. To enable it add to .vimrc</li>
</ul>
<pre><code>runtime macros/matchit.vim</code></pre>
<p>See more help with <code>:h matchit</code>.</p>
<h1 id="vim-search-for-string-in-a-case-sensitive-manner-temporarily">Vim search for string in a case-sensitive manner temporarily</h1>
<p>Use in the beginning, i.e. search for string ‘ThisThat’ using <code>/\CThisThat</code>. To search in a case-insensitive manner, use <code>\c</code>. Moreover, searching backward can be done with <code>?</code> instead of <code>/</code>.</p>
<h1 id="setting-up-linux-password-management-system-with-pass-and-gnupg">Setting up linux password management system with pass and gnupg</h1>
<ul>
<li>Install using <code>sudo apt-get install pass</code></li>
<li>Password stores are associated with GPG keys stored in the system.</li>
<li>Initiate a password store using</li>
</ul>
<pre><code>pass init KEY_ID</code></pre>
<p>Here, <code>KEY_ID</code> is the 8-digit GPG key, or name, or email address associated with a GPG entry.</p>
<p>Now, an empty <code>~/.password-store</code> is generated.</p>
<ul>
<li>You need to create a gpg key (along with a passphrase) beforehand using</li>
</ul>
<pre><code>gpg --gen-key</code></pre>
<ul>
<li>In this process, you need to supply a name and an email address. You will then be asked to specify a secret password or passphrase to protect the private key generated in this process. See <a href="Dicewarehttps://theworld.com/~reinhold/diceware.html">Diceware</a> method as an example of a memorable passphrase generation method.</li>
</ul>
<p>All generated files are saved in <code>~/.gnupg</code> directory.</p>
<ul>
<li>You can see all keys in your system using all public keys using <code>gpg --list-keys</code> and all private keys using <code>gpg --list-secret-keys</code>. Note that private keys have public keys in them. The hexadecimal code associated <code>pub</code> is the identifier <code>KEY_ID</code> that can be provided to <code>pass</code>. Alternatively, you can specify the <code>name</code> or the email address as the <code>KEY_ID</code> while using <code>pass init</code></li>
</ul>
<p>The privatekey-passphrase pair is secret and needs to be protected. Losing the private key means you won’t be able to decrypt anything, including the stored passwords. The private key (which already contained the public part) can be exported to a file using</p>
<pre><code>gpg --export-secret-keys KEY_ID &gt; secret_keyfile</code></pre>
<p>This produces a binary (unreadble) file. To export into human-readable ascii file, include <code>-a</code>:</p>
<pre><code>gpg --export-secret-keys -a KEY_ID &gt; secret_keyfile</code></pre>
<p>The output file <code>secret_keyfile</code> should be stored safely and can be imported to a new computer using</p>
<pre><code>gpg --import secret_keyfile</code></pre>
<p>Both importing and exporting methods will involve you recalling the <em>secret</em> passphrase, which was used to generate the gpg key.</p>
<p>Note that with the <code>secret_keyfile</code> alone (i.e. without passphrase), the private key cannot be installed into a new computer and hence encrypted files cannot be decrypted.</p>
<p>As long as you have access to <code>secret_keyfile</code> and the passphrase is memorized, the existing private key can be deleted. This can be done for example using <code>gpg --delete-secret-key KEY_ID</code> (which deletes the private key only, to delete the public part as well, do <code>--delete-key</code> again) or by simply deleting the directory <code>~/.gnupg</code>.</p>
<ul>
<li>After importing a secret key from another source, you need to <code>trust</code> the key to use it in your <code>pass</code> like this:</li>
</ul>
<pre><code>gpg --edit-key KEY_ID
gpg&gt; trust</code></pre>
<p>Select <code>5 = I trust ultimately</code>. Exit with Ctrl+D or <code>gpg&gt; save</code> to exit.</p>
<p>After that, commands like <code>pass insert</code> should work.</p>
<ul>
<li><code>pass</code> requires the gpg key (private key) to encrypt the passwords.</li>
<li>If you want to re-encrypt the passwords with another gpg key, you can run</li>
</ul>
<pre><code>pass init NEW_KEY_ID</code></pre>
<p>CAUTION: You need to have BOTH the old key <code>KEY_ID</code> and the new key <code>NEW_KEY_ID</code> present in your <code>~/.gnupg</code>.</p>
<p>Back to <code>pass</code>: * See your list of passwords using <code>pass</code> * Insert a new password to you store using <code>pass insert Category_C/Site_A</code> * See the stored password using <code>pass Category_C/Site_A</code> * Copy the password to the clipboard for 45 seconds using <code>pass -c Category_C/Site_A</code></p>
<ul>
<li>Make your password store a git repository using</li>
</ul>
<pre><code>pass git init
pass git remote add origin github.com:a-pass-store</code></pre>
<p>After this step, every call to <code>pass</code> also initiates a <code>git commit</code> for the changes made to the password files.</p>
<p>Note: all usual git commands can follow after <code>pass</code>. For example, <code>pass git push -u --all</code> * For firefox extension: Install the ‘host app’ using</p>
<pre><code>curl -sSL github.com/passff/passff-host/releases/latest/download/install_host_app.sh | bash -s -- firefox</code></pre>
<p>Install the plugin from https://addons.mozilla.org/en-US/firefox/addon/passff/</p>
<ul>
<li><p>For Android, use the <code>Password Store</code> app by Harsh Shandilya</p></li>
<li><p><a href="https://michael.kjorling.se/computers/passwords#need-remember">Read</a></p></li>
</ul>
<p>More: * The expiry date on the gpg key does not affect the ability to decrypt. The expiry date can be extended by editing the key using</p>
<pre><code>gpg --edit-key KEY_ID
gpg&gt; passwd</code></pre>
<p>and then Ctrl+D or <code>gpg&gt; save</code>. * The passphrase can be updated using <code>gpg&gt; passwd</code> and then <code>gpg&gt; save</code>. Changing passphrase does not affect the decryption process of already-encrypted files.</p>
<p>Storing: - <code>pass</code>-encrypted passwords can be stored in <strong>private</strong> github repositories - Storing private key: writing down (printing out) a modified version on paper - No storing passphrases, but remembering them. A good output is</p>
<pre><code>diceware -d - -n 5 -w en</code></pre>
<p>to use smaller words from source <code>en</code>. Better alternative: <code>xkcdpass</code> Pictures based on the words are easy to remember. Update every 6 months or so.</p>
<h1 id="mutt-with-oauth2">Mutt with OAUTH2</h1>
<h2 id="installation-1">Installation</h2>
<p><strong>Caution:</strong> I keep getting errors</p>
<pre><code>imap_oauth_refresh_command: unknown variable
smtp_oauth_refresh_command: unknown variable</code></pre>
<p>where I run mutt installed via <code>apt-get install</code>. Turns out <code>SASL</code> was not available in the ubuntu release version. So I had to build from source.</p>
<ul>
<li>Build <code>mutt</code> from source with <code>sasl</code> support Get the dependencies with</li>
</ul>
<pre><code>sudo apt-get build-dep mutt</code></pre>
<p>Get the latest source (check latest version)</p>
<pre><code>https://bitbucket.org/mutt/mutt/downloads/mutt-1.14.6.tar.gz
tar -xvf mutt-1.14.6.tar.gz
cd mutt-1.14.6</code></pre>
<p>Configure with imap, smtp, sasl etc (run <code>./configure --help</code> for more options)</p>
<pre><code>make clean
./configure --with-ssl                               \
            --enable-external-dotlock                \
            --enable-pop                             \
            --enable-imap                            \
            --enable-smtp                       \
        --with-sasl             \
            --enable-hcache                          \
            --enable-sidebar                         &amp;&amp;
make -j4
sudo make install</code></pre>
<p>Instead of <code>make install</code>, we can issue <code>sudo checkinstall</code> to create a <code>.deb</code> package that can be uninstalled with <code>apt-get remove</code>.</p>
<p>Make sure the installed version has <code>sasl</code> support etc by using</p>
<pre><code>mutt -v | grep IMAP
mutt -v | grep SASL</code></pre>
<p>etc.</p>
<p><a href="https://gitlab.com/muttmua/mutt/-/issues/179">This</a> website tells you to install with following flags</p>
<pre><code>./configure \
    --prefix=/usr/local         \
    --with-mailpath=/var/mail   \
    --enable-debug              \
    --enable-hcache             \
    --enable-imap               \
    --enable-smtp               \
    --enable-pop                \
    --enable-sidebar            \
    --enable-compressed           \
    --with-curses               \
    --with-sasl                 \
    --with-gss                  \
    --with-gnutls               \
    --with-idn</code></pre>
<h2 id="oauth2-credentials">OAUTH2 credentials</h2>
<ul>
<li>Get the refresh token etc using Oath2: Download the <a href="https://github.com/google/gmail-oauth2-tools/blob/master/python/oauth2.py">file</a> and make it executable using <code>chmod +x oauth2.py</code>. Get <code>&lt;your_client_id&gt;</code> and <code>&lt;your_client_secret&gt;</code> from <a href="https://console.cloud.google.com/apis/credentials">google</a></li>
</ul>
<p>Run <code>oath2.py</code> like this:</p>
<pre><code>./oauth2.py --user=&lt;user&gt;@gmail.com \
--client_id=&lt;your_client_id&gt; \
--client_secret=&lt;your_client_secret&gt; --generate_oauth2_token</code></pre>
<p>Follow the link, login, and paste back in the script, the script spits out a <code>refresh code</code>, save that.</p>
<p>Now, add to <code>muttrc</code> (<code>~/.mutt/muttrc</code>) the following (later, move them to another file)</p>
<pre><code>set imap_user=&#39;&lt;username&gt;&#39;
set imap_authenticators=&#39;oauthbearer&#39;
set imap_oauth_refresh_command=&#39;~/.mutt/oauth2.py --quiet --user=&lt;username&gt; --client_id=&lt;your_client_id&gt; --client_secret=&lt;your_client_secret&gt; --refresh_token=&lt;your_refresh_token&gt;&#39;

set smtp_authenticators=&quot;oauthbearer&quot;
set smtp_oauth_refresh_command=&#39;~/.mutt/oauth2.py --quiet --user=&lt;username&gt; --client_id=&lt;your_client_id&gt; --client_secret=&lt;your_client_secret&gt; --refresh_token=&lt;your_refresh_token&gt;&#39;
set smtp_url = &quot;smtp://&lt;username&gt;@gmail.com@smtp.gmail.com:587/&quot;

# Remote Gmail folders
set folder = &quot;imaps://imap.gmail.com&quot;
set spoolfile = &quot;+INBOX&quot;
set postponed = &quot;+[Gmail]/Draft&quot;
set record = &quot;+[Gmail]/Sent Mail&quot;
set trash = &quot;+[Gmail]/Trash&quot;</code></pre>
<p>where <code>&lt;user&gt;</code>, <code>&lt;your_client_id&gt;</code>, <code>&lt;your_client_secret&gt;</code>, <code>&lt;your_refresh_token&gt;</code> are replaced appropriately.</p>
<h2 id="modifications">Modifications</h2>
<ul>
<li><code>mutt</code> loads <em>all</em> emails on each launch, which is time-consuming and useless. I could not find a way to specify the limit the number of headers that it fetches, but setting the command</li>
</ul>
<pre><code>set header=~/.mutt/cache/headers</code></pre>
<p>and creating the directory (<code>mkdir -p ~/.mutt/cache/headers</code>), which is very important, the loading time reduces significantly.</p>
<h2 id="questions">Questions</h2>
<ul>
<li>Move all the secret credentials to another file, or keep them encrypted</li>
<li>New unread messages are not highlighted by default</li>
<li>How to separate spam and promotional ones from important ones?</li>
</ul>
<h1 id="zotero">Zotero</h1>
<h3 id="restore-old-setup">Restore old setup</h3>
<p><strong>(use script <code>myconfigs/zotero_setup</code> instead)</strong> - Install - Copy old profile <code>.zotero/zotero/&lt;random_string&gt;.default</code> (saved in google cloud directory <code>zotero</code>) into <code>$HOME</code>. This will have login and plugin information and settings, but not the database. - Run <code>zotero</code> and <strong>refuse</strong> to <code>sync to empty database</code> - Disable <code>sci-hub</code> - Go to <code>Zotfiles settings</code> and verify the custom location and subdirectory (<code>General Settings &gt; Location of Files</code> as <code>Custom Location</code>, <code>Subfolder defined by</code> as <code>/%c/</code>) - Sync - Enable <code>sci-hub</code> - Set zathura as <strong>firefox</strong> default pdf viewer to set the same for zotero</p>
<h3 id="installation-2">Installation</h3>
<ul>
<li>Install Zotero from source (the snap version does not follow system theme) by following the instruction. <a href="https://www.zotero.org/support/installation">link</a></li>
</ul>
<p>Alternatively, use <a href="https://github.com/retorquere/zotero-deb">this guy’s script</a> for latest version via <code>apt-get</code>:</p>
<pre><code>wget -qO- https://github.com/retorquere/zotero-deb/releases/download/apt-get/install.sh | sudo bash
sudo apt update
sudo apt install zotero</code></pre>
<ul>
<li>Install the firefox plugin.</li>
<li>Download plugins: (right click and <code>save link as</code> to get the <code>.xpi</code> file instead of attempting to install on Firefox as a plugin). To install plugins, goto Zotero app <code>Tools &gt; Addon &gt; Gear Icon &gt; Install from file</code>. Restart Zotero.
<ul>
<li>Download the <code>Zotfile</code> plugin from <a href="http://zotfile.com/">link</a></li>
<li>[install after Zotfile setup and sync] Download <code>Better Bibtex</code> plugin from <a href="https://github.com/retorquere/zotero-better-bibtex">link</a></li>
<li>[install after Zotfile setup and sync] Download <code>scihub</code> plugin from <a href="https://github.com/ethanwillis/zotero-scihub">link</a></li>
</ul></li>
<li>After installing the scihub plugin, follow this <a href="https://medium.com/@gagarine/use-sci-hub-with-zotero-as-a-fall-back-pdf-resolver-cf139eb2cea7">link</a> and set your browser in <code>.bashrc</code> by adding</li>
</ul>
<pre><code>export BROWSER=/usr/bin/firefox</code></pre>
<p>and <code>source ~/.bashrc</code>.</p>
<h3 id="zotfile-settings">Zotfile Settings</h3>
<p>In <code>Tools &gt; Zotfile preference</code>, set the following * <code>Advanced Settings</code>: <em>uncheck</em> Only work with the following filetypes. Therefore, renaming and moving attachments work for tex, xoj etc, including new unexpected filetypes as well. * <code>Advanced Settings</code>: check remove special characters from filenames * <code>General Settings</code>: Set <code>Location of Files</code> as <code>Custom Location</code> and select a new directory which will be backed up using gdrive. Add <code>Subfolder defined by</code> as <code>/%c/</code> to add the <code>collection</code> name as the subdirectory. - <code>Renaming rules:</code> Set <code>Format for all item Types except Patents</code> to <code>{%a} ({%y}) {%t}</code>. Also, <code>Delimiter between multiple authors</code> to <code>-</code>. Set <code>Number of authors to display when authors are omitted</code> to <code>2</code>.</p>
<h3 id="setup-syncing-edit-preferences-sync">Setup syncing (Edit &gt; Preferences &gt; Sync)</h3>
<ul>
<li><p>Set up syncing and turn off attachment syncing (uncheck <code>Sync attachment files in My Library using</code> and <code>Sync attachment files in group libraries using Zotero Storage</code>. This way, the database is synced by Zotero and the pdf files (attachments) are backed up by drive.</p></li>
<li>Click on the green sync button on top right to sync</li>
<li><p>While using Zotfiles and a custom location for the pdf files, the path for the files in a new setup has to be the same (I think the original custom path is saved on the cloud). A path mismatch will throw a <code>not found</code> error.</p></li>
</ul>
<h3 id="in-better-bibtex-settings-editpreferencesbetter">In Better Bibtex settings (Edit&gt;Preferences&gt;Better):</h3>
<ul>
<li>Add vim support by adding the following to <code>.vimrc</code></li>
</ul>
<pre><code>function! ZoteroCite()
  &quot; pick a format based on the filetype (customize at will)
  let format = &amp;filetype =~ &#39;.*tex&#39; ? &#39;cite&#39; : &#39;pandoc&#39;
  let api_call = &#39;http://127.0.0.1:23119/better-bibtex/cayw?format=&#39;.format.&#39;&amp;brackets=1&#39;
  let ref = system(&#39;curl -s &#39;.shellescape(api_call))
  return ref
endfunction

noremap &lt;leader&gt;z &quot;=ZoteroCite()&lt;CR&gt;p
inoremap &lt;C-z&gt; &lt;C-r&gt;=ZoteroCite()&lt;CR&gt;</code></pre>
<ul>
<li>In <code>Edit &gt; Preferences</code> &gt; <code>Better Bibtex</code> &gt; <code>Citation Keys</code>, set an easy format like (see Documentation for more formats):</li>
</ul>
<pre><code>[authEtAl][veryshorttitle1:capitalize][shortyear]</code></pre>
<ul>
<li>Upto two authors - Lastnames, capitalized</li>
<li>More than 3 authors - first author last name, capitalized, followed by <code>EtAl</code></li>
<li>First significant word of the title (ignore <code>a</code>, <code>the</code> etc), capitalize</li>
<li>Last two digits of the year</li>
</ul>
<h2 id="caution"><strong>Caution:</strong></h2>
<ul>
<li>Items without a parent do not get moved or renamed, so make sure to create one for unrecognized files</li>
<li>Items do not get automatically copied to the new location until you select them and click <code>rename attachments</code></li>
<li>Moving items to another collection can be done by holding the shift key while dragging with the mouse</li>
<li>Auto syncing is done within a few seconds of change to the database.</li>
<li>Files in the <em>Unfiled items</em> category are placed in the base directory, instead of in the collection directories. Edit or move them.</li>
</ul>
<h2 id="navigation">Navigation</h2>
<ul>
<li>Ctrl-F to search</li>
<li>Select and item and hold down <code>Alt</code> key to highlight the collection it belongs to</li>
<li>Select collection pane with <code>Ctrl-Shift-L</code></li>
<li>[ ] no way to focus on the main pane (with the attachments etc)</li>
</ul>
<h2 id="cleanup">Cleanup</h2>
<h3 id="removing-missing-attachments-with-zotero-storage-scanner-plugin">Removing missing attachments with <code>zotero-storage-scanner</code> plugin</h3>
<ul>
<li>Storage Scanner creates tags for broken attachments and duplicate attachments.</li>
<li>Selecting <code>#broken_attachments</code> filters items that have broken attachments.</li>
<li>Selecting <em>1</em> of those broken attachments, then selecting ctrl+a appears to select all the broken attachments, which you can then delete by pressing <code>delete</code></li>
</ul>
<h3 id="detecting-and-removing-orphan-attachments">Detecting and removing orphan attachments</h3>
<p>Sometimes, files are added to the disk but are not linked with attachments. To detect those - Set a new location to store files in zotifiles preferences - select all files and <code>rename attachements</code> - This way, all linked attachments will be moved to a new location. Unlinked files remain in the old location. - Delete old unlinked files (or save them elsewhere to link later), and revert the storage directory back in zotfile preferences and <code>rename attachments</code> again.</p>
<h2 id="other-practices">Other practices</h2>
<ul>
<li>Merge duplicates</li>
<li>Don’t keep a file in more than one collection (to avoid having to select a location while renaming attachments via zotfiles). Use tags to mark files instead</li>
<li>Rename attachments often</li>
<li>Back up papers to gdrive often</li>
</ul>
<pre><code>cd ~/gdrive
drive push paper-org</code></pre>
<ul>
<li>Back up Zotero configs occasionally</li>
</ul>
<pre><code>cd ~/.zotero
tar czvf zotero-conf.tar.gz zotero/
mv zotero-conf.tar.gz ~/gdrive/zotero/
cd ~/gdrive
drive push zotero</code></pre>
<ul>
<li><p>Copy configs and <code>drive pull paper-org</code> into new computers before syncing</p></li>
<li>Use patched xournal for compatibility with xoj files (or xournalpp)</li>
<li><p>Use sci-hub to populate empty references</p></li>
</ul>
<h2 id="scenario">Scenario:</h2>
<ul>
<li>Move files to <code>~/Zotero</code> directory while renaming them</li>
</ul>
<ol type="1">
<li>Add files using Linked directory</li>
<li>Zotfile preference: Location of files is <code>Attached Stored copy of file(s)</code></li>
<li>Select all files, and Rename</li>
</ol>
<ul>
<li>You want to keep the directory structure of your pdf file, just batch rename them</li>
</ul>
<ol type="1">
<li>Add files using Linked directory</li>
<li>Zotfile preference: <code>Location of Files</code> is <code>Custom Location</code>, possibly add <code>Subfolder defined by</code> as <code>%c/</code> to add the <code>collection</code> name as the subdirectory</li>
<li>Select all files, and Rename Now, you can keep backing up the custom location using gdrive etc. Caution: original files are deleted (i.e. moved, not copied)</li>
</ol>
<ul>
<li>You want to add citations to you tex file as you type and generate the .bib file automatically afterwards</li>
</ul>
<ol type="1">
<li>While typing in the tex file in vim, press <code>&lt;leader&gt;z</code> in normal mode or <code>Ctrl-Z</code> in insert mode to launch the Zotero search window</li>
<li>Type search terms, select the citation, hit enter to insert strings like <code>\cite{AuthorEtAlTitle05}</code></li>
<li>After the tex file is generated with incomplete citations, go to Zotero, <code>Tools</code> &gt; <code>Scan bibtex Aux file</code></li>
<li>Supply the <code>.aux</code> file that is generated from the <code>.tex</code> file. Set a tag name when asked.</li>
<li>On the bottom-left part of Zotero, type and select the tag name you set, select all, right click, export as <code>Better Bibtex</code>.</li>
<li>This will create a <code>.bib</code> file with all citations extracted from the <code>.aux</code> file. Add it to <code>.tex</code> file in <code>\bibliography{}</code> with appropriate <code>\bibliographystyle{}</code>. Hint: Right click on the tag to rename, delete, or assign a color to it.</li>
</ol>
<ul>
<li>Move all files to a new location, with a new directory structure, renaming them</li>
</ul>
<ol type="1">
<li>Select the location you want the files to go in <code>Zotfile Preferences &gt; Location of Files</code>. For new installation of Zotero, you need to supply <code>Linked Attachment Base Directory</code> as the directory used by Zotfiles.</li>
</ol>
<h1 id="cpu-frequency-scaling">CPU frequency scaling</h1>
<ul>
<li>Use the utilty <code>s-tui</code> (<code>pip3 install s-tui --user</code>) along with <code>stress</code> (<code>sudo apt-get install stress</code>) to load your system and observe how temperature works with frequency.</li>
<li>See the current <code>scaling_governor</code> using</li>
</ul>
<pre><code>cat /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor</code></pre>
<p>Note: the asterisk implies that we are printing out the rule for <em>all</em> the cpu’s. If it is <code>powersave</code> (which is the default), the frequency stays at the lowest possible frequencies.</p>
<ul>
<li>You can manually change the current <code>scaling_governor</code> by directly editing the file with the one of the profiles <a href="https://wiki.archlinux.org/index.php/CPU_frequency_scaling">see</a> <a href="https://www.kernel.org/doc/Documentation/cpu-freq/governors.txt">see</a></li>
</ul>
<p><code>performance</code> Run the CPU at the maximum frequency. <code>powersave</code> Run the CPU at the minimum frequency. <code>userspace</code> Run the CPU at user specified frequencies. <code>ondemand</code> Scales the frequency dynamically according to current load. Jumps to the highest frequency and then possibly back off as the idle time increases. <code>conservative</code> Scales the frequency dynamically according to current load. Scales the frequency more gradually than ondemand. <code>schedutil</code> Scheduler-driven CPU frequency selection [2], [3].</p>
<p>For examplie, issue</p>
<pre><code>echo &quot;performance&quot; | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor</code></pre>
<p><strong>Caution:</strong> raising the frequency increases the CPU temperature significantly and affects the remaining time on battery.</p>
<ul>
<li>Alternatively, you can edit the <code>scaling_governor</code> variable using the tool <code>cpupower</code>. On Ubuntu, this package can be installed using</li>
</ul>
<pre><code>sudo apt-get install linux-tools-&lt;kernel_version&gt;-generic</code></pre>
<p>where <code>&lt;kernel_version&gt;</code> is the version of the current linux kernel (see <code>uname -a</code>). Then, you can change the profile using</p>
<pre><code>cpupower frequency-set -g ondemand</code></pre>
<h1 id="papis">Papis</h1>
<h2 id="install">Install</h2>
<ul>
<li>(Doesn’t work) Install from source</li>
</ul>
<pre><code>sudo apt-get install libxml2-dev libxslt1-dev
#git clone https://github.com/alejandrogallo/papis.git # bad link
git clone https://github.com/papis/papis.git
cd papis
python3 setup.py install --user</code></pre>
<p>Uninstall with <code>make uninstall</code> from the directory or</p>
<pre><code>python3 setup.py install --user --record files.txt 
xargs rm -rf &lt; files.txt</code></pre>
<p>(Still doesn’t work) Install older python version which provides the latest packages (weird) Get <code>python3.8.6</code> <a href="https://hackersandslackers.com/multiple-versions-python-ubuntu/">link</a> and <a href="https://linuxconfig.org/how-to-change-from-default-to-alternative-python-version-on-debian-linux">link</a></p>
<ul>
<li>Install the dependency</li>
</ul>
<pre><code>sudo apt-get install python3-setuptools</code></pre>
<ul>
<li>As user (create default directory <code>$HOME/Documents/papers</code> to avoid errors on first run)</li>
</ul>
<pre><code>pip3 install --user papis</code></pre>
<ul>
<li>For bash completion add to <code>.bashrc</code></li>
</ul>
<pre><code># for local installation with --user
export PATH=&quot;$PATH:$HOME/.local/bin&quot;
# for bash completion
source $HOME/.local/etc/bash_completion.d/papis.sh</code></pre>
<ul>
<li>View the config file <code>~/.config/papis/config</code> to find (or change) the default paper location</li>
</ul>
<pre><code>dir = ~/Documents/papers
pip3 install --user papis</code></pre>
<ul>
<li>Create the directory (otherwise you get error while running)</li>
</ul>
<pre><code>mkdir ~/Documents/papers</code></pre>
<ul>
<li>For papis-vim (follow instructions)</li>
</ul>
<pre><code>pip3 install whoosh</code></pre>
<ul>
<li>If using <code>whoosh</code> as a database backend,</li>
</ul>
<pre><code>database-backend = whoosh</code></pre>
<p>now open papis with (or add <code>default-query-string = title:*</code> to the config)</p>
<pre><code>papis open &#39;*&#39;</code></pre>
<ul>
<li>Clear papis cache with</li>
</ul>
<pre><code>papis --clear-d </code></pre>
<p>which clears the directory <code>~/.cache/papis</code>.</p>
<h2 id="usage">Usage</h2>
<ul>
<li>Use query language for searching like this</li>
</ul>
<pre><code>papis open `author:einstein publisher:review Principia` </code></pre>
<p>All specified options are joined with <code>AND</code> for default database type. With <code>whoosh</code> database, we can use <code>OR</code> (and other whoosh query language strings)</p>
<pre><code>papis open &#39;(author:einstein AND year:1905) OR title:einstein&#39;</code></pre>
<ul>
<li><p>Use <code>project</code> YAML field for papers</p></li>
<li><p>Exporting all references from a project to bibtex</p></li>
</ul>
<pre><code>papis export --all --format bibtex project:pterodactyl-migration &gt; bibliography.bib</code></pre>
<ul>
<li>Add files to existing paper (selected by a search string) with <code>addto</code></li>
</ul>
<pre><code>papis addto &#39;einstein photon definition&#39; -f a.pdf -f b.pdf</code></pre>
<ul>
<li>Update a .bib file after changing some YAML info: <a href="https://papis.readthedocs.io/en/latest/commands.html#module-papis.commands.bibtex">see</a></li>
</ul>
<h2 id="moving-from-zotero">Moving from Zotero</h2>
<ul>
<li>Generate a bibtex from zotero (without exporting files). File paths will be extracted from bib files, even when zotfiles is in use.</li>
<li>Import in papis using</li>
</ul>
<pre><code>papis bibtex read ./path/to/my/bibfile.bib import -o test</code></pre>
<h2 id="to-make-papis-as-functional-as-zotero-it-needs-to-be-able-to">To make papis as functional as Zotero, it needs to be able to</h2>
<ul>
<li>[ ] (add <code>--from pdf2doi</code> before filename that works sometimes ) extract metadata from supplied pdf</li>
<li>[ ] (currently broken) sci-hub auto download</li>
<li>[ ] (from zotero-exported bibtex file, but filenames with special characters are ignored) bulk add multiple files (or convert Zotero database to this)</li>
<li>[ ] (papis-vim) should be able to generate .bib from .aux files</li>
<li>[x] tag papers for projects</li>
<li>[x] (manually using gdrive) sync the database</li>
<li>[x] (use <code>addto</code> or edit with C-e to manually add file) store attachments, mainly .xoj files</li>
<li>[x] (warns when adding) remove duplicates</li>
<li>[x] (creates unique(?) citation key in <code>ref</code> field) should have unique citation keys</li>
<li>[x] (can set default filename pattern in config) meaningful filename of pdf</li>
</ul>
<h2 id="current-bugs">Current Bugs</h2>
<ul>
<li>[ ] (add <code>--from pdf2doi</code> before filename that works sometimes) Cannot <code>papis add &lt;filename&gt;.pdf</code> when there is a white space in <code>&lt;filename&gt;</code></li>
<li>[ ] cannot add pdf file if <code>add-folder-name</code> is specified to be something non-default</li>
<li>[ ] (add <code>--from pdf2doi</code> before filename that works sometimes) Cannot extract doi info from local pdf</li>
<li><p>[ ] Sci-hub script does not work</p></li>
<li><p>[x] (compiles with latest git after <code>pip3 uninstall papis</code> and <code>make uninstall</code> from <code>papis</code> repos) Cannot compile from github even after installing <code>libxml2</code> and more. There some talk of version 0.12 (which possibly fixed some of the issues) but where is it?</p></li>
</ul>
<h1 id="marp-for-presentation-slides-using-markdown">MARP for presentation slides using markdown</h1>
<p>Various tips: <a href="https://www.hashbangcode.com/article/seven-tips-getting-most-out-marp">link</a></p>
<h2 id="installation-3">Installation</h2>
<ul>
<li><del>Using npm</del> (didn’t work)</li>
<li><del>Install from ubuntu snap repo</del> (the executable filename is weird)</li>
</ul>
<pre><code>sudo snap install marp-cli-carroarmato0</code></pre>
<ul>
<li>Download the binary from the release page on github, extract the tar to get a <em>single</em> binary file <code>marp</code>. Launch it with <code>./marp</code>.</li>
</ul>
<h2 id="workflow">Workflow</h2>
<ul>
<li>Create <code>slides.md</code> file with proper headers.</li>
<li>Convert to html using <code>./marp slide.md</code>. This creates <code>slides.html</code></li>
<li>Open html in browser <code>firefox slides.html</code></li>
<li>Keep editing and see changes in real time using</li>
</ul>
<pre><code>./marp slide.md --watch</code></pre>
<ul>
<li>Alternatively, use the native previewer using</li>
</ul>
<pre><code>./marp --watch --preview</code></pre>
<h2 id="usage-1">Usage</h2>
<ul>
<li>Itemized lists are defined using <code>-</code>, whereas <code>*</code> produces next slide as we go (i.e. requires you to go to the next slide before showing the next item)</li>
<li>Sublists need two preceding spaces</li>
<li>Highlight text with ticks <code>text</code>, which can also be used to embed code</li>
<li>Comment with <code>&lt;!-- comment --&gt;</code> which can span over multiple lines.</li>
</ul>
<h2 id="tex-support">Tex support</h2>
<p>Marp uses KaTeX for rendering latex. Here are the supported functions. https://katex.org/docs/supported.html</p>
<p>You can specify which math engine to use in the header</p>
<pre><code>---
theme: gaia
math: mathjax
---</code></pre>
<p>With mathjax, we can also specify preludes of tex files in the beginning of the page. For examples, if you add</p>
<pre><code>$$
% User defined functions
\newcommand{\F}{\mathcal{F}}
\newcommand{\E}{\mathcal{E}}
\newcommand{\R}{\mathbb{R}}
$$</code></pre>
<p>early on in the page, you can keep using <code>\R</code> to denote real numbers throughout the page.</p>
<h2 id="changing-settings-for-the-current-slide-only">Changing settings for the current slide only</h2>
<ul>
<li>Use underscored directives at the top of the current slide. For example, to temporarily change the background to a gradient color, do</li>
</ul>
<pre><code>&lt;!-- _backgroundImage: &quot;linear-gradient(to bottom, #67b8e3, #0288d1)&quot; --&gt;</code></pre>
<ul>
<li>Skipping the underscore will cause the setting to apply all the subsequent slides. That is how you set global settings.</li>
</ul>
<h2 id="changing-font-size">Changing font size</h2>
<p>To change the font size of the current slide, paste the following within the current slide:</p>
<pre><code>&lt;style scoped&gt;
section {
  font-size: 30px;
}
&lt;/style&gt;</code></pre>
<h2 id="embedding-videos">Embedding videos</h2>
<ul>
<li><p>Embed video with html tag as usual</p></li>
<li>Use <code>--html</code> option to parse html tags written in the <code>.md</code> file. For example, embed a video using the following html tag with size, autoplay and on loop like this:</li>
</ul>
<pre><code> &lt;video width=&quot;320&quot; height=&quot;240&quot; controls autoplay loop&gt; &lt;source src=&quot;data/pacman_fracture.mp4&quot; type=&quot;video/mp4&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt; </code></pre>
<p>and do</p>
<pre><code>./marp slide.md --html --watch --preview</code></pre>
<ul>
<li>(requires <code>--html</code> option) Finally, to align the videos to the left, enclose them in a <code>&lt;div&gt; &lt;/div&gt;</code> tag with left orientation like this:</li>
</ul>
<pre><code>&lt;div style=&quot;float:left;margin-right:20px;&quot;&gt;

 &lt;video width=&quot;320&quot; height=&quot;240&quot; controls autoplay loop&gt;
  &lt;source src=&quot;data/pacman_fracture.mp4&quot; type=&quot;video/mp4&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt; 

&lt;/div&gt;
### Slide title</code></pre>
<ul>
<li>To get a long column, set a large <code>margin-bottom</code> to the <code>div</code> tag like this:</li>
</ul>
<pre><code>&lt;div style=&quot;float:left;margin-right:30px;margin-bottom:300px;&quot;&gt;
...
&lt;/div&gt;
### Slide title</code></pre>
<p>This (with all margin set to 0px) also creates a nice box within a bunch of text, and the text moves out of the way.</p>
<ul>
<li>To push the video to the right-edge of the screen (with no extra margin on the right), use negative margin value like this:</li>
</ul>
<pre><code>&lt;div style=&quot;float:right;margin-right:-70px;margin-top:100px;margin-left:40px;margin-bottom:300px;&quot;&gt;
...
&lt;/div&gt;
### Slide title</code></pre>
<ul>
<li>A good example that works on the default settings:</li>
</ul>
<pre><code>&lt;div style=&quot;float:right;margin-right:-70px;margin-top:-70px;margin-left:10px;margin-bottom:300px;&quot;&gt;
 &lt;video height=&quot;720&quot; controls autoplay loop&gt;
  &lt;source src=&quot;data/damping_w_friction.mp4&quot; type=&quot;video/mp4&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt; 
&lt;/div&gt;

### Simulation: damping with friction
Text goes here</code></pre>
<h2 id="adding-vertical-space">Adding vertical space</h2>
<p>Use html tag with line break <code>&lt;br&gt;</code>. Use as many as needed.</p>
<h2 id="adding-horizontal-space">Adding horizontal space</h2>
<p>Use html characters:</p>
<pre><code>Regular space: &amp;nbsp;
Two spaces gap: &amp;ensp;
Four spaces gap: &amp;emsp;</code></pre>
<h2 id="multiple-images-next-to-each-other">Multiple images next to each other</h2>
<p>List them in the same line, i.e, without any line break like this:</p>
<pre><code>![h:300](data/nonconvex-demo.png) ![h:300](data/nonconvex-demo-ring.png) ![h:300](data/nonconvex-demo-rplus.png)</code></pre>
<p>Specify height and width to fit things in the page.</p>
<h2 id="align-contents-using-tables">Align contents using tables</h2>
<pre><code>Solarized dark             |  Solarized Ocean
:-------------------------:|:-------------------------:
![](https://...Dark.png)  |  ![](https://...Ocean.png)</code></pre>
<h2 id="marp-columns">marp columns</h2>
<p>To have columns within a slide, use scoped style called <code>.columns</code>. Here is an example of a slide with two columns, with the right column an image with subtitle.</p>
<pre><code>
---
&lt;style scoped&gt;
    .columns {
    display: grid;
    grid-template-columns: 60% 40%;
    gap: 1rem;
}
&lt;/style&gt;

# Multi columns in Marp slide

&lt;div class=&quot;columns&quot;&gt;
&lt;div&gt;

## Column 1

Column 1 text goes here

&lt;/div&gt;
&lt;div&gt;

## Column 2

Column 2 text goes here
![img h:300](data/domain.png)
&lt;center&gt;&lt;font size=&quot;12&quot;&gt;Centered text&lt;font&gt;&lt;/center&gt;

Text

&lt;/div&gt;
&lt;/div&gt;

This text is outside the columns.

---
</code></pre>
<h2 id="repeated-css-styles">Repeated css styles</h2>
<p>To avoid retyping detailed scoped styles (<code>&lt;style scoped&gt; ... &lt;/style&gt;</code>) every time, you can give the style a name and reuse it using <code>&lt;p class='stylename'&gt; .. &lt;/p&gt;</code>. Define the name of the style at the beginning globally like this:</p>
<pre><code>
---
marp: true
theme: gaia
style: |
  .subtext {
    font-size: 0.75rem;
    text-align: center;
  }
---

---
# Big text here

&lt;p class=&quot;subtext&quot;&gt;small text&lt;/p&gt;

---
</code></pre>
<p>Note: in CSS, <code>rem</code> is root element.</p>
<h2 id="new-theme-files">New theme files</h2>
<p>Instead of defining new style names within <code>style: |</code> in the header, you can put custom themes in a new css file (you need to call with <code>marp --theme newthemefile.css</code> for it to load) based on the existing theme <code>gaia</code>.</p>
<p>The body of <code>newthemefile.css</code></p>
<pre><code>/* @theme theme-new */

@import &#39;gaia&#39;;

h1 {
  font-size: 60px;
  color: #09c;
}

.cols {
    display: grid;
    grid-template-columns: 60% 30%;
    gap: 1rem;
}

.subtext {
    font-size: 0.75rem;
    text-align: center;
}</code></pre>
<p>In the body of <code>slided.md</code> use the style (and modify options on the fly) as</p>
<pre><code>
--- 
theme: theme-new
---
..
---
# Title
&lt;div class=&quot;cols&quot;, style=&quot;grid-template-columns=&quot;50% 50%;&quot;&gt;
    &lt;div&gt;
    col 1   
    &lt;/div&gt;

    &lt;div&gt;
    col 2   
    &lt;/div&gt;
&lt;/div&gt;

&lt;p class=&quot;subtext&quot;&gt; subtitle &lt;/p&gt;
---</code></pre>
<p>Compile with</p>
<pre><code>./marp slides.md --html --watch --preview --theme newtheme.css</code></pre>
<h1 id="tridactyl-for-firefox">Tridactyl for firefox</h1>
<h2 id="installation-4">Installation</h2>
<ul>
<li>Download the <code>.xpi</code> file from git and install it from <code>Addon &gt; 'gear menu' &gt; Install from file</code></li>
<li>Then, install natively using <code>:nativeinstall</code>, which involve pasting the clipboard into a terminal to install something via curl, and then <code>:native</code> in firefox.</li>
</ul>
<h2 id="settings">Settings</h2>
<p>In <code>~/.tridactylrc</code>, add</p>
<pre><code>&quot; find
bind ? fillcmdline find -?
bind n findnext 1
bind N findnext -1
bind ,&lt;Space&gt; nohlsearch

&quot; Usual search for firefox
&quot; You lose scroll down using ctrl-f
unbind &lt;Ctrl&gt;f
unbind d

bind qq tabclose

&quot; Apparently slow implementation of smoothscroll by devs
&quot; Does not perform as good as pressing Down or Up botton
&quot;set smoothscroll true
&quot; Smaller stepsize of scrolling, default is 10
bind j scrollline 5
bind k scrollline -5</code></pre>
<h2 id="reasons-i-disliked">Reasons I disliked</h2>
<ul>
<li>Hint mode is ugly (box and color)</li>
<li>New tab opens the tridactyl help page by default, setting to blank page opens two tabs, weird behavior</li>
<li>Hint mode on that default page produces hints for nonexistent links, and takes you to <code>issues</code> pages on github.</li>
<li>Default searching keys do not follow vim, redefining search to behave like vim causes to lose incsearch</li>
<li>No <code>ma</code>, <code>mb</code> etc to mark locations in page. <code>'a</code> opens some search menu instead of jumping to mark.</li>
<li>Sourcing <code>.tridactylrc</code> does not apply changes, requires restart. Options specified from withing Firefox persists over restarts. Where are those settings stored?</li>
<li>Could not use vim as default editor sadly</li>
<li>Smoothscroll is jumpy, and not by default. Holding <code>j</code> after turning on smoothscroll makes the scroll look very ugly.</li>
<li>Unable to remap keys to another keys (e.g. <code>j</code> to <code>Down</code>)</li>
</ul>
<h2 id="features-i-enjoyed">Features I enjoyed</h2>
<ul>
<li><code>;k</code> to kill elements of the page</li>
<li><code>g?</code> to encrypt page with cypher</li>
<li><code>C-i</code> to edit in vim directly (although could not make it work with vim+xfce4-term)</li>
<li>Open or save images from the hint mode</li>
<li>Bookmark add/delete directly with <code>A</code></li>
<li><code>C-o</code> and <code>C-i</code> to jump to previously scrolled position within a page</li>
</ul>
<h1 id="vimium-features">Vimium features</h1>
<h2 id="settings-1">Settings</h2>
<p>In vimium preference, go to <code>Advanced</code> and then paste in <code>Custom key mapping</code> the following</p>
<pre><code># Insert your preferred key mappings here.
map &lt;c-d&gt; scrollPageDown
map &lt;c-u&gt; scrollPageUp

unmap x
unmap X
unmap u
unmap d

map qq removeTab
map u restoreTab</code></pre>
<h2 id="copy-and-google-text-found-within-a-page">Copy and google text found within a page</h2>
<ul>
<li>(optional) Use Find <code>/</code> to place the cursor near a desired location</li>
<li>Go to visual mode with <code>v</code></li>
<li>Press <code>c</code> to enter Caret mode, where the cursor can be moved around to select the starting point of the visual mode</li>
<li>Press <code>v</code> to start selecting</li>
<li>Press <code>j/e/w</code> etc to select region</li>
<li>Press <code>p/P</code> to search the selected string directly, or <code>y</code> to yank it.</li>
</ul>
<h2 id="useful-keystrokes">Useful keystrokes</h2>
<ul>
<li>To visit last visited tab: Press <code>Shift-6</code> or <code>&lt;Shift-t&gt;&lt;Enter&gt;</code>. For second last tab, <code>&lt;Shift-t&gt;&lt;Tab&gt;&lt;Enter&gt;</code> etc.</li>
<li>To detach current tab into a new window: <code>W</code></li>
<li>Move tab left or right using <code>&lt;&lt;</code> or <code>&gt;&gt;</code></li>
<li>Copy current address using <code>yy</code></li>
<li>Possibly turn on <code>Use the link's name and characters for link-hint filtering</code> so that you can start typing the string of the link right away instead of waiting for the link text to be generated.</li>
</ul>
<h1 id="imagemagic-not-authorized-to-convert-pdf">Imagemagic <code>not authorized</code> to convert pdf</h1>
<p>Edit <code>/etc/ImageMagick-6/policy.xml</code> to change the line</p>
<pre><code>  &lt;policy domain=&quot;coder&quot; rights=&quot;read|write&quot; pattern=&quot;PDF&quot; /&gt;</code></pre>
<h1 id="extract-png-from-pdf-files">Extract png from pdf files</h1>
<p>Converting pdf to png using <code>imagemagick</code> using</p>
<pre><code>convert input.pdf -density 300 -quality 100 output.png</code></pre>
<p>produces blurry and low quality images.</p>
<p>use <code>pdfimages</code> to extract png from pdfs.</p>
<h1 id="c-tutorial-comparison-with-c">C++ tutorial comparison with C</h1>
<p><a href="http://www.ericbrasseur.org/cppcen.html?i=1">See</a></p>
<h2 id="strings">Strings</h2>
<p>Define strings as <code>std::string</code> datatype with <code>#include&lt;string&gt;</code> (or just <code>string</code> if <code>using namespace std;</code> is present). No need to do <code>strcpy()</code>, we can equate strings.</p>
<pre><code>#include &lt;string&gt;
using namespace std;
int main(){
    string astring = &quot;hello&quot;;
    // copy to another string
    string another_string;
    another_string = astring;
    cout &lt;&lt; another_string &lt;&lt; endl;
    return 0;
}</code></pre>
<h2 id="changing-value-by-reference">Changing value by reference</h2>
<p>The new datatype <code>double &amp;</code> (caution: not <code>double *</code>) is introduced. <code>double &amp;()</code> has datatype <code>double</code> and <code>&amp;()</code> is implicitly applied and converted back based on the context.</p>
<p>In C, to set <code>r=100</code> via reference, we can do</p>
<pre><code>void main(){
    double hundred = 100;
    double *mem = &amp;hundred; // mem is of datatype double *, &amp;hundred is the reference
    double r = *mem;    //the value of reference mem    

    cout &lt;&lt; r &lt;&lt; endl;
}</code></pre>
<p>In C++, <code>double &amp;</code>, can create a symbolic link.</p>
<pre><code>void main(){
    double hundred = 100;
    double &amp;r = hundred; // r is double, &amp;(r) is set to &amp;(hundred)

    // changing the value of symlink changes the value of the target
    r = 200;
    cout &lt;&lt; hundred &lt;&lt; endl;    // outputs 200 instead of 100
}
}</code></pre>
<p>This is equivalent to considering <code>r</code> as a symbolic link to <code>hundred</code>. The symlink to <code>r</code> cannot be changed at a later state.</p>
<h2 id="passing-by-reference">Passing by reference</h2>
<p>Changing the value of a variable via a function is done in C like this:</p>
<pre><code>void main(){
    double r = 50;
    s = change(&amp;r); // &amp;r is the address of r
}
void change(double * v){    // double * is the datatype (address type) of the input
    *v = 100;       // *v = *(&amp;r) = r
}</code></pre>
<p>In C++, it can be done using symlink <code>double &amp;</code>:</p>
<pre><code>void main(){
    double r = 50;
    s = change(r); // &amp;r is the address of r
}
void change(double &amp;v){     // v is a symlink of r via reference    
    v = 100;        
}</code></pre>
<h2 id="default-values">Default values</h2>
<p>This allows the number of inputs to be variable as well.</p>
<pre><code>double test (double a, double b = 7) {
   return a - b;
}

void main () {
   cout &lt;&lt; test (14, 5) &lt;&lt; endl;    // Displays 14 - 5
   cout &lt;&lt; test (14) &lt;&lt; endl;       // Displays 14 - 7
}</code></pre>
<h2 id="see-the-datatype-of-a-variable">See the datatype of a variable</h2>
<p>See the datatype of the variable <code>r</code> using</p>
<pre><code>#include&lt;typeinfo&gt;
cout &lt;&lt; typeid(r).name() &lt;&lt; endl;</code></pre>
<h2 id="c-class">C++ class</h2>
<p>Recall, a C <code>struct</code> can be defined by</p>
<pre><code>using namespace std;
#include &lt;iostream&gt;

struct vector {
   double x;
   double y;

   double area () {
      double s;
      s = x * y;
      if (s &lt; 0) s = -s;
      return s;
   }
};

int main () {
   vector a;

   a.x = 3;
   a.y = 4;

   cout &lt;&lt; &quot;The surface of a: &quot; &lt;&lt; a.area() &lt;&lt; endl;

   return 0;
}</code></pre>
<p>A <strong>class</strong> is a <code>struct</code> with <em>hidden</em> variables that cannot be accessed from outside. To allow access to specific members, use <code>public:</code>. i.e.</p>
<pre><code>class vector {
public:
   double x;
   double y;

   double area () {
      double s;
      s = x * y;
      if (s &lt; 0) s = -s;
      return s;
   }
}</code></pre>
<p>Everything else remains the same.</p>
<h4 id="constructor">Constructor</h4>
<p>We define a class called <code>vector</code>. The constructor <code>vector(a,b)</code> is defined within the class.</p>
<pre><code>class vector {
public:

   double x;
   double y;

   vector (double a = 0, double b = 0) {
      x = a;
      y = b;
   }
};

int main () {

    // define a instance k of class vector
   vector k;
   cout &lt;&lt; &quot;vector k: &quot; &lt;&lt; k.x &lt;&lt; &quot;, &quot; &lt;&lt; k.y &lt;&lt; endl &lt;&lt; endl;

   vector m (45, 2);
   cout &lt;&lt; &quot;vector m: &quot; &lt;&lt; m.x &lt;&lt; &quot;, &quot; &lt;&lt; m.y &lt;&lt; endl &lt;&lt; endl;

   vector p (3);
   cout &lt;&lt; &quot;vector p: &quot; &lt;&lt; p.x &lt;&lt; &quot;, &quot; &lt;&lt; p.y &lt;&lt; endl &lt;&lt; endl;

   return 0;
}</code></pre>
<p>A <strong>shorter</strong> way to define constructors and set default values to the public variables (initialize the public variables) is by <em>direct initialization</em>:</p>
<pre><code>class Point3 {
public:
  double d_x;
  double d_y;
  double d_z;

  Point3() : d_x(0.), d_y(0.), d_z(0.){};
}</code></pre>
<p>or, alternatively</p>
<pre><code>class Point3 {
public:
  Point3(double d_x, double d_y, double d_z) : d_x(0.), d_y(0.){
      d_z = 0;
  };
}</code></pre>
<p>Here, the constructor assigns a zero double value to the all public variables.</p>
<p>Better define a <em>destructor</em> (using <code>~&lt;class_name&gt;</code>) to free memory if <code>new</code> has been used to allocate memory within the constructor.</p>
<p>[ ] Does not work</p>
<pre><code>#include&lt;sting&gt;
#include&lt;iostream&gt;
using namespace std;

class vector {
public:

   double x;
   double y;
   double *asso_matrix;

   vector (double a = 0, double b = 0) {
      x = a;
      y = b;
      asso_matrix = new double [10];    // allocate memory
   }

   ~vector(){
    delete [] asso_matrix;
   }
};</code></pre>
<ul>
<li>If another class B is a member variable of class A, how do I initialize B from A’s constructor? Use shortcut assignment like this:</li>
</ul>
<pre><code>class B{
public:
    int size;
    B(int N){
        size = N;
    }
};

Class A{
public:
    int length;
    B instB;

    // constructor
    A(int M): instB(M){
        length = M;
    }</code></pre>
<h5 id="templated-constructor">Templated constructor</h5>
<p>If your constructor depends on a template, you <em>cannot</em> move the implementation of the constructor outside the header file, where the constructor is defined. For example, the following code will throw error <code>undefined reference to</code>…:</p>
<p>In <code>file.h</code></p>
<pre><code>template &lt;typename ttype&gt;
class cl{
    public:
        int N;
        cl(ttype R);
};</code></pre>
<p>In <code>file.cpp</code></p>
<pre><code>template &lt;typename ttype&gt;
cl&lt;ttype&gt;::cl(ttype R){
    // do something with R
}</code></pre>
<p>To avoid this error, either move the implementation to the header file, <strong>or</strong> list down examples of possible <code>ttype</code> at the end of the implementation file using the keyword <code>template</code> (e.g. <code>template class&lt;ttype_1&gt;;</code> etc). I prefer the second version since header-implementation separation is maintained (you can hide the implementation after <code>.o</code> files are generated).</p>
<ol type="1">
<li>Implement where it is defined In <code>file.h</code></li>
</ol>
<pre><code>template &lt;typename ttype&gt;
class cl{
    public:
        int N;
        cl(ttype R){
            // do something with R
        };
};</code></pre>
<p>or implement later in the same header file In <code>file.h</code></p>
<pre><code>template &lt;typename ttype&gt;
class cl{
    public:
        int N;
        cl(ttype R);
};

template &lt;typename ttype&gt;
cl&lt;ttype&gt;::cl(ttype R){
    // do something with R
}</code></pre>
<ol start="2" type="1">
<li>List down examples of <em>all</em> possible <code>ttype</code>s that you will be using through that template: In file <code>file.cpp</code></li>
</ol>
<pre><code>template &lt;typename ttype&gt;
cl&lt;ttype&gt;::cl(ttype R){
    // do something with R
}

template cl&lt;double&gt;;
template cl&lt;int&gt;;
template cl&lt;RowVector2d&gt;;</code></pre>
<p>Such a terrible failure by C++ people to resolve the inconsistency between separation of definition vs implementation and templating.</p>
<h5 id="templated-function">Templated function</h5>
<p>Similar to templated constructors, if you want to separate the header file from its implementation, we need instantiate the templated functions. For example, In <code>code.h</code></p>
<pre><code>template &lt;typename ttype&gt;
int myfunc(ttype a, ttype b, double c);</code></pre>
<p>In <code>code.cpp</code></p>
<pre><code>template &lt;typename ttype&gt;
int myfunc(ttype a, ttype b, double c){
    //implementation goes here
}

template int mufunc(string a, string b, double c);
template int mufunc(Vector2d a, Vector2d b, double c);</code></pre>
<h5 id="initialize-a-class-via-its-constructor-after-it-is-defined-without-any-constructor">Initialize a class via its constructor <em>after</em> it is defined without any constructor</h5>
<p>Not really initialization, but assignment:</p>
<pre><code>class Particle{
    public:
    size N;
    Particle(int a){
        N = a;
    }
};

void main(){
    Particle P;
    P = Particle(10);
}</code></pre>
<h4 id="accessing-class-variables-and-methods">Accessing class variables and methods</h4>
<ul>
<li>The variables and functions (<em>methods</em>) within <code>public:</code> can be accessed (or set) by using the dot operator. Let the class <code>vector</code> be defined as</li>
</ul>
<pre><code>class vector {
public:
   double x;
   double y;
}</code></pre>
<p>Now, within <code>int main()</code>, we can do</p>
<pre><code>vector v; 
v.x = 5;</code></pre>
<ul>
<li>The arrow operator <code>-&gt;</code> can be used to access variables and methods of a class instance if the instance name is a reference. i.e.</li>
</ul>
<pre><code>vector * v = new vector ;
v-&gt;x = 5;
delete v;</code></pre>
<p>or</p>
<pre><code>vector u;
u.x = 5;
u.y = 4;

vector * v;
v = &amp;u
v-&gt;x = 10;</code></pre>
<p><strong>Caution:</strong> Note that</p>
<pre><code>vector *v;
v-&gt;x = 5;</code></pre>
<p>results in segmentation fault since <code>v</code> is never initialized and hence <code>v-&gt;x</code> points to a non-existing location in memory. In the fist example <code>new</code> allocates memory (which is a form of initialization), and in the second example <code>v = &amp;u</code> copies the already-initialized <code>u</code> into <code>v</code>, thus providing <code>v</code> with well-defined memory location. An alternative would be to redefine the class to add a constructor <code>vector()</code> within it and make sure the variables <code>x</code> and <code>y</code> are initialized there, possible via default variables.</p>
<p>Similar statements hold for methods of the classes, e.g. <code>v-&gt;area()</code> can be used where <code>vector * v</code> is initialized with <code>vector * v = new vector;</code>, for example.</p>
<p><strong>Tip:</strong> Delete the allocated class with <code>~</code> if <code>new</code> has been used.</p>
<h4 id="helper-function-for-a-class-needs-to-be-defied-before-the-call">Helper function for a class: needs to be defied <em>before</em> the call</h4>
<p>If you call a function that was defined outside the class, you <em>may</em> get the error that the function <code>was not declared in this scope</code>. For example, the following code will throw error:</p>
<pre><code>class CC{
    public:
        CC(){
            call_func();
        }
};

void call_func(){
    //code here
};</code></pre>
<p>The solution is simply to move the function <em>before</em> the class definition (in particular, before the function was called). This situation may not arise if the function definition was written in a header file like this <code>void call_func();</code> and this file contained the implementation of it, and that header file was included in this file.</p>
<h4 id="static-variables">Static variables</h4>
<p>Static variables defined within a class are shared by <em>all</em> instances of the class and are defined <em>outside</em> the class. Their values are the same across <em>all instances</em> of a class. For example,</p>
<pre><code>class vector(){
    static int count;

    vector(){
        count ++;
    }
}
// Set outside the class description
int vector::count = 0;

int main(){
    vector a;
    // cout = 1
    vector b;
    // cout = 2
    vector c;
    // cout = 3
}</code></pre>
<p>A variable that is to be the same across all instances of a class and is <em>not</em> meant to be changed anywhere in the code can be defined using <code>const static</code> <em>inside</em> the class.</p>
<h2 id="overloading">Overloading</h2>
<p>Using the same name to mean different things, based on indicative properties such as datatype, number of arguments, etc.</p>
<h4 id="using-namespaces">Using namespaces</h4>
<p>Same variable names can be defined in different namespaces</p>
<pre><code>namespace first {
   int a;
   int b;
}

namespace second {
   double a;
   double b;
}

int main () {
   first::a = 2;
   first::b = 5;

   second::a = 6.453;
   second::b = 4.1e4;
}</code></pre>
<p>To avoid writing the namespace along with the variable, declare the variable along with namespace like this</p>
<pre><code>#include&lt;iostream&gt;
using namespace std::cout;
using namespace std::endl;</code></pre>
<p>Later, we can just write <code>cout &lt;&lt; 'Hi' &lt;&lt; endl</code> instead of the long <code>std::cout &lt;&lt; 'Hi' &lt;&lt; std::endl</code>.</p>
<h4 id="function-name-overloading">Function name overloading</h4>
<p>Depending on the datatype of the function, we can define different implementations of the same function name</p>
<pre><code>double test (double a, double b) {
   return a + b;
}

int test (int a, int b) {
   return a - b;
}

int main () {
   double   m = 7,  n = 4;
   int      m = 7,  n = 4;
}</code></pre>
<h4 id="overloading-within-a-class">Overloading within a class</h4>
<p><strong>Special case:</strong> constructor is a typical function and can be overloaded. The implementation on the constructor can change based on the number and type of input variables to the constructor.</p>
<pre><code>class testc {
    public:
        double a;
        double b;
        
        // no input
        testc(){
            a = 5;
            b = 5;
        }

        // two double inputs, second one optional
        testc(double p, double q=3){
            a = p;
            b = q;
        }
        
        // one int and one double input, second one optional
        testc(int p, double q=4){
            a = p;
            b = q;
        }
};
int main(){
    testvec t1;     //t1.b = 5
    testvec t2(5.0);    //t2.b = 3
    testvec t3(5);      //t3.b = 4
    testvec t4(2,1);    //t4.b = 1  
}</code></pre>
<p><strong>Good practice:</strong> to <em>not</em> use multiple constructors. Instead, use single constructor and specify default values.</p>
<h4 id="operator-overloading">Operator overloading</h4>
<p>Operators can be overloaded, for example, to define <code>+</code> between two classes.</p>
<h2 id="c-project-structure">C++ project structure</h2>
<p><a href="http://www.ericbrasseur.org/cppcen.html?i=1">See appropriate section of link</a> The idea is to keep the following separate: - The header files with definitions only (e.g. <code>vector.hpp</code>) * Functions have to be defined <em>before</em> they are called. This is especially important when the header and implementation files are not separate. - The implementations of methods defined in the header files (e.g. <code>vector_implementations.cpp</code>) - The test code that uses rest of the code base, but does not contain main implementations (e.g. <code>testing_code.cpp</code>)</p>
<p>This way, we can generate an object file called <code>vector_implementations.o</code> from the header and the implementation using</p>
<pre><code>g++ -c vector_implementations.cpp</code></pre>
<p>At this point, the file <code>vector_implementations.cpp</code> is unnecessary. However, we still need <code>vector.h</code>.</p>
<p>Later, link the object file while compiling the test code using</p>
<pre><code>g++ testing_code.cpp vector_implementations.o -o output_exec</code></pre>
<p>and run the output executable using</p>
<pre><code>./output_exec</code></pre>
<ul>
<li>Keep the namespace, class definition, public variables, and public method definition with <code>.hpp</code> files. For example the following header file <code>allvectors.hpp</code> contains</li>
</ul>
<pre><code>class vector {
public:
   double x;
   double y;

   double surface();
};

class morevector {
public:
   double x;
   double y;

   double surface();
};</code></pre>
<ul>
<li>Keep the implementations of the methods defined within the classes in <code>.cpp</code> files. In those file, import the corresponding header files. The full name of the methods need to be used (e.g. <code>double &lt;class_name&gt;::method_name()</code> etc).</li>
</ul>
<p>For example, the following <code>working_with_vectors.cpp</code> contains</p>
<pre><code>using namespace std;
#include &quot;allvectors.hpp&quot;

double vector::surface() {
   double s = 0;

   for (double i = 0; i &lt; x; i++)
   {
      s = s + y;
   }

   return s;
}</code></pre>
<ul>
<li>Keep the executable code (the one with <code>int main()</code>) in another <code>.cpp</code> file. For example, the file <code>testing_the_code.cpp</code> contains</li>
</ul>
<pre><code>using namespace std;
#include &lt;iostream&gt;
#include &quot;allvectors.h&quot;
int main () {
   vector k;

   k.x = 4;
   k.y = 5;

   cout &lt;&lt; &quot;Surface: &quot; &lt;&lt; k.surface() &lt;&lt; endl;

   return 0;
}</code></pre>
<h4 id="more">More</h4>
<ul>
<li>Functions have to be defined <em>before</em> they are called. This is especially important when the header and implementation files are not separate.</li>
<li>Floating point arithmetic error: subtraction of the floating point number that are very close to each other produces a large roundoff error. For example, the following code</li>
</ul>
<pre><code>double u =  5.7;
double p_x = 0.1;
double a = (p_x + u) - u;
std::cout &lt;&lt; &quot;diff: &quot; &lt;&lt; p_x - a &lt;&lt; std::endl;</code></pre>
<p>produces an error of about <code>2e-16</code>, which is pretty large compared to the machine-epsilon of <code>double</code>. To avoid such incidents, 1. Reformulate the algorithm to avoid risky subtraction and division 1. Increase the precision temporarily while adding and subtracting:</p>
<pre><code>double a = ((long double) p_x + (long double) u) - (long double) u;</code></pre>
<ol type="1">
<li>Finally, reduce the number of operations to mitigate the effect of round-off errors.</li>
</ol>
<p><strong>Solution:</strong> Use <code>long double</code>. The datatype <code>double</code> is accurate up to <code>16</code> significant digits. So, numbers larger than 16 digits are read incorrectly. <a href="https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html">Here</a> is an interesting explanation where the provide example of something like this happening.</p>
<p>A <a href="https://scicomp.stackexchange.com/questions/26370/improve-numeric-stability-of-subtraction-in-c">post</a> explains it very well in comparison to Matlab’s trick to avoid such error. * Inheritance, polymorphism etc * <code>std::vector&lt;double&gt;</code> * <code>this</code> is used to denote the pointer to the instance of the class, eg. for <code>delte this;</code>. However, it is rarely used. Another usage is to get information from the base class while calling from within a derived class. *</p>
<h2 id="arrays">Arrays</h2>
<ul>
<li>Single array can be defined directly as</li>
</ul>
<pre><code>double arr[] = {1, 3, 4, 5};
double 2dArr[] = {{1,2},{2,3},{5,6}};</code></pre>
<ul>
<li>Allocate memory using</li>
</ul>
<pre><code>double * arr = new double[5];</code></pre>
<p>and can be freed using</p>
<pre><code>delete[] arr;</code></pre>
<p><strong>Caution:</strong> 2D array cannot be allocated if the second index is a variable, i.e.</p>
<pre><code>int i, j;
double * arr = new double[i][j];</code></pre>
<p>is invalid!!! * The name of the array is the pointer to the array, i.e. </p>
<pre><code>int a2[] = {1, 2, 3};
int * arr;
arr = a2;   // arr is now a2</code></pre>
<p>So, we can pass the array name to a function that takes pointers, like this</p>
<pre><code>void afunc(double * arr){
...}
void main(){
    double a2[] = {1, 2, 3};
    afunc(a2);
}</code></pre>
<h3 id="vector-related-help">Vector-related help</h3>
<ul>
<li>For Matlab-like operations, the most useful datatype is <code>Array</code> by the <code>Eigen</code> library. You can do point-wise multiplication that you cannot do with datatypes like <code>Vector</code>.</li>
<li><p>For 2D row vectors, we will use <code>Array&lt;double, 1, 2&gt;</code>.</p></li>
<li><p>C++ datatype <code>std::vector&lt;ttype&gt;</code> can contain an array of datatypes of any kind, but it cannot do element-wise operation like vectors do.</p></li>
</ul>
<p>For example, the following assignment won’t work</p>
<pre><code>vector&lt;int&gt; v={2, 3, 7};
vector&lt;int&gt; u;
u = v;</code></pre>
<p>You need to <code>push_back()</code> each entry into <code>u</code>:</p>
<pre><code>vector&lt;int&gt; u;
for (int i; i&lt;v.size(); ++i){
    u.push_back(v[i]);
}</code></pre>
<p>However, the datatypes like <code>Eigen::Vector2d</code> etc from the library <code>Eigen</code> can do assignment easily.</p>
<pre><code>Vector2d v = {1, 4};
Vector2d u = v;</code></pre>
<p>Unfortunately, with <code>Eigen</code>, we cannot construct <code>Vector2d</code> of non-numeric objects, which <code>std::vector</code> allows, e.g. <code>vector&lt;myClass&gt; v</code>.</p>
<ul>
<li>The <code>std:vector</code> must have a well-defined size before we assign values to them directly. The following code will throw <code>Segmentation fault</code> error:</li>
</ul>
<pre><code>vector&lt;int&gt; w;
w[0] = 1;</code></pre>
<p>Instead, specify the size while defining using <code>vector&lt;int&gt; w(2);</code> or using a <code>resize()</code> function after defining like <code>w.resize(2);</code> After that, the assignment <code>w[0] = 1</code> will be valid.</p>
<h4 id="removing-elements-from-the-vector-.erase-done-using-pointers">Removing elements from the vector: <code>.erase()</code> <strong>done using pointers</strong></h4>
<p>Create a vector using</p>
<pre><code>vector&lt;double&gt; v;
v.push_back(1.5);
v.push_back(3.4);
v.push_back(4);
v.push_back(6);
v.push_back(5);
v.push_back(4);
v.push_back(2.4);
std::cout &lt;&lt; v &lt;&lt; std::endl;
std::cout &lt;&lt; v.size() &lt;&lt; std::endl;</code></pre>
<p>To remove the value <code>3.5</code> (<code>v[1]</code>) from the vector, do</p>
<pre><code>v.erase(v.begin()+1);</code></pre>
<p>Here, <code>b.begin()</code> is the pointer to <code>v[0]</code> and <code>+1</code> takes to pointer to the next value in the vector.</p>
<ul>
<li>Remove a consecutive list of values using</li>
</ul>
<pre><code>v.erase(v.begin()+2, v.end()+5);</code></pre>
<ul>
<li>Remove multiple elements (use <code>remove()</code> followed by <code>erase()</code> instead, see below): To remove all elements bigger than <code>3</code>, do:</li>
</ul>
<pre><code>for (auto i = v.begin(); i != v.end(); ++i) {
    if (*i &gt; 3) {
    v.erase(i);
    --i;
    }
}</code></pre>
<p>The <code>i--</code> is essential to go with <code>.erase()</code> since <code>v</code> changes size during the loop and <code>v.end()</code> means nothing. Therefore <code>i</code> can run over the current <code>v.end()</code> and output garbage.</p>
<ul>
<li>Note that you can do pointer algebra with <code>int</code>. For example,</li>
</ul>
<pre><code>int steps = i - v.begin();</code></pre>
<p>is valid in the code above.</p>
<ul>
<li>Use <code>remove()</code> to remove multiple elements faster and ignoring the for loop: <a href="https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom">The <em>erase-remove idiom</em></a> The <code>remove()</code> function from <code>#include&lt;algorithm&gt;</code> does <em>not</em> create a final reduced vector, but simply shifts the values forward after removing elements, resulting in an unspecified size of vector, which actually contains the final (reduced) vector in its first few places. We need to <code>erase(begin_ptr, end_ptr)</code> those last few garbage values using the output of <code>remove()</code>, which is the <em>beginning</em> (<code>begin_ptr</code>) of these garbage values and <code>v.end()</code>, the original <em>ending</em> <code>end_ptr</code> of the garbage values.</li>
</ul>
<p>The output of the <code>remove()</code> function is the starting points of the first item <em>after</em> the final reduced array.</p>
<h4 id="eigen-with-openmp">Eigen with OPENMP</h4>
<p>It seems that there is some error (why?) if I use Eigen with <code>-fopemmp</code>. So, turn of Ei-gen’s own parallelism using</p>
<pre><code>#define EIGEN_DONT_PARALLELIZE</code></pre>
<p>in the beginning of the file containing <code>int main()</code>.</p>
<h1 id="matlab-parfor-tutorial">Matlab parfor tutorial</h1>
<ul>
<li>In the gui mode, increase set the default number of workers to 20 (from 12)</li>
<li>Start the local pool with <code>parpool('local', 16)</code> to start 16 workers</li>
<li>Run your code next</li>
<li><p>Close the pool with <code>delete(gcp('nocreate'))</code></p></li>
<li>To load <code>.mat</code> files in parallel, call <code>load()</code> in an external function (file), e.g. <code>load_ext.m</code></li>
</ul>
<pre><code>function str = load_ext(filename)
    str = load(filename);
end</code></pre>
<p>Later, call the file from within parfor:</p>
<pre><code>parfor i=1:10
    str = load_ext(strcat(&#39;data/file_&#39;), num2str(i), &#39;.mat&#39;);
    % extract the varibles from the struct
    matrix_1 = str.matrix_1;
    do_something_with(matrix_1);
end</code></pre>
<h1 id="makefile-help">Makefile help</h1>
<h2 id="rule-to-write-a-makefile">Rule to write a makefile</h2>
<pre><code>output_filename: dependency_filename_1 dependency_filename_2
    full_shell_command_here</code></pre>
<ul>
<li>There has to be a Tab character before the <code>full_shell_command_here</code>.</li>
<li>When <code>make</code> is run without any argument, the first rule is executed. So, it is convenient to add the rule <code>all:</code> that combines all the steps.</li>
<li>The <code>output_filename</code> can also be replaced by a <code>rule_name</code> which is not a filename, but a random string. e.g.</li>
</ul>
<pre><code>dir:
    mkdir build obj
clean:
    rm -r build/* obj/*</code></pre>
<ul>
<li>When <code>make output_filename</code> is executed, <code>make</code> checks if <code>dependency_filename_1</code> and <code>dependency_filename_2</code> are up to date. If they are not, the rule associated with those files are executed first, provided they exist, viz</li>
</ul>
<pre><code>dependency_filename_1:
    shell_command_that_outputs dependency_filename_1
dependency_filename_2:
    shell_command_that_outputs dependency_filename_2</code></pre>
<p>Here is an example where we have a client file <code>main.cpp</code>, headerfile <code>includes/header.h</code> and implementation <code>includes/header.cpp</code> of the header. We would like the following: * If header file and implementations are unchanged and only <code>main.cpp</code> is modified, compile only <code>main.cpp</code> * If header file or the implementation is modified, compile all 3 files. Example makefile to accomplish that:</p>
<pre><code>main.out: header.o
    gcc main.cpp header.o -o main.out
header.o: header.cpp header.h
    gcc -c header.cpp -o header.o</code></pre>
<p>Comment: It is probably safe to assume that if you edit the header file <code>header.h</code>, you would edit the implementation file <code>header.cpp</code> as well. Moreover, it is hard to list down all the header files which the file <code>header.o</code> depends on. So either be extremely cautious while running <code>make</code> to avoid missing out on compiling edited files, or meticulously list down all the dependency files of <code>header.o</code>.</p>
<ul>
<li>We can use <code>$@</code> to denote the target <code>output_filename</code> and <code>$?</code> to denote <em>all</em> the dependencies (i.e. <code>dependency_filename_1 dependency_filename_2</code>). Another macro is using <code>%.</code> to denote <em>any</em>. e.g. the code</li>
</ul>
<pre><code>file1.o: file1.cpp file1.h
    gcc -c file1.cpp -o file1.o
file2.o: file2.cpp file2.h
    gcc -c file2.cpp -o file2.o
file3.o: file3.cpp file3.h
    gcc -c file3.cpp -o file3.o</code></pre>
<p>can be replaced by</p>
<pre><code>%.o: %.cpp %.h
    gcc -c $? -o $@</code></pre>
<p><strong>Caution:</strong> Compiling the cpp file along with the header file into an object file (<code>gcc -c file.cpp file.h</code>) and linking it to other files causes a syntax error <code>.o: file format not recognized; treating as linker script</code>. (Why?) Two alternatives: 1. Use <code>$&lt;</code> (instead of <code>$?</code>) to denote the <em>first</em> argument in the dependency list. 2. Remove the <code>%.h</code> from the dependency list</p>
<ul>
<li><p>To forcefully mark all the files as up-to-date, run <code>make -t</code>. This is useful when you do not want to recompile the header and implementation <em>even after</em> you have edited them, but you only want to compile the client runfile.</p></li>
<li>Specify the location of the header files using <code>-I</code> flags, e.g.</li>
</ul>
<pre><code>INCLUDES_DIR_1 = includes
INCLUDES_DIR_2 = headers

CPPFLAGS += -I$(INCLUDES_DIR_1)
CPPFLAGS += -I$(INCLUDES_DIR_2)</code></pre>
<p>later, supply that to the <code>g++</code> parameters in the makefile using <code>g++ -c input.cpp $(CPPFLAGS)</code></p>
<ul>
<li>C++ <code>undefined reference to</code> error after the definition of the function is clearly defined: Linking issue: Make sure the object (<code>.o</code>) file created from the implementation of the file is linked to the client file, something like</li>
</ul>
<pre><code>gcc main.cpp obj1.o obj2.o -o outfile</code></pre>
<h3 id="string-replacement">String replacement</h3>
<pre><code># Get all cpp files in the subdir structure
T_cpp = $(wildcard  $(INCLUDE_DIR)/**/*.cpp)
# .cpp replaced by .o
T_o = $(T_cpp:%.cpp=%.o)
# Replace the include path structure by object path structure: pattern-substitute
T_o_Build = $(patsubst $(INCLUDE_DIR)/%, $(OBJ_DIR)/%, $(T_o))</code></pre>
<ul>
<li>Generating the object files in a separate directory (from the source code) while maintaining the directory structure: If your <code>.h</code> and <code>.cpp</code> files reside in <code>$(INCLUDE_DIR)</code> directory (within subdirectories of if, possibly) and you want move the object files to <code>$(OBJ_DIR)</code>, do</li>
</ul>
<pre><code>$(OBJ_DIR)/%.o: $(INCLUDE_DIR)/%.cpp
    @echo &quot;Building:&quot;
    $(CC) $(CCFLAGS) -c $? -o $@ $(CPPFLAGS)</code></pre>
<p>This assumes that <em>all</em> the subdirectories of <code>$(INCLUDE_DIR)</code> are to be compiled.</p>
<p>Later, supply all the object files to the main target using a wildcard like <code>ALL_O = $(wildcard  $(OBJ_DIR)/**/*.o)</code></p>
<pre><code>ALL_O = $(wildcard  $(OBJ_DIR)/**/*.o)
mainTarget: ALL_O
    $(CC) $(CCFLAGS) main/mainTarget.cpp $? -o $@ $(CPPFLAGS)</code></pre>
<h3 id="timestamp-in-c">Timestamp in C++</h3>
<ul>
<li>To print the current time in C++ do the following:</li>
</ul>
<pre><code>#include &lt;time.h&gt;

time_t my_time;
char timestring[80];
strftime(timestring, 80, &quot;%F-%T&quot;, localtime(&amp;my_time));

std::cout &lt;&lt; timestring &lt;&lt; std::endl;</code></pre>
<h1 id="abd-android-development-bridge-help">ABD (Android development bridge) help</h1>
<p>Short list from <a href="https://github.com/sncvikas/ADB_Commands">some guy</a> Long list from <a href="https://developer.android.com/studio/command-line/adb">android manual</a></p>
<ul>
<li>Run a shell command with <code>abd shell</code>, followed by the shell commands.</li>
</ul>
<pre><code>adb shell ls
adb shell stop
adb shell reboot</code></pre>
<p>Alternatively, enter the shell with <code>abd shell</code> and run usual shell commands.</p>
<ul>
<li>Transfer file using <code>adb pull</code> and <code>adb push</code></li>
</ul>
<pre><code>adb pull /sdcard/test.png
adb push ~/Downloads/test.apk</code></pre>
<ul>
<li>Take screenshot using <code>screencap</code></li>
</ul>
<pre><code>adb shell screencap /sdcard/screenshot.png
adb pull /sdcard/screenshot.png</code></pre>
<p>Use <code>screenrecord</code> to record screen video.</p>
<ul>
<li>Package manager related tasks All packages:</li>
</ul>
<pre><code>adb shell pm list packages</code></pre>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Fileter packages</th>
<th style="text-align: left;">parameter</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">System apps only</td>
<td style="text-align: left;"><code>-s</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Third party apps</td>
<td style="text-align: left;"><code>-3</code></td>
</tr>
</tbody>
</table>
<ul>
<li>Install external apk using</li>
</ul>
<pre><code>adb install filename.apk</code></pre>
<ul>
<li>Uninstall apps, from a user</li>
</ul>
<pre><code>adb shell uninstall com.example.MYapp
adb shell pm uninstall -k --user 0 com.MYApp</code></pre>
<p>Reinstall them using</p>
<pre><code>adb shell cmd package install-existing com.onyx.latinime</code></pre>
<ul>
<li>Disable an app (without installing)</li>
</ul>
<pre><code>adb shell pm disable &lt;package_name&gt;</code></pre>
<p>The <code>&lt;package_name&gt;</code> can be found by searching with a string like this:</p>
<pre><code>adb shell pm list packages -e | grep &#39;calculator&#39;</code></pre>
<ul>
<li>See the list of active internet connections</li>
</ul>
<pre><code>netstat -lantp</code></pre>
<ul>
<li>Press a key</li>
</ul>
<pre><code>adb shell input keyevent &lt;KEYCODE&gt;</code></pre>
<p>Example:</p>
<pre><code>adb shell input keyevent  KEYCODE_MENU
adb shell input keyevent  KEYCODE_HOME
adb shell input keyevent  KEYCODE_BACK</code></pre>
<ul>
<li>Enter text into a open text box</li>
</ul>
<pre><code>adb shell input text &lt;text goes here&gt;</code></pre>
<ul>
<li>Reboot into the recovery mode</li>
</ul>
<pre><code>adb shell reboot recovery</code></pre>
<ul>
<li>See system info</li>
</ul>
<pre><code>adb shell getprop</code></pre>
<ul>
<li>Extract all apk files:</li>
</ul>
<pre><code>for i in $(adb shell pm list packages | awk -F&#39;:&#39; &#39;{print $2}&#39;); do adb pull &quot;$(adb shell pm path $i | awk -F&#39;:&#39; &#39;{print $2}&#39;)&quot;; mv base.apk $i.apk 2&amp;&gt; /dev/null ;done</code></pre>
<ul>
<li><p>Onyx uninstalled apps: com.onyx.mail com.onyx.appmarket com.onyx.latinime com.onyx.android.onyxotaservice com.onyx.android.production.test com.onyx.pinyinime com.onyx.floatingbutton com.android.browser com.android.email com.android.providers.calendar com.android.calendar com.google.android.syncadapters.calendar com.quicinc.cne.CNEService</p></li>
<li>Onyx installed apks:</li>
</ul>
<pre><code>gboard
fluid navigation bar
fx file browser</code></pre>
<h1 id="matplotlib-help">matplotlib help</h1>
<ul>
<li>Import using</li>
</ul>
<pre><code>import matplotlib.pyplot as plt</code></pre>
<ul>
<li>Equal axis</li>
</ul>
<pre><code>plt.axis(&#39;scaled&#39;)</code></pre>
<ul>
<li>Axis limit</li>
</ul>
<pre><code>plt.xlim(-2e-3, 2e-3)</code></pre>
<ul>
<li>Save to file</li>
</ul>
<pre><code>t = 5;
ind = (&#39;%05d&#39; % t)
output_filename = &#39;data/&#39;+ind+&#39;.png&#39;

plt.savefig(output_filename, dpi=150)</code></pre>
<ul>
<li>To open the plot in the background (and not show), add the following (in addition to <code>import matplotlib.pyplot as plt</code>)</li>
</ul>
<pre><code>import matplotlib
matplotlib.use(&#39;Agg&#39;)</code></pre>
<h1 id="openmp-help">Openmp help</h1>
<h2 id="requirements">Requirements</h2>
<ul>
<li>Add <code>#include&lt;mpi.h&gt;</code></li>
<li>Compile with <code>-fopenmp</code></li>
<li>Compute the time taken by the executable by running it with <code>time -p</code> prefix in shell</li>
</ul>
<h2 id="information">Information</h2>
<p><a href="https://bisqwit.iki.fi/story/howto/openmp/">Guide</a> <a href="https://www.linuxtoday.com/blog/mpi-in-thirty-minutes.html">Thirty minute guide</a></p>
<pre><code>omp_get_num_threads()
omp_get_max_threads()
omp_get_thread_num()
omp_get_num_procs()</code></pre>
<ul>
<li>Check if you are using the right number of processors:</li>
</ul>
<pre><code>grep &#39;processor.*:&#39; /proc/cpuinfo | wc -l</code></pre>
<ul>
<li><p>The number of threads are optimized (usually) when it is the number of processors. With 2 cpus and 2 threads per cpu, the optimum value is 4, the total number of (virtual) cpus.</p></li>
<li>Set environment variables different from the default value for maximum possible threads using</li>
</ul>
<pre><code>export OMP_NUM_THREADS=4</code></pre>
<p>This will be reflected in <code>omp_get_max_threads()</code>.</p>
<p>This can also be set within the code with</p>
<pre><code>#pragma omp parallel num_threads(4)</code></pre>
<ul>
<li><p>Setting the value outside the code is recommended for flexibility and transparency.</p></li>
<li><p>Setting <code>num_threads()</code> is usually unnecessary as the default value (=#cpus) is usually the best.</p></li>
<li><p>Setting <code>num_threads()</code> manually to a fixed number is <em>not</em> flexible. If necessary, can be expressed in terms of <code>omp_get_max_threads()</code>.</p></li>
</ul>
<h3 id="repetition-of-a-block-of-code">Repetition of a block of code</h3>
<pre><code>#pragma omp parallel
{
    code_1();
}</code></pre>
<p>Here, <code>code_1()</code> will be executed <code>omp_get_max_threads()</code> number of times.</p>
<ul>
<li>You can specify how to many threads will be used for that particular parallelism by</li>
</ul>
<pre><code>#pragma omp parallel num_threads(7)</code></pre>
<ul>
<li>If you want a part of the code block to execute only once, use <code>single</code></li>
</ul>
<pre><code>#pragma omp parallel
{
    // this will run multiple times
    code_1();

    // this will run only once
    code_2();
}</code></pre>
<h3 id="for-loop">For loop:</h3>
<ul>
<li>The long-hand version is</li>
</ul>
<pre><code>#pragma omp parallal
{
    #pragma omp for
    for(int n=0; n&lt;10; ++n){
        print(&quot; %d&quot;, n);
}
}</code></pre>
<p>This first creates <code>omp_get_num_threads()</code> number of threads. Then, the statement <code>#pragma omp for</code> picks a value of <code>n</code> and <em>assigns</em> the associated <code>printf</code> task to one of threads. Not that this is <strong>not</strong> a nested multithreading. The outer <code>pragma</code> creates a parallel space and the next <code>pragma</code> assigns tasks to each of the threads.</p>
<ul>
<li>This is same as writing simply the following shortcut:</li>
</ul>
<pre><code>#pragma omp parallel for
for(int n=0; n&lt;10; ++n){
    printf(&quot; %d&quot;, n);
}</code></pre>
<p>Note that there is no order in which the code inside the omp directive runs.</p>
<ul>
<li>The <code>ordered</code> part of the code is executed in the same order of the <code>for</code> loop: (note the two occurrences of <code>#pragma</code> to specify which part of the code is ordered):</li>
</ul>
<pre><code>#pragma omp parallel for ordered schedule(dynamic)
for(int n=0; n&lt;10; ++n){
    // do other unordered things
    code_1();

    // now the ordered part
    #pragma omp ordered
    code_2();
}</code></pre>
<p>Here, <code>code_1()</code> will be executed in an arbitrary order, but will stop and wait if the <em>previous</em> chunks of <code>code_2()</code> are unfinished.</p>
<ul>
<li>If the for loop is a sum type, we can do</li>
</ul>
<pre><code>int sum=0;
#pragma omp parallel for reduction(+:sum)
for(int n=0; n&lt;1000; ++n) {
    sum += table[n];
}</code></pre>
<p>This avoids the sharing of the variable <code>sum</code> by multiple threads. Instead, different threads place their partial sums while running and in the end communicates and adds those partial sums up.</p>
<ul>
<li>Running parts of the code in parallel</li>
</ul>
<pre><code> #pragma omp sections
 {
   { Work1(); }
   #pragma omp section
   { Work2();
     Work3(); }
   #pragma omp section
   { Work4(); }
 }</code></pre>
<p>This code indicates that any of the tasks Work1, (Work2 + Work3), and Work4 should run in parallel, but that Work2 and Work3 must be run in sequence. Each work is done exactly once, <em>as opposed to</em> the following</p>
<pre><code> #pragma omp parallel
 {
    Work();
 }</code></pre>
<p>which runs <code>Work()</code> multiple times.</p>
<ul>
<li><code>critical</code> sections prevent multiple threads from accessing the critical section’s code at the same time, thus only one active thread can update the data referenced by the code.</li>
</ul>
<pre><code>#pragma omp parallel 
{
    code_1();

    #pragma omp critical
    code_2();
}</code></pre>
<p>Compare this with <code>ordered</code>:</p>
<pre><code>#pragma omp parallel for ordered schedule(dynamic)
for(int i =0; i&lt;10; ++i)
{
    // runs in arbitrary order 
    code_1();

    // runs in arbitrary order, but _NOT_ concurrently by various threads
    // i.e. waits until another random thread is finished running
    #pragma omp critical
    code_2();

    // runs in the same order as the for loop
    #pragma omp ordered
    code_3();
}</code></pre>
<h3 id="nested-for-loop">Nested for loop</h3>
<p><a href="http://ppc.cs.aalto.fi/ch3/nested/">source</a>. Parallelizing of nested for loops is generally discouraged. The only case when it is advised is when the outer loop has too few elements compared to the number of threads available.</p>
<ul>
<li>Defining parallel twice does nothing, and increase the runtime due to overhead:</li>
</ul>
<pre><code>// bad code example
#pragma omp parallel for
for (int i = 0; i &lt; 3; ++i) {
    #pragma omp parallel for
    for (int j = 0; j &lt; 6; ++j) {
        c(i, j);
    }
}</code></pre>
<p>This code does not do anything meaningful. “Nested parallelism” is disabled in OpenMP by default, and the second pragma is ignored at runtime: a thread enters the inner parallel region, a team of only one thread is created, and each inner loop is processed by a team of one thread. The end result will look, in essence, identical to what we would get without the second pragma — but there is just more overhead in the inner loop:</p>
<ul>
<li>For perfectly nested (one <code>for</code> after another) <strong>rectangular</strong> loops (i.e., the second index does not depend on the first index), we can use <code>collapse(level)</code>:</li>
</ul>
<pre><code> #pragma omp parallel for collapse(2)
 for(int y=0; y&lt;25; ++y)
   for(int x=0; x&lt;80; ++x)
   {
     tick(x,y);
   }</code></pre>
<p>Here, <code>2</code> represents the level of nesting.</p>
<p>In this case, two loops are converted into a single one and total iterations are distributed among the threads, <em>as if</em> the code reads</p>
<pre><code> #pragma omp parallel for
 for(int z=0; z&lt;25*80; ++z)
     tick(z/80, z%80);</code></pre>
<ul>
<li>Force enable nested parallelism using <code>num_threads(level);</code> in the beginning where <code>level</code> is the nested levels you want to enable parallelism in.</li>
</ul>
<pre><code>omp_set_nested(1);
#pragma omp parallel for num_threads(2)
    for(int n=0; n&lt;size; ++n){
    //std::cout &lt;&lt; &quot;Current thread level: &quot; &lt;&lt; omp_get_level() &lt;&lt; std::endl;
    //std::cout &lt;&lt; &quot;Started &quot; &lt;&lt; omp_get_num_threads() &lt;&lt; std::endl;
    sinTable[n] = n * n + 5;

#pragma omp parallel for num_threads(2)
    for (unsigned i = 0; i &lt; 200; i++) {
        //std::cout &lt;&lt; &quot;Current thread level: &quot; &lt;&lt; omp_get_level() &lt;&lt; std::endl;
        //std::cout &lt;&lt; &quot;Started &quot; &lt;&lt; omp_get_num_threads() &lt;&lt; std::endl;
        sinTable[i + n] = 5 * i * n;
    }
}</code></pre>
<ul>
<li>Check the current nested thread level using <code>omp_get_level()</code>.</li>
<li><p>Specify <code>num_threads()</code> so that more than available threads do not pop up, since the default number of level-1 nested parallelism produces <code>omp_get_num_threads()</code>^2 threads, which are much bigger than available threads, leading to showdown.</p></li>
<li><p>Did not find any advantage in enabling nested parallelism (even after setting the <code>num_threads()</code> to be <code>sqrt(omp_get_num_threads())</code> to avoid going over total available threads) since the overheads for the inner loop adds to a delay.</p></li>
</ul>
<h3 id="static-vs-dynamic-schedule-for-for-loop">Static vs dynamic schedule for <code>for</code> loop</h3>
<p><a href="http://jakascorner.com/blog/2016/06/omp-for-scheduling.html">explanation</a></p>
<ul>
<li><code>schedule(static)</code> divides the work between thread at <em>compile-time</em>, so it is pre-determined which thread will get which iterations of the <code>for</code> loop</li>
<li><p><code>schedule(dynamic)</code> divides the work between thread at <em>runtime</em>, so assignment of iterations to threads is random at runtime</p></li>
<li>The static scheduling type is appropriate when all iterations have the same computational cost.</li>
<li><p><code>schedule(dynamic)</code> is more appropriate when the loop iterations are expected to take variable amount of time. The expectation is that runtime of all threads will average out and will result in smaller total runtime, whereas in the <code>static</code> case, some threads might finish their work and wait around for other threads.</p></li>
<li><p>Increasing the chunk size makes the scheduling more static, and decreasing it makes it more dynamic. <a href="http://www.inf.ufsc.br/~bosco.sobral/ensino/ine5645/OpenMP_Dynamic_Scheduling.pdf">source</a></p></li>
<li><p><code>schedule(static)</code> is faster compared to <code>dynamic</code> for equal-length jobs due to less overhead when the computation costs are equally distributed.</p></li>
<li><p>OpenMP guarantees that if you have two separate loops with the same number of iterations and execute them with the same number of threads using static scheduling, then each thread will receive exactly the same iteration range(s) in both parallel regions.</p></li>
<li><p><code>guided</code> schedule reduces the chunk length over time, providing a balance between the two. You can set the minimum chunk length possible.</p></li>
</ul>
<h1 id="python-numpy-array">Python Numpy array</h1>
<ul>
<li><p>Convert numpy array to python list using <code>.tolist()</code></p></li>
<li>Creating zero arrays (or <code>ones</code>) need to be specified with double parenthesis</li>
</ul>
<pre><code>a = np.zeros((5,7))</code></pre>
<ul>
<li>Convert column matrix to array</li>
</ul>
<pre><code>M  = np.squeeze(np.asarray(M))</code></pre>
<ul>
<li>Matrix-matrix multiplication of numpy arrays are done using <code>@</code> operator or using <code>a.dot(b)</code></li>
</ul>
<pre><code>a = np.array([ [1, 3], [4, 5] ])
b = np.array([ [2],[5])
c = a @ b # output: [ [17], [33] ]</code></pre>
<ul>
<li>Converting a 2d matrix to a 1d vector
<ul>
<li>Use <code>np.concatenate()</code>:</li>
</ul>
<pre><code>A = [ [1,2], [2,3], [3,4]]
B = np.concatenate(A)
# B = [1,2,2,3,3,4]</code></pre></li>
<li>Matrix-vector row-wise multiplication is not automatic. We need to convert the rank-1 array (size <code>(3,)</code>) into a rank-2 array (size <code>(3,1)</code>) using <code>[:,None]</code> like this:</li>
</ul>
<pre><code>A = np.array([
    [1,2,3], 
    [4,5,6], 
    [7,8,9]
    ]) 

v = np.array([0, 1, 2])

row_A_v = A * v[:, None]</code></pre>
<p>Note that <code>v</code> is of size <code>(3,)</code> whereas <code>v[:, None]</code> is of size <code>(3,1)</code>.</p>
<ul>
<li>Convert asymmetric list to a numpy array (matrix) by padding zero</li>
</ul>
<pre><code>b = np.zeros([len(a),len(max(a,key = lambda x: len(x)))])
for i,j in enumerate(a):
    b[i][0:len(j)] = j</code></pre>
<ul>
<li><p>max-min: use <code>np.amax()</code> with <code>axis=</code> 0 or 1 or <em>without</em> for the flattened array</p></li>
<li><p>Find where an element <code>i</code> appears: use <code>np.where(Array == i)</code>, which is a 2d object. Use index <code>[0]</code> to get the rows, and <code>[1]</code> to get the columns. Caution: the output is a numpy array (<code>array([3, 2, 5])</code> etc). Covert it to usual python list (i.e. <code>[3, 2, 5]</code>)using <code>.tolist()</code></p></li>
<li>Appending (concatenation):
<ul>
<li>Numpy array: <code>original_array = np.append(original_array, appendage, axis = 0)</code> appends <code>appendage</code> as a set of rows (<code>axis = 0</code>) at the end of original_array. <strong>Caution:</strong> This is <em>not</em> in-place, so we need to over write the <code>original_array</code>.</li>
<li>Python list: <code>list_1.append(row)</code> is an in-place operation.</li>
<li><p>We can append as columns or rows using <code>np.c_[]</code> or <code>np.r_[]</code>, e.g.</p>
<pre><code>np.c_[
    np.linspace(-1., 1., 1000),
    np.random.uniform(-0.5, 0.5, 1000)
    ]</code></pre>
<p>creates a (1000,2) matrix.</p></li>
</ul></li>
<li>Copying a variable into another creates only a memory reference</li>
</ul>
<pre><code>u = [ 3, 4, 5]
v = u
v[0] = 0
print(u[0]) # Output: 0 !!!</code></pre>
<p>Same goes for classes</p>
<pre><code>Class Cl(object):
    __init__(self, a):
        self.a = a

## Later
cl_list = []
cl_list.append(Cl(5))
cl_list.append(Cl(5))

cl_list[0].a = 7
print(cl_list[1].a) # output: 7 !!!</code></pre>
<p>The solution is to use <code>deepcopy()</code></p>
<ul>
<li>Deleting array elements is <em>not</em> in-place. This is to avoid resizing the array while deleting. A good idea is to delete multiple items at once and copy it to a new array.</li>
</ul>
<pre><code>index = [2, 3, 6]
new_a = np.delete(a, index)</code></pre>
<ul>
<li>Joining sublists into a single list using double list comprehension <code>[j for i in Array for j in i]</code>:</li>
</ul>
<pre><code>arr = [[[1, 2], [2, 3]], [[6, 7], [6, 9]]]

&gt;&gt; [j for i in arr for j in i]

[[1, 2], [2, 3], [6, 7], [6, 9]]
</code></pre>
<h1 id="python-inline-if-then-else">Python inline if then else</h1>
<ul>
<li>use <code>(if a then b else c)</code></li>
</ul>
<pre><code>[((n-1) if n&gt;0 else 0) for n in array]</code></pre>
<h1 id="python-class">Python class</h1>
<ul>
<li>See the list of attributes of a class using <code>.__dict__.keys()</code></li>
</ul>
<h1 id="python-plotting">Python plotting</h1>
<h2 id="d-scatter-plot">3d scatter plot</h2>
<ul>
<li>Note that we use <code>ax.scatter</code> instead of <code>plt.scatter</code> (for 2d plots with <code>import matplotlib.pyplot as plt</code>)</li>
</ul>
<pre><code>from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure()
ax = Axes3D(fig)
ax.scatter(X, Y, Z, s = 10,  linewidth = 1 )
ax.text(X, Y, Z, str(99))</code></pre>
<ul>
<li><strong>Aspect ratio:</strong> the 3d plot messes up the aspect ratio. We <em>cannot</em> set the aspect ratio to be equal using <code>ax.set_aspect('equal')</code> (even though we should). This feature is not implemented yet (what??!!) as so we add the following snippet to make it happen:</li>
</ul>
<pre><code>extents = np.array([getattr(ax, &#39;get_{}lim&#39;.format(dim))() for dim in &#39;xyz&#39;])
sz = extents[:,1] - extents[:,0]
centers = np.mean(extents, axis=1)
maxsize = max(abs(sz))
r = maxsize/2
for ctr, dim in zip(centers, &#39;xyz&#39;):
    getattr(ax, &#39;set_{}lim&#39;.format(dim))(ctr - r, ctr + r)

ax.set_box_aspect((1, 1, 1))</code></pre>
<p>Alternatively, set x, y, and z ranges manually so that the length of the ranges are the same and do <code>ax.set_box_aspect((1, 1, 1))</code>:</p>
<pre><code> XYZlim = [-3e-3, 3e-3]
 ax.set_xlim3d(XYZlim+1e-3)
 ax.set_ylim3d(XYZlim - 0.2e-3)
 ax.set_zlim3d(XYZlim + 3e-3)
 ax.set_aspect(&#39;equal&#39;)
ax.set_box_aspect((1, 1, 1))</code></pre>
<p><a href="https://stackoverflow.com/questions/8130823/set-matplotlib-3d-plot-aspect-ratio/19933125">Source</a> This snippet applies to <code>ax</code>, so we can convert it into a function <code>def fix_aspect(ax):</code> and call it.</p>
<ul>
<li>In 2D, the aspect ration can be set using</li>
</ul>
<pre><code>plt.axis(&#39;scaled&#39;)</code></pre>
<p>and specify the axes limits using</p>
<pre><code>plt.xlim(a, b)
plt.ylim(c, d)</code></pre>
<p><strong>Caution:</strong> <code>plt.axis('scaled')</code> goes <em>before</em> setting <code>plt.xlim()</code> and <code>plt.ylim()</code> for the boundaries to remain faithful.</p>
<h2 id="plotting-a-bunch-of-lines">Plotting a bunch of lines</h2>
<p>Plotting each line using a <code>for</code> loop is too slow. Use <code>LineCollection</code> and <code>Line3DCollection</code> instead. The format of the data has to be in the following format:</p>
<pre><code>[
 [ [start_x_1, start_y_1, start_z_1], [end_x_1, end_y_1, end_z_1] ], 
 [ [start_x_2, start_y_2, start_z_2], [end_x_2, end_y_2, end_z_2] ], 
 [ [start_x_3, start_y_3, start_z_3], [end_x_3, end_y_3, end_z_3] ], 
...
 [ [start_x_N, start_y_N, start_z_N], [end_x_N, end_y_N, end_z_N] ]
]</code></pre>
<p>where there are <code>N</code> lines that start with <code>start</code> and ends at <code>end</code>. Note that The array has rank 3.</p>
<p>Example of such construction: Given two <code>(N,3)</code> arrays <code>P_start</code> and <code>P_end</code>, to draw <code>N</code> lines between <code>P_start[i]</code> and <code>P_end[i]</code> in 3D, construct</p>
<pre><code>ls = [ [p_start, p_end] for p_start, p_end in zip(P_start, P_end) ]</code></pre>
<ul>
<li>Plot using</li>
</ul>
<pre><code>import matplotlib.pyplot as plt
from matplotlib.collections import Line3DCollection

lc = LineCollection3D(ls, linewidths=0.5, colors=&#39;b&#39;)

ax = plt.gca()
ax.add_collection(lc)

plt.show()</code></pre>
<p>** Caution: ** For 2D plotting with <code>LineCollection</code>, you <strong>must</strong> add a scaling command like</p>
<pre><code>ax.autoscale()</code></pre>
<p>for the plots to show. Otherwise, no line will be printed. (weird bug?)</p>
<p><strong>Note:</strong> that the collection added to <code>ax</code> (and not to <code>plt</code>).</p>
<h1 id="python-import-module">Python import module</h1>
<ul>
<li>See the current directory from where the script runs</li>
</ul>
<pre><code>import sys
print(sys.path[0])</code></pre>
<ul>
<li>Add a path from where to import <code>.py</code> files later</li>
</ul>
<pre><code>sys.path.append(full_dir_path)</code></pre>
<ul>
<li>Go back one directory from the current path</li>
</ul>
<pre><code>prev_dir = os.path.dirname(sys.path[0])</code></pre>
<ul>
<li>To add a path that is in a subdirectory <code>bar</code> within a directory that in one level up:</li>
</ul>
<pre><code>import sys, os
# previous directory of the current script
prev_dir = os.path.dirname(sys.path[0])
# print(prev_dir)
sys.path.append(prev_dir)
# sys.path.append(os.path.join(prev_dir,&#39;bar&#39;))</code></pre>
<h1 id="python-parallel-processing-with-multiprocessing">Python parallel processing with multiprocessing:</h1>
<p>Say we have a function called <code>write_img(t)</code> that takes integer values. The for loop</p>
<pre><code>for t in range(starting, ending):
    write_img(t)</code></pre>
<p>can be replaced by</p>
<pre><code>from multiprocessing import Pool
a_pool = Pool()
a_pool.map(write_img, range(staring, ending))</code></pre>
<ul>
<li>If the argument of the function is not a number, we can feed an iterator (array, tuple, list, etc) of the input parameters</li>
</ul>
<pre><code>def myfunc(obj):
    x = obj.x
    y = obj.y
    # some stuff with x and y
    return obj2

from multiprocessing import Pool
input_list = []
for i in range(10):
    obj_i = # some code here ...
    input_list.append(obj_i)

a_pool = Pool()
output_obj2_list = a_pool.map(myfunc, input_list)</code></pre>
<ul>
<li>If the function takes more than one input, we can use <code>zip()</code> to combine input variables or create a partial function to convert it into a one-input function on the fly using <code>partial</code> from <code>functools</code> (which is included in the default python installation)</li>
</ul>
<pre><code>def fun2(x, y):
    return z = x * y

from functools import partial
fun1 = fun2(x, 5)

from multiprocessing import Pool
a_pool = Pool()
output_list = a_pool.map(fun1, range(10))</code></pre>
<ul>
<li>If you get the error</li>
</ul>
<pre><code>AttributeError: &#39;NoneType&#39; object has no attribute &#39;pack&#39;</code></pre>
<p>then use</p>
<pre><code>pool.close()</code></pre>
<p>after the multiprocessing is over to delete the pool.</p>
<ul>
<li>Use <code>pathos.multiprocessing</code> (<code>pip3 install pathos</code>) instead of usual multiprocessing to use parallel processing on partial functions (to use on functions with multiple inputs)</li>
</ul>
<pre><code>from pathos.multiprocessing import ProcessingPool as Pool</code></pre>
<h1 id="hdf5-dataset">HDF5 dataset</h1>
<ul>
<li><code>rank</code> is the number of dimension of a data array</li>
<li>Read any <code>.h5</code> file using <code>h5dump</code> (part of <code>hdf5-tools</code> package on Ubuntu). e.g.</li>
</ul>
<pre><code>h5dump filename.h5</code></pre>
<ul>
<li>To see the headers <code>-H</code>:</li>
</ul>
<pre><code>h5dump -H filename.h5</code></pre>
<ul>
<li>To see all the header of the group <code>mygroup</code> with <code>-g</code></li>
</ul>
<pre><code>h5dump -g &#39;mygroup&#39; -H filename.h5</code></pre>
<ul>
<li>To print the dataset <code>mygroup/mydata</code> with <code>-d</code></li>
</ul>
<pre><code>h5dump -d &#39;mygroup/mydata&#39; filename.h5</code></pre>
<h3 id="hdf5-dataset-in-c">HDF5 dataset in C++</h3>
<ul>
<li>In <code>C++</code> on Ubuntu, install</li>
</ul>
<pre><code>sudo apt-get install libhdf5-serial-dev hdf5-tools</code></pre>
<ul>
<li>To compile files with <code>#include&lt;H5Cpp.h&gt;</code>, compile with <em>both</em> <code>-lhdf5_cpp</code> and <code>-lhdf5_serial</code> parameters and supply the location of the header file (<code>locate H5Cpp.h</code>) with <code>-I</code>. e.g. in <code>makefile</code>, add</li>
</ul>
<pre><code>CPPFLAGS += -I /usr/include/hdf5/serial/ -lhdf5_serial -lhdf5_cpp</code></pre>
<h3 id="hdf5-dataset-in-matlab">HDF5 dataset in Matlab</h3>
<ul>
<li><p>In Matlab, the pathname for a dataset within a file <em>has</em> to start with <code>/</code>, but not in C++.</p></li>
<li>Create group within a file before adding a dataset within the group.</li>
</ul>
<pre><code>H5::H5File fp(&quot;output/filename.h5&quot;, H5F_ACC_TRUNC);
fp.createGroup(&quot;/FirstLevel&quot;);
// now you can add datasets like &quot;/Firstlevel/D1&quot; etc</code></pre>
<h3 id="hdf5-dataset-in-python">HDF5 dataset in python</h3>
<ul>
<li>Install the package <code>h5py</code></li>
<li><p><strong>Caution:</strong> Always convert the dataset to <code>np.array()</code> before reading from or writing to a <code>h5py</code> file.</p></li>
<li>Example reading:</li>
</ul>
<pre><code>import h5py
f = h5py.file(filename, &quot;r&quot;)

PosArr = []
for name in f:
    pos = np.array(f[&#39;P00001/Pos&#39;])
    PosArr.append(pos)</code></pre>
<h1 id="rsync">Rsync</h1>
<ul>
<li>Sync two directories</li>
</ul>
<pre><code>rsync -rv  &lt;user&gt;@&lt;server&gt;:~/graph-cpp/output/img/ img_graph/</code></pre>
<h1 id="cuda-nvidia-with-c">CUDA NVIDIA with C++</h1>
<h2 id="installation-5">Installation</h2>
<ul>
<li><p>If using properietary GPU driver from Nvidia (like nvidia-driver-495), installing nvidia-cuda-toolkit changes it to ‘Using a manully installed driver’.</p></li>
<li><p>Install <code>CUDA Toolkit</code>: Follow instruction on <a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1804&amp;target_type=deblocal">sit</a> to download the <code>.deb</code> and install for ubuntu version.</p></li>
</ul>
<p>Using <code>apt-get</code> (about 2GB of installation)</p>
<pre><code>sudo apt-get install nvidia-cuda-toolkit</code></pre>
<p>gives the error on compilation with nvcc: <code>error: attribute "__malloc__" does not take arguments</code>.</p>
<ul>
<li>Check your gpu info with</li>
</ul>
<pre><code>nvidia-smi</code></pre>
<p>You can find your CUDA version here.</p>
<ul>
<li>Find the number of cuda cores in your graphics card</li>
</ul>
<pre><code>nvidia-settings -q CUDACores -t</code></pre>
<h2 id="jargon">Jargon</h2>
<ul>
<li>Device memory = GPU memory</li>
<li>Host memory = CPU memory</li>
<li>SM = streaming multiprocessor</li>
</ul>
<h2 id="running-c-codes">Running C++ codes</h2>
<p><a href="https://developer.nvidia.com/blog/even-easier-introduction-cuda/">quick tutorial</a> - Save the code with <code>.cu</code> extension - Compile with <code>nvcc</code> or with path <code>/usr/local/cuda-11.6/bin/nvcc</code> - Run the executable with regular <code>./</code></p>
<h1 id="cuda-nvidia-with-python">CUDA NVIDIA with python</h1>
<h2 id="installation-on-xubuntu-22.04">Installation on Xubuntu-22.04</h2>
<h3 id="install-liveusb-with">Install liveUSB with</h3>
<ol type="1">
<li>wifi on</li>
<li>check <code>updating packaging while installing</code></li>
<li>check <code>install proprietary drivers</code></li>
</ol>
<h3 id="if-additional-drivers-is-disabled">If <code>Additional Drivers</code> is disabled</h3>
<pre><code>sudo apt install nvidia-384</code></pre>
<p>This will enable the drivers listed in the page.</p>
<h3 id="in-additional-drivers">In <code>Additional Drivers</code>:</h3>
<ol type="1">
<li>Use <code>nvidia-510</code> (proprietary, tested)</li>
<li>Restart</li>
</ol>
<h3 id="install-cuda-from-website">Install cuda from website</h3>
<ol type="1">
<li>Run scripts in sequence from <a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64">site</a></li>
</ol>
<p>For cuda 11.7, the scripts are</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb404-1" title="1"><span class="fu">wget</span> https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-ubuntu2204.pin</a>
<a class="sourceLine" id="cb404-2" title="2"><span class="fu">sudo</span> mv cuda-ubuntu2204.pin /etc/apt/preferences.d/cuda-repository-pin-600</a>
<a class="sourceLine" id="cb404-3" title="3"><span class="fu">wget</span> https://developer.download.nvidia.com/compute/cuda/11.7.0/local_installers/cuda-repo-ubuntu2204-11-7-local_11.7.0-515.43.04-1_amd64.deb</a>
<a class="sourceLine" id="cb404-4" title="4"><span class="fu">sudo</span> dpkg -i cuda-repo-ubuntu2204-11-7-local_11.7.0-515.43.04-1_amd64.deb</a>
<a class="sourceLine" id="cb404-5" title="5"><span class="fu">sudo</span> cp /var/cuda-repo-ubuntu2204-11-7-local/cuda-*-keyring.gpg /usr/share/keyrings/</a>
<a class="sourceLine" id="cb404-6" title="6"><span class="fu">sudo</span> apt-get update</a>
<a class="sourceLine" id="cb404-7" title="7"><span class="fu">sudo</span> apt-get -y install cuda</a></code></pre></div>
<ol type="1">
<li>Restart</li>
</ol>
<h3 id="nvcc"><code>nvcc</code></h3>
<p>Even after installing commands like <code>nvcc --version</code> won’t be available. You would need to add the cuda installation path to your <code>.bashrc</code>. For cuda version 11.7, we need to add to <code>.bashrc</code>:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb405-1" title="1"><span class="bu">export</span> <span class="va">PATH=</span><span class="st">&quot;/usr/local/cuda-11.7/bin:</span><span class="va">$PATH</span><span class="st">&quot;</span></a></code></pre></div>
<p>For using nvcc in compiling C++ code,</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb406-1" title="1"><span class="bu">export</span> <span class="va">LD_LIBRARY_PATH=</span><span class="st">&quot;/usr/local/cuda-8.0/lib64:</span><span class="va">$LD_LIBRARY_PATH</span><span class="st">&quot;</span></a></code></pre></div>
<ol type="1">
<li>Source <code>.bashrc</code></li>
</ol>
<h3 id="installing-pytorch">Installing pytorch</h3>
<ol type="1">
<li>uninstall older torch: <code>pip3 uninstall torch</code></li>
<li>Use script generated from <a href="https://pytorch.org/get-started/locally/">pytorch website</a> by selecting the platform, cuda version etc.</li>
</ol>
<p>For cuda 11.7 version (which is required for 3070 and 3080 graphic cards), pytorch 11.6 works as well.</p>
<pre><code>pip3 install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/cu116</code></pre>
<ol start="3" type="1">
<li>Test pytorch works with cuda by running</li>
</ol>
<div class="sourceCode" id="cb408"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb408-1" title="1"><span class="im">import</span> torch</a>
<a class="sourceLine" id="cb408-2" title="2"><span class="bu">print</span>(<span class="st">&#39;cuda available in torch:&#39;</span>, torch.cuda.is_available())</a></code></pre></div>
<h2 id="showing-stats">Showing stats</h2>
<ul>
<li>Check your gpu info with</li>
</ul>
<pre><code>nvidia-smi</code></pre>
<p>You can find your CUDA version here.</p>
<ul>
<li>Find the number of cuda cores in your graphics card</li>
</ul>
<pre><code>nvidia-settings -q CUDACores -t</code></pre>
<h2 id="cupy-as-an-alternative-to-numpy">cupy as an alternative to numpy</h2>
<ul>
<li>Install <code>cupy</code> (for CUDA version <code>11.1</code>, check <a href="https://cupy.dev/">website</a> for other versions)</li>
</ul>
<pre><code>pip3 install cupy-cuda111</code></pre>
<ul>
<li>Sample <code>cupy</code> code</li>
</ul>
<pre><code>import numpy as np
import cupy as cp
import time 

# define a name for memory  pool to extract information later
mempool = cp.get_default_memory_pool()

x_gpu = cp.random.randint(0, 256, (10980, 10980)).astype(cp.uint8)

# get memory info, cross check with `nvidia-smi` in bash
print(&#39;size of x_gpu&#39;, x_gpu.nbytes)                          
print(&#39;used&#39;, mempool.used_bytes())             
print(&#39;total mempool&#39;, mempool.total_bytes())           

## numpy counterpart
x_cpu = cp.random.randint(0, 256, (10980, 10980)).astype(cp.uint8)

## perform an operation
s = time.time()
x_cpu *= 5
e = time.time()
print(&#39;numpy&#39;, e - s)

### CuPy and GPU
s = time.time()
x_gpu *= 5
# wait for gpu to finish before going to the next line
cp.cuda.Stream.null.synchronize()
e = time.time()
print(&#39;cupy&#39;, e - s)</code></pre>
<ul>
<li><strong>Note:</strong> <code>cupy</code> arrays cannot exceed the memory of the GPU. However, GPUs have more than one <code>devices</code> with equal memories (see with <code>nvidia-smi</code>). Make sure to use them both to take advantage of all the memory.</li>
</ul>
<p>The default device is <code>0</code>. Change the device to <code>1</code> with</p>
<pre><code>cp.cuda.Device(1).</code></pre>
<p>and all the arrays defined henceforth will be stored in the device <code>1</code>. The arrays in other device stays.</p>
<ul>
<li><p>Clear an array from memory with <code>del x</code> or <code>x = None</code>. After this, we can reassign the array <code>x</code>. However, this does not get reflected in <code>nvidia-smi</code> since the allocated memory is not freed immediately. To manually clear <em>unused</em> memory, do <code>mempool.free_all_blocks()</code>, which id observed in <code>nvidia-smi</code>.</p></li>
<li><p>Install <code>nvidia-profiler</code> to use <code>nvprof</code> with code</p></li>
</ul>
<h2 id="numba">numba</h2>
<ul>
<li>install with</li>
</ul>
<pre><code>pip3 install numba</code></pre>
<ul>
<li>Try the code the runs in serial</li>
</ul>
<pre><code>import numpy as np
from timeit import default_timer as timer

def pow(a, b, c):
    for i in range(a.size):
         c[i] = a[i] ** b[i]

def main():
    vec_size = 100000000

    a = b = np.array(np.random.sample(vec_size), dtype=np.float32)
    c = np.zeros(vec_size, dtype=np.float32)

    start = timer()
    pow(a, b, c)
    duration = timer() - start

    print(duration)

if __name__ == &#39;__main__&#39;:
    main()</code></pre>
<ul>
<li>Now, with <code>numba</code></li>
</ul>
<pre><code>import numpy as np
from timeit import default_timer as timer
from numba import vectorize

@vectorize([&#39;float32(float32, float32)&#39;], target=&#39;cuda&#39;)
def pow(a, b):
    return a ** b

def main():
    vec_size = 100000000

    a = b = np.array(np.random.sample(vec_size), dtype=np.float32)
    c = np.zeros(vec_size, dtype=np.float32)

    start = timer()
    c = pow(a, b)
    duration = timer() - start

    print(duration)

if __name__ == &#39;__main__&#39;:
    main()</code></pre>
<h2 id="openmp-in-c">OPENMP in C++</h2>
<p><a href="https://ukopenmpusers.co.uk/wp-content/uploads/uk-openmp-users-2018-OpenMP45Tutorial_new.pdf">slides</a> * Get the number of devices in the host using <code>omp_get_num_devices()</code> function. Use <code>#pragma omp target</code> to run code on target devices.</p>
<h1 id="python-vispy">Python vispy</h1>
<p>[Basic tutorial] (https://github.com/ipython-books/cookbook-code/blob/master/featured/06_vispy.ipynb)</p>
<p>[A github collection of tutorials] (https://github.com/liubenyuan/vispy-tutorial)</p>
<ul>
<li>Install <code>vispy</code></li>
</ul>
<pre><code>pip3 install vispy</code></pre>
<ul>
<li>Install a backend:</li>
</ul>
<pre><code>pip3 install pyqt5</code></pre>
<p>or</p>
<pre><code>pip3 install pyglet</code></pre>
<p>For jupyter notebook use <code>ipynb_webgl</code>. Note: for whatever reason, backend <code>egl</code> hangs the system and produces nothing.</p>
<ul>
<li>See the available backend using</li>
</ul>
<pre><code>import vispy
print(vispy.sys_info())</code></pre>
<ul>
<li>Plot a test plot</li>
</ul>
<pre><code>import numpy as np
import vispy.app
# vispy.app.use_app(&#39;ipynb_webgl&#39;)
# vispy.app.use_app(&#39;pyglet&#39;)
vispy.app.use_app(&#39;pyqt5&#39;)
from vispy import plot as vp
fig = vp.Fig(show=False)
fig1 = fig[0, 0]
fig1.plot(np.random.uniform(-0.5, 0.5, 1000) ,marker_size=0)
# fig1.plot(range(10000),marker_size=0)
fig.show(run=True)</code></pre>
<h1 id="midi-keyboard-for-linux">MIDI keyboard for linux</h1>
<p>Add yourself to the <code>audio</code> group and then <code>reboot</code> or (log out and log in)</p>
<pre><code>sudo usermod -a -G audio &lt;username&gt;</code></pre>
<h2 id="on-raspberry-pi-to-reduce-the-latency-add-following-to-the-file-etcsecuritylimits.conf">On raspberry pi, to reduce the latency, add following to the file <code>/etc/security/limits.conf</code></h2>
<pre><code>@audio   -  rtprio      90
@audio   -  memlock     unlimited</code></pre>
<h2 id="previous-command-shortcut-in-terminal">Previous command shortcut in terminal</h2>
<ul>
<li><code>!!</code> is the last command from <code>history</code></li>
<li><code>!^</code> is the first argument (i.e. the second word) of the last command, and <code>!$</code> is the last argument (i.e. last word of the command)</li>
</ul>
<pre><code>cp file1.txt file2.txt
mv !^ file3.txt</code></pre>
<p>implies</p>
<pre><code>mv file1.txt file3.txt</code></pre>
<ul>
<li><code>!-2</code> is the second last command from the history</li>
<li><code>!cp:1</code> is the fist variable of the last command starting with <code>cp</code> (verify)</li>
</ul>
<h1 id="py3status-bar-with-i3-async_script">py3status bar with i3 async_script</h1>
<p>We can redirect the output of any script to the py3status bar using the module <code>async_script</code>. To achieve this</p>
<ul>
<li>First we create a pipe called <code>statuspipe</code> in <code>~</code> using</li>
</ul>
<pre><code>mkfifo statuspipe</code></pre>
<ul>
<li>Then, we create a script <code>~/.myscr/readstatuspipe</code> that perpetually reads from the pipe</li>
</ul>
<pre><code>!/bin/bash
cat &lt; ~/statuspipe</code></pre>
<p><strong>Note:</strong> The first line is essential, otherwise, we will get the error <code>invalid exec format</code>.</p>
<ul>
<li>Create a module in <code>$HOME/i3status/config</code></li>
</ul>
<pre><code>async_script {
    format = &quot;Out:{output}&quot;
    script_path = &quot;/home/debdeep/testpipe&quot;
}</code></pre>
<p>and add it to the list</p>
<pre><code>order += &quot;async_script&quot;</code></pre>
<p>and reload the status bar.</p>
<ul>
<li>To use the pipe, redirect the output of any script to it like this:</li>
</ul>
<pre><code>ping 127.0.0.1 &gt; ~/statuspipe</code></pre>
<h1 id="i3-window-manager-with-xfce4-panel">i3 Window manager with xfce4-panel</h1>
<ul>
<li><p>Right click on <code>xfce4-terminal</code> and go to <code>Preferences &gt; Appearance &gt; Display border around the new window</code> to disply the container title of the termial window.</p></li>
<li>Taking window out of its parent container: move the window outward once more after it reaches the boundary of the container</li>
<li>Moving a window into its sibling container:
<ol start="0" type="1">
<li>Move the window next to the container</li>
<li>[necessary] prepare the container by pressing <code>Mod+e</code> (verticle or horizontal split toggle)</li>
<li>Select the window that will move into the container</li>
<li>Move in the direction of the container</li>
</ol></li>
</ul>
<h1 id="i3-window-manager-movements">i3 window manager movements</h1>
<ul>
<li>To jump to a far away window without traversing all the ones in between: Focus parent, then focus window located in the parent level</li>
<li>Close multiple windows simultaneously: Focus parent and close multiple windows simultaneously</li>
<li>To combine two windows together, create a vertical split for one window, move the other to the vertical space, then toggle stack mode</li>
</ul>
<h1 id="disable-the-use-of-swap-space">Disable the use of swap space</h1>
<ul>
<li>To temporary turn off swap space and move all data to ram, turn off and turn on swapping:</li>
</ul>
<pre><code>sudo swapoff -a; sudo swapon -a</code></pre>
<ul>
<li>Check the current swappiness using</li>
</ul>
<pre><code>cat /proc/sys/vm/swappiness</code></pre>
<p>A value of 10 is recommended, which means the system will move ram to swap space (located in disk) if the available ram falls below 10%.</p>
<ul>
<li>To permanently set swappiness to 10:</li>
</ul>
<pre><code>sudoedit /etc/sysctl.conf</code></pre>
<p>Add this line</p>
<pre><code>vm.swappiness = 10</code></pre>
<p>Finally, restart system</p>
<pre><code>    sudo shutdown -r now </code></pre>
<ul>
<li>With kernel version 3.5+ setting swappiness to 0 does turn it off entirely and a setting of 1 is recommended if you want the lowest swappiness algorithm. <a href="https://www.percona.com/blog/2014/04/28/oom-relation-vm-swappiness0-new-kernel/">source</a></li>
</ul>
<h1 id="another-c-tutorial">Another C++ tutorial</h1>
<h2 id="compilation-process">Compilation process</h2>
<ul>
<li><strong>preprocessing</strong>: replacing all occurrence of <code>.h</code> files in the <code>.c</code> files by their code</li>
<li><strong>compiling</strong>: convert all <code>.CXX</code> files into machine-readable <em>object</em> files with extension <code>.o</code></li>
<li><strong>linking</strong>: link libraries to object files and generate the combined <em>executable</em> files</li>
<li><strong>building</strong>: a general term for the complete process of preprocessing, compiling, and linking</li>
<li><strong>header file</strong>: with <code>.h</code> extension</li>
<li><strong>source file</strong>: with <code>.CXX</code> extension</li>
</ul>
<h2 id="c-directory-structure">C++ directory structure</h2>
<pre><code>.
 |-- CMakeLists.txt
 |-- build
 |-- include
 |   \-- includefile.h
 \-- src
     |-- includefile.cpp
     \-- mainapp.cpp</code></pre>
<p>The built files will be stored in the <code>build</code> directory.</p>
<h2 id="compilers">Compilers</h2>
<p>When building programs in C++, use <code>g++</code>, which is a counterpart of <code>gcc</code> that compiler C files. <code>gcc</code> (or <code>g++</code>) does preprocessing, compilation, assembly, and linking in that order.</p>
<p>###<code>gcc</code> (and therefore <code>g++</code>) options:</p>
<ul>
<li><code>gcc</code> does <em>not</em> allow grouping of single-letter options. (i.e <code>-dv</code> is different from <code>-d -v</code>)</li>
<li>It matters where (in which order) the <code>-l</code> option is specified.</li>
<li>To stop the building process before linking, use <code>-c</code> option. It does only compilation and assembly, but <em>not</em> linking. It produces <code>.o</code> files.</li>
<li>Use <code>-S</code> to stop after compilation. Does not assemble. It produces <code>.s</code> files that are to be used in assembly.</li>
<li>Use <code>-E</code> to stop after preprocessing. Does not compile. The preprocessed source code is sent to stdout.</li>
<li><code>-###</code> to print the commands executed to perform the building process, but does not run the steps. <code>-v</code> actually run the steps in addition to printing them.</li>
</ul>
<h2 id="cmake-tutorial">CMake tutorial</h2>
<p><code>cmake</code> generates a <code>MakeFile</code> automatically so that you don’t have create it yourself. Howeve, we need to write a <code>CMakeLists.txt</code> file with all the information.</p>
<p><a href="http://derekmolloy.ie/hello-world-introductions-to-cmake/">link</a></p>
<ul>
<li><p><code>set(VARNAME value)</code> sets a variables. For example, <code>set(CMAKE_BUILD_TYPE Release)</code>. To call the variable, use <code>${VARNAME}</code>.</p></li>
<li><p>Add compiler of linker flags:</p></li>
</ul>
<ol type="1">
<li>Define the flags first, using</li>
</ol>
<pre><code>SET(GCC_COVERAGE_COMPILE_FLAGS &quot;-fprofile-arcs -ftest-coverage&quot;)
SET(GCC_COVERAGE_LINK_FLAGS    &quot;-lgcov&quot;)</code></pre>
<ol type="1">
<li>Later, set the flags by appending them to the existing flags, like this:</li>
</ol>
<pre><code>SET(CMAKE_CXX_FLAGS  &quot;${CMAKE_CXX_FLAGS} ${GCC_COVERAGE_COMPILE_FLAGS}&quot;)
SET(CMAKE_EXE_LINKER_FLAGS  &quot;${CMAKE_EXE_LINKER_FLAGS} ${GCC_COVERAGE_LINK_FLAGS}&quot;)</code></pre>
<ul>
<li><p>Set the location of header files (<code>.h</code>) using <code>include_directories(include)</code>.</p></li>
<li><p>The output executable file name, and the source file(s) that are used to generate the executable are set using <code>add_executable()</code>.</p></li>
</ul>
<p>For example, <code>add_executable(testapp mainapp.cpp)</code> generates the executable <code>testapp</code> from the file <code>mainapp.cpp</code> (when there is no header file involved).</p>
<p>When header files are involved, we have different ways to incorporate them in building the executable file. 1. Add <code>include_directories(include)</code> beforehand 1. Specify all source files individually like this</p>
<pre><code>set(SOURCES src/mainapp.cpp src/Student.cpp)
add_executable(testapp ${SOURCES})</code></pre>
<ol type="1">
<li>Specify all source files using wildcard</li>
</ol>
<pre><code>file( GLOB SOURCES &quot;src/*.cpp&quot;)
add_executable(testapp ${SOURCES})</code></pre>
<h4 id="typical-cmakelists.txt-file">Typical <code>CMakeLists.txt</code> file:</h4>
<pre><code>cmake_minimum_required(VERSION 2.8.9)
project(Project_Name)

#Bring the headers, such as includefile.h into the project
include_directories(include)

#Can manually add the sources using the set command as follows:
#set(SOURCES src/mainapp.cpp src/Student.cpp)

#However, the file(GLOB...) allows for wildcard additions:
file(GLOB SOURCES &quot;src/*.cpp&quot;)

add_executable(testStudent ${SOURCES})</code></pre>
<h1 id="video-recording-from-command-line">Video recording from command line</h1>
<ul>
<li>Using command line <code>vlc</code></li>
</ul>
<pre><code>cvlc v4l:///dev/video0 --sout file/avi:movie.avi</code></pre>
<ul>
<li><p>Using ffmpeg ffmpeg -f video4linux2 -s 320x240 -i /dev/video0 out.mpg</p></li>
<li>To take picture,</li>
</ul>
<pre><code>sleep 1s;gst-launch-0.10 v4l2src num-buffers=1 ! jpegenc ! filesink \
location=$HOME/Pictures/failedlogin.jpg</code></pre>
<p><a href="http://ubuntuforums.org/showthread.php?t=1418586">Source</a></p>
<pre><code>gst-launch-extra v4l2src ! videorate ! video/x-raw-yuv,width=640,height=480,framerate=15/2 ! ffmpegcolorspace ! theoraenc quality=20 ! oggmux name=mux alsasrc ! audio/x-raw-int ! audioconvert ! queue ! vorbisenc ! mux. mux. ! shout2send ip=172.19.3.113 port=8000 password=password mount=webcam.ogg</code></pre>
<h2 id="network-streaming">Network streaming</h2>
<ul>
<li>Stream video using RTP and network elements.</li>
</ul>
<p>On the server, issue</p>
<pre><code>gst-launch  v4l2src  !  video/x-raw-yuv,width=128,height=96,format=&#39;(fourcc)&#39;UYVY ! ffmpegcolorspace  !  ffenc_h263  !  video/x-h263  !  rtph263ppay pt=96 ! udpsink host=127.0.0.1 port=5000 sync=false</code></pre>
<p>Use this command on the receiver:</p>
<pre><code>
gst-launch   udpsrc   port=5000   !   application/x-rtp,  clockrate=90000,payload=96 ! rtph263pdepay queue-delay=0 ! ffdec_h263 ! xvimagesink</code></pre>
<ul>
<li>Following script will start the http server. It will start listing for requests for http streaming on your linux machine (IP-192.168.91.77) on 8080 port. It will not stream start sending packets on network until it gets a request from a client. Now to test this, open vlc player on any other machine and try capturing the network stream by typing http://192.168.91.77:8080. You should see webcam frames.</li>
</ul>
<pre><code>#!/bin/bash
/etc/init.d/httpd restart
vlc -vvv v4l:/dev/video0:norm=secam:frequency=543250:size=640x480:channel=0:adev=/dev/dsp:audio=0 --sout &#39;#transcode{vcodec=mp4v,acodec=mpga,vb=3000,ab=256,vt=800000,keyint=80,deinterlace}:std{access=http,mux=ts,dst=192.168.91.77:8080}&#39; --ttl 12</code></pre>
<p>you can play around with the codecs and other options.</p>
<ul>
<li>After removing audio, the modified script:</li>
</ul>
<pre><code>#!/bin/bash
/etc/init.d/httpd restart
vlc -vvv v4l:/dev/video0:norm=secam:frequency=543250:size=640x480:channel=0 --sout &#39;#transcode{vcodec=mp4v,vb=3000,vt=800000,keyint=80,deinterlace}:std{access=http,mux=ts,dst=192.168.91.77:8080}&#39; --ttl 12</code></pre>
<h1 id="investigation-on-xorgs-memory-leak">investigation on Xorg’s memory leak</h1>
<p>The following process fills up the memory and eventually shuts down the computer overnight, especially when the computer is idle:</p>
<pre><code> 3 SIGQUIT         989 root       39  19 4244M 3164M 3128M S  0.0 20.0  0:00.00 /usr/lib/xorg/Xorg -core :0 -seat seat0 -auth /var/run/lightdm/root/:0 -nolisten tcp vt7 -novtswitch</code></pre>
<h3 id="attempts">Attempts:</h3>
<ul>
<li>Since the memory leak happens when the system is idle, it might be related to the screensaver, which may be attempting to launch and is failing. Lock screen requires the power manager to launch. So, I am adding this to <code>.config/i3/config</code>:</li>
</ul>
<pre><code>exec --no-startup-id xfce4-power-manager #experimental, to see if the xorg-lightdm memory leak is resolved</code></pre>
<ul>
<li>Found another occurrence on the internet, but what does that mean? <a href="https://www.reddit.com/r/archlinux/comments/89ytwa/x11_eats_up_my_memory/">reddit</a></li>
</ul>
<pre><code>Update: After disabling all xscreensaver screensaver (using just blank black colour) and starting it via xscreensaver -nosplash &amp; there has been no more memory leaks.</code></pre>
<ul>
<li>Deleting <code>/usr/share/X11/xorg.conf.d/20-intel-backligh.conf</code> that I created during installation via <code>todo_xubuntu</code>. Thus resolves gui programs crashing like latexdraw, gmsh, fltk backend of python, octave plots etc.</li>
</ul>
<h1 id="graph-connectivity-in-python-using-networkx">Graph connectivity in python using <code>networkx</code></h1>
<p>Example:</p>
<pre><code>import networkx as nx

import matplotlib.pyplot as plt
import numpy as np

G = nx.Graph()
bonds = np.array([ [0,1],[0,2],[0,5], [1,2], [2,5],[3,4]])

G.add_edges_from(bonds)

print(nx.is_connected(G))
print(nx.number_connected_components(G))
print(list(nx.connected_components(G)))

# nx.draw(G, with_labels=True)
# plt.draw()
# plt.show()</code></pre>
<h1 id="gmsh-with-python">gmsh with python</h1>
<ul>
<li>Examply annulus</li>
</ul>
<pre><code>import gmsh
gmsh.initialize()
msh_file = &#39;meshdata/msh_test.msh&#39;

scaling = 1

# - the first 3 arguments are the point coordinates (x, y, z)
# - the next (optional) argument is the target mesh size close to the point
# - the last (optional) argument is the point tag (a stricly positive integer
#   that uniquely identifies the point)
# gmsh.model.occ.addPoint(0, 0, 0, meshsize, 1)

gmsh.model.occ.addCircle(0, 0, 0, scaling, 1)
gmsh.model.occ.addCircle(0, 0, 0, scaling/2, 2)

gmsh.model.occ.addCurveLoop([1], 1)
gmsh.model.occ.addCurveLoop([2], 2)
gmsh.model.occ.addPlaneSurface([1, 2], 1)

# obligatory before generating the mesh
gmsh.model.occ.synchronize()
# We can then generate a 2D mesh...
gmsh.model.mesh.generate(2)
# write to file
gmsh.write(msh_file)

# close gmsh instance, as opposed to gmsh.initialize()
gmsh.finalize() </code></pre>
<ul>
<li>With pygmsh [due to the lack of documentation, hard to figure out options, so I won’t use it much]</li>
</ul>
<p>Originally, the mesh can be generated using <code>with</code> statement like</p>
<pre><code>with pygmsh.geo.Geometry() as geom:
    circle1 = geom.add_circle([0,0], radius=scaling, mesh_size=meshsize)
    mesh = geom.generate_mesh()</code></pre>
<p>However, the non-<code>with</code> version should be <code>geom = pygmsh.geo.Geometry()</code> but it doesn’t when fed into <code>.generate_mesh()</code>. Instead use <code>model</code> approach:</p>
<pre><code>geometry = pygmsh.geo.Geometry()
model = geometry.__enter__()

circle1 = model.add_circle([0,0], radius=scaling, mesh_size=meshsize)
geom.generate_mesh()</code></pre>
<ul>
<li>extrude this way</li>
</ul>
<pre><code>
gmsh.model.occ.addPoint(x_min, y_min, 0, meshSize=meshsize, tag=1)
gmsh.model.occ.addPoint(x_min+length_x, y_min, 0, meshSize=meshsize, tag=2)
gmsh.model.occ.addLine(1,2, tag=1)
# extruding the line: dimension 1, tag 1 i.e., (1,1)
# numElements is the number of steps by which we extrude, heights is the scaling factor
gmsh.model.occ.extrude([(1, 1)], 0, length_y, 0, numElements=[ny], heights=[1])</code></pre>
<p>To feed the geometry to pygmsh,</p>
<h1 id="tmux-help">tmux help</h1>
<ul>
<li><code>Ctrl-b</code> as the default <code>prefix</code></li>
<li><code>Ctrl-b :source-file .tmux.conf</code> to reload the new config file (Caution: if there are instances of tmux running <code>tmux -ls</code>, opening a new tmux won’t automatically load the new config, you have to source the config file)</li>
</ul>
<h2 id="tmux-copy-paste">tmux copy-paste</h2>
<p>The main issue is copying over ssh from a remote server to the local client. 1. where should the copied text live? <code>xclip</code> does not work in remote server since Xserver hasn’t necessarily started. 1. how to retrieve server’s <code>xclip</code> information from the client’s <code>xclip</code>?</p>
<ul>
<li>Setting <code>copy-mode-vi y 'xclip -in selection'</code></li>
<li>No Xserver (no DISPLAY) for ssh sessions, so <code>xclip</code> does not work to copy text.</li>
</ul>
<h3 id="using-mouse-selection-for-copy-paste-from-tmux-over-ssh">Using mouse selection for copy-paste from tmux over SSH</h3>
<ul>
<li>For non-vim terminal text, use mouse to copy with <code>C-S-c</code> and paste locally with <code>C-S-v</code></li>
<li>For vim sessions, hold down the <code>shift</code> key to make selection within vim then <code>C-S-c</code> to copy and <code>C-S-v</code> to paste</li>
<li>For windowed tmux, fullscreen the window before copying to avoid vertical dividing line of tmux</li>
</ul>
<p>The drawback for using mouse is that it cannot copy more than a page of text. Moreover, it picks up the vim line number and vertical tmux window borders.</p>
<h3 id="using-a-clipboard-file-over-ssh">Using a clipboard file over SSH</h3>
<ul>
<li>To run <code>xclip</code> command over ssh in the local computer running Xserver</li>
</ul>
<pre><code>ssh localhost export DISPLAY=:0; echo &#39;test text&#39; | xclip -in -selection clipboard</code></pre>
<ul>
<li>dump desired clipboard string into a file in the server</li>
<li>retrieve the file and copy the content into the local clipboard</li>
<li>delete the remote and local copy of the file for security, periodically</li>
</ul>
<p>Drawback: need to run retrieval command each time, an extra step.</p>
<h3 id="between-tmux-windows">Between tmux windows:</h3>
<ul>
<li><code>C-b [ V</code> to select text, <code>Enter</code> to copy and go to normal mode</li>
<li><code>C-b ]</code> to paste it in another tmux window</li>
</ul>
<p>Drawback: cannot copy more than a page, picks up vim line numbers</p>
<h1 id="fingerprint-login">fingerprint login</h1>
<p><a href="https://www.reddit.com/r/LinuxOnThinkpads/comments/8qmqvz/enabled_t420_fingerprint_reader_for_sudo_login/">instruction</a></p>
<h3 id="full-script">full script</h3>
<pre><code>sudo apt-get install libfprint-2-tod1 libpam-fprintd

wget -c http://dell.archive.canonical.com/updates/pool/public/libf/libfprint-2-tod1-goodix/libfprint-2-tod1-goodix_0.0.6-0ubuntu1~somerville1_amd64.deb

sudo dpkg -i libfprint-2-tod1-goodix_0.0.6-0ubuntu1~somerville1_amd64.deb

sudo pam-auth-update

fprintd-enroll -f right-little-finger
</code></pre>
<h3 id="step-by-step">step by step</h3>
<ul>
<li>get driver (amd64.deb) from <a href="http://dell.archive.canonical.com/updates/pool/public/libf/libfprint-2-tod1-goodix/">link</a></li>
<li>install dependency for the driver package</li>
</ul>
<pre><code>sudo apt-get install libfprint-2-tod1</code></pre>
<ul>
<li>install the downloaded <code>.deb</code> (amd64) package using <code>sudo dpkg -i</code></li>
<li>install pam library</li>
</ul>
<pre><code>sudo apt-get install libpam-fprintd</code></pre>
<ul>
<li>[unnecessary, it seems] Now edit the common-auth file</li>
</ul>
<pre><code>sudo vim /etc/pam.d/common-auth</code></pre>
<p>In the file common-auth, add the line above the section “Primary Block”, it will be the first non-comment line. Save the file and exit editor.</p>
<pre><code>auth sufficient pam_fprint.so </code></pre>
<ul>
<li>Start auth-update by</li>
</ul>
<pre><code>sudo pam-auth-update</code></pre>
<ul>
<li>enroll fingerprint using</li>
</ul>
<pre><code>fprintd-enroll -f right-little-finger</code></pre>
<ul>
<li>Test it out with <code>sudo -i</code> and lightdm login page</li>
</ul>
<h3 id="configs">configs</h3>
<ul>
<li>Set up the timeout (waiting time for fingerprint before resorting to password) in <code>/etc/pam.d/common-auth</code> with <code>timeout</code>. Modified line looks like time</li>
</ul>
<pre><code>auth    [success=2 default=ignore]  pam_fprintd.so max_tries=1 timeout=5 # debug</code></pre>
<h1 id="alienware-x15-r1">Alienware x15-r1</h1>
<h2 id="todo">Todo</h2>
<p>[ ] [optional] Keyboard LED control [x] [script does that, although flashy] redshift along with brightness [x] [trivial] audio tick sound [x] brightness control with redshift [-] suspend on lid close [x] lock screen on suspend [x] ethernet adapter [x] [nvidia-settings takes care of it] Bumblebee for Optimus (hybrid graphics)</p>
<h2 id="fresh-windows-10-install">Fresh windows 10 install</h2>
<p><strong>Conclusion:</strong> Creating live usb via linux produces error that <code>Drivers are missing</code>. The only way out so far is to use a Windows computer to download <code>Windows media creating tool</code> (link only shows up in the browser visited from windows computer) and creating a <code>usb tool for another computer</code>. This tool has also an option to create an iso that can be <code>dd</code>ed to an usb later (not tested yet).</p>
<ul>
<li>Download windows 10 iso from microsoft</li>
<li>To copy more than 4GB iso, we need exFAT (not FAT32) formatted disk. Install using</li>
</ul>
<pre><code>sudo apt install exfat-utils</code></pre>
<ul>
<li>With ubuntu software <code>disks</code>, format the usb drive to <code>Compatible with all systems (dos)</code>. Add partition <code>Other</code> -&gt; <code>exfat</code>.</li>
<li>Mount the windows 10 iso and copy files into the newly created exfat partition within the usb drive.</li>
<li>Unmount and wait until the busy symbol goes away.</li>
<li>Before booting set to ACHI mode in bios (not tested)</li>
<li>Booting with F12 and clicking on <code>Install</code> produces error <code>Driver not found</code></li>
</ul>
<h2 id="dual-boot-with-windows">Dual-boot with windows:</h2>
<p><a href="https://askubuntu.com/questions/1257533/install-ubuntu-on-alienware-m15-r3">link</a></p>
<ul>
<li>In the BIOS, turn off secure boot and set to ACHI</li>
<li>Delete safeboot in windows: <code>bcdedit /set {current} safeboot minimal</code></li>
<li>Restart windows (automatically in safe mode) and selete safeboot: <code>bcdedit /deletevalue {current} safeboot</code></li>
<li>Restart and shrink partition</li>
<li>Intall Ubuntu from usb</li>
</ul>
<h2 id="hardware-drivers">Hardware drivers</h2>
<ul>
<li>Ubuntu 20.04 does not work with wifi, touchpad</li>
<li>Ubuntu (xubuntu) 21.10 (beta) comes with linux kernel 5.13.0, wifi works, but not touchpad</li>
<li>Disable <code>secure boot</code> in BIOS for new kernels to load at restart (otherwise <code>initramfs</code> mismatch error will be thrown)</li>
<li>Linux kernel 5.14.0 (beta): both wifi and touchpad work,</li>
<li>Brightness can be controlled using <code>xrandr</code> (buttons don’t work): use the graphic device in use as a target brighness device. To make the changes made by <code>xrandr</code> to stay, stop redshift, adjust brightness, and the restart redshift.</li>
<li>Turn off flashy leds in windows</li>
</ul>
<h3 id="nvidia-driver-needs-to-be-re-installed-in-the-following-way">nvidia driver needs to be re-installed in the following way</h3>
<ul>
<li>Go to <code>additional drivers</code> and select some other option than <code>properietary 370</code></li>
<li>It will install the other option and will fail to apply.</li>
<li>Then revert back to <code>370</code> driver and apply again</li>
<li>When done, restart, check if it is set at <code>370</code> and run <code>nvidia-smb</code> to see if it works</li>
<li>use <code>inxi -G</code> to see all available graphic devices and <code>glxinfo|egrep "OpenGL vendor|OpenGL renderer"</code> to see the currently active device</li>
</ul>
<p><strong>Note:</strong> After updating the kernel, you need to reinstall the nvidia driver (to compile it aginst the new kernel) by going to <code>Additional driver</code>, clicking on another driver that is not in use, applying it (it fails, so restart at time point), clicking on the desired one, and applying it again. Check the driver update is successful by issuing <code>nvidia-smi</code></p>
<h2 id="ethernet-adapter">Ethernet adapter</h2>
<p>Mainly followed <a href="https://ubuntu.com/server/docs/network-configuration">this</a> guide.</p>
<ul>
<li><p>Turn off Thunderbolt security in BIOS</p></li>
<li><p>Check if the device is recognised when attached using <code>sudo dmesg</code>. Found a line like</p></li>
</ul>
<pre><code>[ ... ] cdc_ncm 4-2:2.0 wwx0c3796485dda: renamed from wwan0</code></pre>
<p>This means a wired device is created and is renamed to wwx0c3796485dda. However, <code>ifconfig</code> shows no such device.</p>
<ul>
<li><p>See that the hardware is present using <code>sudo lshw -class network</code> or <code>ip a</code> but is is <code>DISABLED</code>. This means the device is not managed.</p></li>
<li><p>(Not necessary if setting up the netplan later) Turn the device up using</p></li>
</ul>
<pre><code>sudo ifconfig wwx0c3796485dda up</code></pre>
<p>Now <code>ifconfig</code> shows the device.</p>
<ul>
<li>To make the Ethernet device ask for ip address, force it to run dhcp by creating a netplan in the file <code>/etc/netplan/99_config.yaml</code></li>
</ul>
<pre><code>network:
  version: 2
  renderer: networkd
  ethernets:
    wwx0c3796485dda:
      dhcp4: true</code></pre>
<p>and applying the netplan using</p>
<pre><code>sudo netplan apply</code></pre>
<ul>
<li><p>Now <code>ifconfig</code> shows it has the ip address and internet works.</p></li>
<li><p>It is better to fix the logical name permanently by associating it with the Mac address in <code>/etc/netplan/99_config.yaml</code> but I don’t do it here.</p></li>
</ul>
<h2 id="lid-switch-handling">Lid switch handling</h2>
<p>By default: - <code>sudo systemctl suspend</code> works as intended - Lock screen only (no suspend) on lid close works as intended (both via logind and xfce4-power-manager), - Suspend on lid close is <em>problematic</em> because the screen does not come back on after lid is opened. Basically the display <code>eDP-1</code> (in my case) is connected but disabled, which is not enabled by default. So, ssh-ing into the computer, and issuing</p>
<pre><code>export DISPLAY=:0
xrandr --auto</code></pre>
<p>resumes the screen.</p>
<p>Moreover, when the screen is frozen, <code>CTRL+ALT+F1</code> works for login. It is possible to issue <code>sudo lightdm restart</code> and log back in to tty7.</p>
<h3 id="manually-run-xrandr---auto-on-lid-open-event-sleep-1-is-important">Manually run <code>xrandr --auto</code> on lid open event: <code>sleep 1</code> is important</h3>
<ul>
<li>Specify a script to run on any lid event in <code>/etc/acpi/events/lm_lid</code></li>
</ul>
<pre><code>event=button/lid.*
action=/etc/acpi/lid.sh</code></pre>
<ul>
<li>Write the script <code>/etc/acpi/lid.sh</code> (which runs as root) to call <code>xrandr</code> as a user after waiting for a few seconds (this is crucial)</li>
</ul>
<pre><code>grep -q open /proc/acpi/button/lid/LID*/state
if [ $? = 1 ]
then
    sleep 1; su -c &quot;DISPLAY=:0 xrandr --auto&quot; debdeep;
fi</code></pre>
<ul>
<li>Make the script executable as root</li>
</ul>
<pre><code>sudo chmod a+x /etc/acpi/lid.sh</code></pre>
<ul>
<li>Restart acpi service</li>
</ul>
<pre><code>systemctl restart acpid.service</code></pre>
<h3 id="other-settings-that-go-with-this-setup">Other settings that go with this setup:</h3>
<ul>
<li>Turn off the lid-switch related decisions by logind</li>
</ul>
<pre><code>xfconf-query -c xfce4-power-manager -p /xfce4-power-manager/logind-handle-lid-switch -n -t bool -s false</code></pre>
<ul>
<li><p>Comment out all lines in <code>/etc/systemd/logind.conf</code>, in particular, the lines with <code>LidSwitch</code></p></li>
<li><p>Allow <code>xfce4-power-manager</code> to launch at startup</p></li>
<li>Set the following in the settings:
<ul>
<li><p><code>General &gt; Bottons</code>: <code>Do nothing</code> for all except <code>When power botton is pressed: Suspend</code></p></li>
<li><code>System &gt; On Battery</code>: <code>When inactive for (slider): Never</code> and <code>When laptop lid is closed: Lock screen</code></li>
<li><code>System &gt; Plugged In</code>: Same as <code>On Battery</code></li>
<li><p><code>System &gt; Security</code>: <code>Lock screen when system is going to sleep</code></p></li>
<li><code>Display &gt; On Battery</code>: <code>Put to sleep after: Never</code>, and <code>Switch off after: Never</code></li>
<li><p><code>Display &gt; Plugged in</code>: Same as on battery</p></li>
</ul></li>
</ul>
<h2 id="crackling-and-popping-sound-on-headphone-when-idle">Crackling and popping sound on headphone when idle</h2>
<p>Turn off power saving feature using</p>
<pre><code>pactl unload-module module-suspend-on-idle</code></pre>
<p>To make the change permanent, comment out a line in a file</p>
<pre><code>sudo sed -i &#39;s/load-module module-suspend-on-idle/#load-module module-suspend-on-idle/g&#39; /etc/pulse/default.pa</code></pre>
<h1 id="pavilion-aero">Pavilion Aero</h1>
<p>Ubuntu 22.04 livecd preview works out of the box. However, certain things needs to be done for the installation to boot without issues. The issue was: after installing the fully functional live usb, the screen freezes on random reboots.</p>
<ul>
<li>Turn off Secure Boot in BIOS (so that the hardware components are accessible by the installed version)</li>
<li>While installing, connect to wifi</li>
<li>Select “Download updates while installing”</li>
<li>Select “Install third party software and drivers”</li>
</ul>
<h2 id="works-so-far-installing-kernel-version-5.17.5-immediately-after-installation">[Works so far] Installing kernel version 5.17.5 immediately after installation</h2>
<p>(via recovery mode and an usb, or on random lucky reboots when the screen does not freeze. Occasionally, the screen does not freeze when an usb is plugged in, but that might be just superstition.)</p>
<p>Steps:</p>
<ul>
<li>Download <code>amd64</code> builds from <a href="https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.17.5/">Mainline PPA</a> (skip lowlatency)</li>
<li>Copy to USB drive</li>
<li>On grub menu use <code>Recovery mode</code>. The <code>Drop to root shell</code></li>
<li>Plug in usb and mount, navigate to kernel deb files</li>
<li><code>dpkg -i *.deb</code></li>
<li>Reboot</li>
</ul>
<h1 id="openmpi">OpenMPI</h1>
<ul>
<li>Install on ubuntu with</li>
</ul>
<pre><code>sudo apt-get install libopenmpi-dev</code></pre>
<p>and see the version using <code>mpic++ --showme:version</code>.</p>
<h1 id="setting-up-vim-and-other-goodies-in-a-local-environment">Setting up vim and other goodies in a local environment</h1>
<h2 id="vim">vim</h2>
<ul>
<li>compile vim 8 from source with python3 support</li>
<li>add path (~/.local/bin/vim) to local vim <em>before</em> the system vim path</li>
</ul>
<h2 id="nvim">nvim</h2>
<ul>
<li>download the executable binary</li>
<li>copy the content (<code>bin</code>, <code>lib</code>, <code>share</code>) of the extracted tar to <code>~/.local</code> so that it can be launched</li>
<li>[see before] create <code>.config/nvim/init.vim</code> according to instructions and populate with appropriate lines</li>
<li>run <code>nvim</code> and issue <code>:checkhealth</code> to see what does not work</li>
</ul>
<h3 id="fixing-ultisnip-python3-path">fixing ultisnip python3 path</h3>
<ul>
<li>find python3 path with <code>which python3</code></li>
<li>insert in <code>.vimrc</code> for <code>nvim</code> to specify the path of python3</li>
</ul>
<pre><code>let g:python3_host_prog = &lt;full path from `which python3` output&gt;</code></pre>
<ul>
<li>install <code>pynvim</code> using</li>
</ul>
<pre><code>pip3 install pynvim</code></pre>
<ul>
<li>run <code>:checkhealth</code> to see if there is still an issue</li>
</ul>
<h3 id="nodejs">nodejs</h3>
<ul>
<li>Download nodejs binary from <a href="https://nodejs.org/en/download/">website</a></li>
</ul>
<pre><code>wget -c https://nodejs.org/dist/v16.13.0/node-v16.13.0-linux-x64.tar.xz</code></pre>
<ul>
<li>extract and add the path of extracted location to <code>$PATH</code> in <code>~/.bashrc</code> and source</li>
<li>check <code>node</code> command runs</li>
<li>[unnecessary] install npm package <code>neovim</code> using <code>npm install -g neovim</code></li>
</ul>
<h3 id="coc.nvim-1">coc.nvim</h3>
<ul>
<li>with <code>:PlugInstall</code> command you will get the error that the <code>Release</code> branch could not be found</li>
<li>go to the downloaded repository and (build and) install it with npm using</li>
</ul>
<pre><code>cd $HOME/.vim/plugged/coc.nvim
npm install</code></pre>
<ul>
<li>open <code>nvim</code> and check that coc is not showing any error</li>
<li>Install language servers using <code>:CocInstall coc-pyright</code></li>
</ul>
<h2 id="ranger">ranger</h2>
<pre><code>pip3 install ranger-fm</code></pre>
<h2 id="issues">Issues</h2>
<ul>
<li>[ ] <code>nvim</code> takes a while to load</li>
<li>[ ] the first insert mode in <code>nvim</code> is very slow, after that it works well</li>
<li>[ ] ranger takes a while to start</li>
</ul>
<h1 id="bash-script-to-create-a-table-in-markdown">Bash script to create a table in markdown</h1>
<p>We want to create the following table from a matrix of values.</p>
<pre><code>|  4 |  5 |  6 | 
|  :---: | :---: | :---: |
|  (4,1) | (4,2) | (4,3) |
|  (5,1) | (5,2) | (5,3) |
|  (6,1) | (6,2) | (6,3) |</code></pre>
<p>The following code can be used</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb486-1" title="1"><span class="co">## markdown table</span></a>
<a class="sourceLine" id="cb486-2" title="2"><span class="va">file=$HOME</span>/img_compare.md</a>
<a class="sourceLine" id="cb486-3" title="3"><span class="fu">rm</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-4" title="4"></a>
<a class="sourceLine" id="cb486-5" title="5"><span class="bu">echo</span> <span class="st">&quot;# comparison&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-6" title="6"><span class="bu">echo</span> <span class="st">&quot;&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-7" title="7"></a>
<a class="sourceLine" id="cb486-8" title="8"><span class="co"># headers</span></a>
<a class="sourceLine" id="cb486-9" title="9"><span class="co">#echo -n &quot;| &quot; &gt;&gt; $file</span></a>
<a class="sourceLine" id="cb486-10" title="10"><span class="bu">echo</span> -n <span class="st">&quot;|    |&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-11" title="11"><span class="kw">for</span> <span class="ex">del</span> in <span class="va">${dellist[@]}</span></a>
<a class="sourceLine" id="cb486-12" title="12"><span class="kw">do</span></a>
<a class="sourceLine" id="cb486-13" title="13">    <span class="bu">echo</span> -n <span class="st">&quot; del=</span><span class="va">$del</span><span class="st"> | &quot;</span>  <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-14" title="14"><span class="kw">done</span></a>
<a class="sourceLine" id="cb486-15" title="15"><span class="bu">echo</span> <span class="st">&quot;&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-16" title="16"></a>
<a class="sourceLine" id="cb486-17" title="17"><span class="co"># alignment</span></a>
<a class="sourceLine" id="cb486-18" title="18"><span class="co">#echo -n &quot;| &quot; &gt;&gt; $file</span></a>
<a class="sourceLine" id="cb486-19" title="19"><span class="bu">echo</span> -n <span class="st">&quot;| :---: | &quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-20" title="20"><span class="kw">for</span> <span class="ex">del</span> in <span class="va">${dellist[@]}</span></a>
<a class="sourceLine" id="cb486-21" title="21"><span class="kw">do</span></a>
<a class="sourceLine" id="cb486-22" title="22">    <span class="bu">echo</span> -n <span class="st">&quot; :---: |&quot;</span>  <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-23" title="23"><span class="kw">done</span></a>
<a class="sourceLine" id="cb486-24" title="24"><span class="bu">echo</span> <span class="st">&quot;&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-25" title="25"></a>
<a class="sourceLine" id="cb486-26" title="26"><span class="kw">for</span> <span class="ex">m</span> in <span class="va">${mlist[@]}</span></a>
<a class="sourceLine" id="cb486-27" title="27"><span class="kw">do</span></a>
<a class="sourceLine" id="cb486-28" title="28">    <span class="co">#echo -n &quot;| &quot; &gt;&gt; $file</span></a>
<a class="sourceLine" id="cb486-29" title="29">    <span class="bu">echo</span> -n <span class="st">&quot;| m=</span><span class="va">$m</span><span class="st"> | &quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-30" title="30">    <span class="kw">for</span> <span class="ex">del</span> in <span class="va">${dellist[@]}</span></a>
<a class="sourceLine" id="cb486-31" title="31">    <span class="kw">do</span></a>
<a class="sourceLine" id="cb486-32" title="32">    <span class="bu">echo</span> -n <span class="st">&quot; (</span><span class="va">$m</span><span class="st">,</span><span class="va">$del</span><span class="st">) |&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-33" title="33">    <span class="co">#echo -n &quot; ![img]($HOME/img_pacman_comp/${del}_${m}_${rc}/img_tc_00025.png) |&quot; &gt;&gt; $file</span></a>
<a class="sourceLine" id="cb486-34" title="34">    <span class="kw">done</span></a>
<a class="sourceLine" id="cb486-35" title="35">    <span class="bu">echo</span> <span class="st">&quot;&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb486-36" title="36"><span class="kw">done</span></a></code></pre></div>
<p>The body can be images too:</p>
<pre><code>echo -n &quot; ![img]($HOME/img_pacman_comp/${del}_${m}_${rc}/img_tc_00025.png) |&quot; &gt;&gt; $file</code></pre>
<ul>
<li>To transpose the matrix (table), we add an optional argument to the function</li>
</ul>
<div class="sourceCode" id="cb488"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb488-1" title="1">    <span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;transpose&quot;</span><span class="bu"> ]</span></a>
<a class="sourceLine" id="cb488-2" title="2">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb488-3" title="3">    <span class="va">arr2=(</span><span class="st">&quot;</span><span class="va">${mlist[@]}</span><span class="st">&quot;</span><span class="va">)</span> </a>
<a class="sourceLine" id="cb488-4" title="4">    <span class="va">arr1=(</span><span class="st">&quot;</span><span class="va">${dellist[@]}</span><span class="st">&quot;</span><span class="va">)</span> </a>
<a class="sourceLine" id="cb488-5" title="5">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb488-6" title="6">    <span class="va">arr1=(</span><span class="st">&quot;</span><span class="va">${mlist[@]}</span><span class="st">&quot;</span><span class="va">)</span> </a>
<a class="sourceLine" id="cb488-7" title="7">    <span class="va">arr2=(</span><span class="st">&quot;</span><span class="va">${dellist[@]}</span><span class="st">&quot;</span><span class="va">)</span> </a>
<a class="sourceLine" id="cb488-8" title="8">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb488-9" title="9"></a>
<a class="sourceLine" id="cb488-10" title="10">    <span class="co">## markdown table</span></a>
<a class="sourceLine" id="cb488-11" title="11">    <span class="va">file=$HOME</span>/img_compare.md</a>
<a class="sourceLine" id="cb488-12" title="12">    <span class="fu">rm</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb488-13" title="13"></a>
<a class="sourceLine" id="cb488-14" title="14">    <span class="co"># headers</span></a>
<a class="sourceLine" id="cb488-15" title="15">    <span class="co">#echo -n &quot;| &quot; &gt;&gt; $file</span></a>
<a class="sourceLine" id="cb488-16" title="16">    <span class="bu">echo</span> -n <span class="st">&quot;|    |&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb488-17" title="17">    <span class="kw">for</span> <span class="ex">val2</span> in <span class="va">${arr2[@]}</span></a>
<a class="sourceLine" id="cb488-18" title="18">    <span class="kw">do</span></a>
<a class="sourceLine" id="cb488-19" title="19">    <span class="bu">echo</span> -n <span class="st">&quot; del=R/</span><span class="va">$val2</span><span class="st"> | &quot;</span>  <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb488-20" title="20">    <span class="kw">done</span></a>
<a class="sourceLine" id="cb488-21" title="21">    <span class="bu">echo</span> <span class="st">&quot;&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb488-22" title="22"></a>
<a class="sourceLine" id="cb488-23" title="23">    <span class="co"># alignment</span></a>
<a class="sourceLine" id="cb488-24" title="24">    <span class="co">#echo -n &quot;| &quot; &gt;&gt; $file</span></a>
<a class="sourceLine" id="cb488-25" title="25">    <span class="bu">echo</span> -n <span class="st">&quot;| :---: | &quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb488-26" title="26">    <span class="kw">for</span> <span class="ex">val2</span> in <span class="va">${arr2[@]}</span></a>
<a class="sourceLine" id="cb488-27" title="27">    <span class="kw">do</span></a>
<a class="sourceLine" id="cb488-28" title="28">    <span class="bu">echo</span> -n <span class="st">&quot; :---: |&quot;</span>  <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb488-29" title="29">    <span class="kw">done</span></a>
<a class="sourceLine" id="cb488-30" title="30">    <span class="bu">echo</span> <span class="st">&quot;&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb488-31" title="31"></a>
<a class="sourceLine" id="cb488-32" title="32">    <span class="co">#for m in ${mlist[@]}</span></a>
<a class="sourceLine" id="cb488-33" title="33">    <span class="kw">for</span> <span class="ex">val1</span> in <span class="va">${arr1[@]}</span></a>
<a class="sourceLine" id="cb488-34" title="34">    <span class="kw">do</span></a>
<a class="sourceLine" id="cb488-35" title="35">    <span class="co">#echo -n &quot;| &quot; &gt;&gt; $file</span></a>
<a class="sourceLine" id="cb488-36" title="36">    <span class="bu">echo</span> -n <span class="st">&quot;| m=</span><span class="va">$val1</span><span class="st"> | &quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb488-37" title="37">    <span class="co">#for del in ${dellist[@]}</span></a>
<a class="sourceLine" id="cb488-38" title="38">    <span class="kw">for</span> <span class="ex">val2</span> in <span class="va">${arr2[@]}</span></a>
<a class="sourceLine" id="cb488-39" title="39">    <span class="kw">do</span></a>
<a class="sourceLine" id="cb488-40" title="40"></a>
<a class="sourceLine" id="cb488-41" title="41">        <span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;transpose&quot;</span><span class="bu"> ]</span></a>
<a class="sourceLine" id="cb488-42" title="42">        <span class="kw">then</span></a>
<a class="sourceLine" id="cb488-43" title="43">        <span class="co">#echo -n &quot; ($val1,$val2) |&quot; &gt;&gt; $file</span></a>
<a class="sourceLine" id="cb488-44" title="44">        <span class="kw">else</span></a>
<a class="sourceLine" id="cb488-45" title="45">        <span class="co">#echo -n &quot; ($val2,$val1) |&quot; &gt;&gt; $file</span></a>
<a class="sourceLine" id="cb488-46" title="46">        <span class="kw">fi</span></a>
<a class="sourceLine" id="cb488-47" title="47">    <span class="kw">done</span></a>
<a class="sourceLine" id="cb488-48" title="48">    <span class="bu">echo</span> <span class="st">&quot;&quot;</span> <span class="op">&gt;&gt;</span> <span class="va">$file</span></a>
<a class="sourceLine" id="cb488-49" title="49">    <span class="kw">done</span></a></code></pre></div>
<p>The markdown can be converted into html (or latex, or pdf) using</p>
<pre><code>html=$HOME/img_compare.html
pandoc $file -s -o $html --css $HOME/pandoc.css</code></pre>
<p>The css template <code>pandoc.css</code> is taken from <a href="https://gist.github.com/killercup/5917178">here</a>. The css file also controls the width of the page. Without it, the page size is undefined. Other templates can be used to convert to html with different style.</p>
<h1 id="mpi4py-python-with-mpi">mpi4py python with mpi</h1>
<ul>
<li>Start with</li>
</ul>
<pre><code>from mpi4py import MPI
comm = MPI.COMM_WORLD
size = comm.Get_size()
rank = comm.Get_rank()
print(&#39;rank&#39;, rank, flush=True)</code></pre>
<ul>
<li>Run python script with</li>
</ul>
<pre><code>mpiexec -np 4 python3 filename_with_mpi.py</code></pre>
<ul>
<li>Run a for loop over [1,2,…,N] using</li>
</ul>
<pre><code>for p in range(rank, N, size):    # mpi
    # do stuff with index p, which would be unique for each rank, and would cover 1 to N</code></pre>
<ul>
<li>You can gather the output from different ranks into a single list using</li>
</ul>
<pre><code>result = comm.gather(some_list, root=0)</code></pre>
<p>Then it will look like <code>result  = [ some_list_1, some_list_2, ..., some_list_size ]</code>. If <code>some_list</code> is itself a list, we can join them using</p>
<pre><code>joined_list = [j for i in result for j in i]</code></pre>
<h1 id="using-an-older-version-of-gcc">Using an older version of gcc</h1>
<ul>
<li>In Ubuntu 22.04 the default gcc is version 11 (<code>gcc -v</code>). To install <code>gcc-10</code> use</li>
</ul>
<pre><code>sudo apt install gcc-10 g++-10</code></pre>
<ul>
<li>Check now available compilers using</li>
</ul>
<pre><code>dpkg --list | grep compiler</code></pre>
<ul>
<li>To see the symlink for the current <code>gcc</code> using</li>
</ul>
<pre><code>ln -l /usr/bin/gcc
ln -l /usr/bin/g++</code></pre>
<ul>
<li>Install all available versions as an alternative to <code>gcc</code></li>
</ul>
<pre><code>sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-10 10
sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-10 10
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 11
sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-11 11</code></pre>
<ul>
<li>Configure which one will be in use using</li>
</ul>
<pre><code>sudo update-alternatives --config gcc
sudo update-alternatives --config g++</code></pre>
<p>and selecting the older choice <code>gcc-10</code> and <code>g++-10</code>.</p>
<ul>
<li>Verify that the desired version is in use using</li>
</ul>
<pre><code>gcc -v
g++ -v</code></pre>
<h1 id="nvcc-with-ubuntu-22.04">nvcc with Ubuntu 22.04</h1>
<ul>
<li><p>Installing <code>nvidia-cuda-toolkit</code> doesn’t help.</p></li>
<li><p>Installing <code>nvidia-cuda-toolkit-11.6</code> from the website has the issue that <code>sudo apt install -y cuda</code> fails due to missing package.</p></li>
<li><p>Download missing package from https://packages.ubuntu.com/impish/amd64/liburcu6/download install using <code>sudo dpkg -i liburcu6</code></p></li>
<li><p>Compiling with <code>nvcc</code> produces gcc compatibility error</p></li>
<li><p>Calling <code>nvcc</code> with full path <code>/usr/local/cuda-11.6/bin/nvcc test.cu</code> works!</p></li>
</ul>
<h1 id="vimtex-use-xelatex-and-the-compiler">vimtex use xelatex and the compiler</h1>
<p>Put this line as the first line of the tex file</p>
<pre><code>%! TEX program = xelatex</code></pre>
<p>and restart vim.</p>
<h1 id="downloading-zoom-links">Downloading zoom links</h1>
<p><a href="https://github.com/Battleman/zoomdl">zoomdl</a></p>
<pre><code>zoomdl -u &lt;http_link&gt;</code></pre>
<h2 id="supplying-a-input-file-of-zoom-urls">Supplying a input file of Zoom urls</h2>
<div class="sourceCode" id="cb503"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb503-1" title="1"><span class="va">Lines=$(</span><span class="fu">cat</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb503-2" title="2"><span class="kw">for</span> <span class="ex">line</span> in <span class="va">$Lines</span></a>
<a class="sourceLine" id="cb503-3" title="3"><span class="kw">do</span></a>
<a class="sourceLine" id="cb503-4" title="4">    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$line</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb503-5" title="5">    <span class="ex">zoomdl</span> -u <span class="st">&quot;</span><span class="va">$line</span><span class="st">&quot;</span> <span class="kw">&amp;</span></a>
<a class="sourceLine" id="cb503-6" title="6"><span class="kw">done</span></a></code></pre></div>
<h1 id="interactive-terminal-command-from-vim">Interactive terminal command from vim</h1>
<pre class="vim"><code>function! &lt;SID&gt;InteractiveFZFCommand(...)
    let tempfile = tempname()
    if a:0
    &quot; if an argument is supplied
    let dirname = a:1
    else
    &quot; if no argument is supplied
    let dirname = &quot;&quot;
    endif

    let command = &quot;!$HOME/.myscr/copyfilelocally &quot; . dirname . &#39; &gt;&#39; . shellescape(tempfile)
    execute command
    try 
        silent execute &#39;read&#39; tempfile
    finally
        call delete(tempfile)
    endtry
endfunction

&quot; ? means 0 or 1 arguments
command! -nargs=? GetFile call &lt;SID&gt;InteractiveFZFCommand(&lt;f-args&gt;)</code></pre>
<h1 id="markdown-as-writing-tool">Markdown as writing tool</h1>
<p>A combination of tools required to make the entire workflow possible.</p>
<table>
<thead>
<tr class="header">
<th>Tool</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>vim-pandoc</td>
<td>compilation, live preview</td>
</tr>
<tr class="even">
<td>vim-pandoc-syntax</td>
<td>syntax highlighting for delimited code</td>
</tr>
<tr class="odd">
<td>easy-pandoc-templates</td>
<td>to produce reasonable looking html output</td>
</tr>
<tr class="even">
<td>vim-tablemode</td>
<td>creating and handling markdown tables</td>
</tr>
<tr class="odd">
<td>?</td>
<td>file management, tagging, searching</td>
</tr>
<tr class="even">
<td>?</td>
<td>file backup</td>
</tr>
</tbody>
</table>
<h3 id="good-things">Good things</h3>
<ul>
<li>Easy to type</li>
<li><p>Easy to include images</p></li>
<li>pdf output</li>
<li>perfect equation rendering with default parameters</li>
<li><p>Images get rescaled correctly</p></li>
<li>HTML output</li>
<li><p>easy to scroll and click on links</p></li>
</ul>
<h3 id="issues-1">Issues</h3>
<ul>
<li>html rendering requires bunch of custom flags and templates</li>
<li>Autorun command launches the browser window every time (run command on write is on)</li>
<li>Custom templates depend on google api website which slows down the launch time (for the first time only)</li>
<li>Handling large md file with TableMode on is too laggy (need to manually turn it off)</li>
<li>Folding for large files is slow (need to install fastfold plugin)</li>
<li>Recompiles the whole page on each save, so progressively longer compile time</li>
<li>Only single column pictures are available. No side-by-side.</li>
</ul>
<h3 id="compare-workflow-and-ease-with">Compare workflow and ease with</h3>
<ul>
<li>Jupyter</li>
<li>vimtex</li>
</ul>
<h1 id="sql-on-linux">SQL on linux</h1>
<h3 id="setup">Setup</h3>
<ul>
<li>Install</li>
</ul>
<pre><code>sudo apt install mysql-server</code></pre>
<ul>
<li>Check installation</li>
</ul>
<pre><code>mysql --version</code></pre>
<ul>
<li>Start as sudo</li>
</ul>
<pre><code>sudo mysql</code></pre>
<ul>
<li>Exit</li>
</ul>
<pre><code>exit;</code></pre>
<h3 id="usage-2">Usage</h3>
<ul>
<li>General
<ul>
<li>Nothing is case sensitive, except quoted strings</li>
</ul></li>
<li>Show databases</li>
</ul>
<pre><code>show databases;</code></pre>
<ul>
<li>Create database</li>
</ul>
<pre><code>create database mydatabase;</code></pre>
<ul>
<li>Select database</li>
</ul>
<pre><code>use mydatabase;</code></pre>
<ul>
<li>Create table <code>person</code> in the currently selected database with columns <code>Id, Firstname, Lastname</code> with datatype and length</li>
</ul>
<pre><code>create table person (Id int(10) not null, Firstname varchar(10), Lastname varchar(10) );</code></pre>
<h3 id="importexport-databases">Import/export databases</h3>
<ul>
<li>Import</li>
</ul>
<pre><code>sudo mysql -u &lt;username&gt; -p &lt;database&gt; &lt; /path/to/database.sql</code></pre>
<ul>
<li>Export with <code>mysqldump</code></li>
</ul>
<pre><code>sudo mysqldump -u &lt;username&gt; -p &lt;database&gt; &gt; /path/to/database.sql</code></pre>
<h3 id="readwrite">Read/write</h3>
<ul>
<li>Operations
<ul>
<li>C (create) : <code>insert into &lt;tablename&gt; (col1, col2, col3) values (data1, data2, data3)</code></li>
<li>R (read) : <code>select * from &lt;tablename&gt; where ...</code></li>
<li>U (update) : <code>update &lt;tablename&gt; set &lt;colname&gt;=&lt;value&gt; where ...</code></li>
<li>D (delete) : <code>delete from &lt;tablename&gt; where ...</code></li>
</ul></li>
<li>Insert data into table</li>
</ul>
<pre><code>insert into person (Id, Firstname, Lastname) values (1, &#39;Richard&#39;, &#39;Winters&#39;);</code></pre>
<ul>
<li>Read</li>
</ul>
<pre><code>select * from person;</code></pre>
<pre><code>- Read selectively

```
select * from person where Id=1;
select * from person where id = 1;
select * from person where Firstname = &#39;Richard&#39;;
select * from person where firstname=&#39;richard&#39;;
```</code></pre>
<ul>
<li>Update data</li>
</ul>
<pre><code>update person set Lastname = &#39;Clark&#39; where Firstname = &#39;Richard&#39;;</code></pre>
<ul>
<li>Delete data</li>
</ul>
<pre><code>delete from person where Id = 1;</code></pre>
<h1 id="protonvpn-for-ubuntu">Protonvpn for ubuntu</h1>
<p>After installing the <code>.deb</code> package the website specifies, the following command does not work</p>
<pre><code>sudo apt install protonvpn</code></pre>
<p>with error <code>protonvpn: could not locate</code>.</p>
<p>The issue is the repository list file did not get copied to <code>/etc/apt/sources.list.d/</code>. Simply extract the <code>.deb</code> file with tar <code>tar -xvf protonvpn....deb</code> and copy the file <code>./etc/apt/sources.list.d/protonvpn-stable.list</code> to <code>/etc/apt/sources.list.d/</code>.</p>
<p>Then do <code>sudo apt update</code>. Now can find and install the package.</p>
<h2 id="no-internet-due-to-ip-leak-protection">No internet due to ip leak protection</h2>
<p>Turn off the service using</p>
<pre><code>sudo nmcli connection delete pvpn-ipv6leak-protection</code></pre>
<h1 id="changing-caps-lock-to-escape">Changing caps lock to escape</h1>
<pre><code>setxkbmap -option caps:escape</code></pre>
<h1 id="table-borders-in-pandoc-converted-html-from-markdown">Table borders in pandoc-converted html from markdown</h1>
<p>When converting markdown files to html, the table borders do not show up. Add the following css snippet within the <code>.md</code> files so that</p>
<pre><code>pandoc file.md -o file.html</code></pre>
<p>actually renders a border in the tables:</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb524-1" title="1"><span class="kw">&lt;style&gt;</span></a>
<a class="sourceLine" id="cb524-2" title="2">table { <span class="kw">border-collapse</span>: <span class="dv">collapse</span><span class="op">;</span> }</a>
<a class="sourceLine" id="cb524-3" title="3">th<span class="op">,</span> td { <span class="kw">border</span>: <span class="dv">solid</span> <span class="cn">black</span> <span class="dv">1</span><span class="dt">px</span><span class="op">;</span> <span class="kw">padding</span>: <span class="dv">0</span> <span class="dv">1</span><span class="dt">ex</span><span class="op">;</span> }</a>
<a class="sourceLine" id="cb524-4" title="4">tr<span class="in">:nth-of-type(odd)</span> { <span class="kw">background-color</span>:<span class="cn">#eee</span><span class="op">;</span> }</a>
<a class="sourceLine" id="cb524-5" title="5">th { <span class="kw">color</span>: <span class="cn">white</span><span class="op">;</span> <span class="kw">background</span>: <span class="cn">#444</span><span class="op">;</span> }</a>
<a class="sourceLine" id="cb524-6" title="6"><span class="kw">&lt;/style&gt;</span></a></code></pre></div>
<h1 id="compiling-tex-files-with-svg">Compiling tex files with svg</h1>
<ul>
<li>Include the svg package</li>
</ul>
<pre><code>\usepackage{svg}</code></pre>
<ul>
<li>Add svg files with</li>
</ul>
<pre><code>\includesvg{path/file.svg}</code></pre>
<ul>
<li>Use shell escape to compile</li>
</ul>
<pre><code>pdflatex --shell-escape file.tex</code></pre>
<h1 id="local-image-server-immich.app">Local image server immich.app</h1>
<h2 id="installation-6">Installation</h2>
<p>Follow the beautifully written tutorial</p>
<ul>
<li>The default docker.io installation (<code>sudo apt install docker.io</code>) will not work. Need to follow described method to download it from docker website. Then we need to run docker using</li>
</ul>
<pre><code>systemctl start docker</code></pre>
<ul>
<li><p>The <code>.env</code> file should not have any prefix (first name). It is just <code>.env</code>.</p></li>
<li><p>Need to use sudo for compose up</p></li>
</ul>
<pre><code>sudo docker compose up -d</code></pre>
<ul>
<li>Better to set up with filename template engine on for easy organization. The original files will be stored in <code>./library/library/&lt;user&gt;/</code></li>
</ul>
<h2 id="file-structure">File structure</h2>
<ul>
<li>Add backed up files are stored in</li>
</ul>
<h2 id="testing">Testing</h2>
<ul>
<li>Can delete all backed up photos and delete the database with <code>docker copmose down -v</code> (see the <a href="https://immich.app/docs/administration/backup-and-restore/">Administration</a> for details)</li>
</ul>
<pre><code>docker compose down -v  # CAUTION! Deletes all Immich data to start from scratch.</code></pre>
<h2 id="extra-work">Extra work</h2>
<h3 id="security">Security</h3>
<ul>
<li><p>Default password for the server is written in plaintext within the config file. Must change it from default before running the docker image.</p></li>
<li><p>https for app: need to use a reverse proxy like nginx or caddy (described in the guide)</p></li>
</ul>
<h4 id="tailscale-guide">tailscale guide</h4>
<p>Tailscale allows you to create a network of your personal devices who can ‘see’ each other even though they are in completely different networks. It also provides a static DNS name, so we don’t need to use additional dynamic dns service providers. This also gives you free https over the internet for your http server.</p>
<ul>
<li><p>After creating and account, run tailscale on your personal devices. In particular on the device where the server is running.</p></li>
<li><p>Make the server available to other personal devices within your tailscale network using</p></li>
</ul>
<pre><code>sudo tailscale serve --bg 2283</code></pre>
<ul>
<li>One can <code>serve</code> multiple servers running on different ports using names like this</li>
</ul>
<pre><code>sudo tailscale serve --set-path /immich --bg 2283
sudo tailscale serve --set-path /jupyter --bg 8888</code></pre>
<p>This sets the tailscale ip (or the landing hostname) of the device into the server itself. e.g. from a tailscale-connected device, visit the immich server directly using <code>https://hostname.network-name.ts.net</code>.</p>
<ul>
<li>Check status of your server using</li>
</ul>
<pre><code>tailscale serve status</code></pre>
<p>or</p>
<pre><code>tailscale funnel status</code></pre>
<ul>
<li>Turn the server off using</li>
</ul>
<pre><code>sudo tailscale serve reset</code></pre>
<p>or</p>
<pre><code>sudo tailscale funnel reset</code></pre>
<ul>
<li>To make the servers created this way publicly available (not necessary since it defeats the purpose of a private image server) using <code>funnel</code> as opposed to <code>serve</code>.</li>
</ul>
<h3 id="dynamic-dns">Dynamic DNS</h3>
<ul>
<li>They recommend duckdns</li>
</ul>
<h3 id="backup">Backup</h3>
<p>Borg script is provided for local and remote (via ssh) backup.</p>
<ul>
<li>Install borg with</li>
</ul>
<pre><code>sudo apt install borgbackup</code></pre>
<ul>
<li>Like a git repository, initiate a borg repository with</li>
</ul>
<pre><code>borg init --encryption=none &lt;backup_dir&gt;</code></pre>
<ul>
<li>Create the backup using</li>
</ul>
<pre><code>
borg create --stats --progress &lt;backup_dir&gt;::{now} immich-app/library/ --exclude=immich-app/library/thumbs/ --exclude immich-app/library/encoded-video/</code></pre>
<p>The stats will show the statistics after compression is done. The progress bar is good for large backups.</p>
<ul>
<li>Need to prune the trees and compact to reduce size of multiple backups</li>
</ul>
<pre><code>borg prune --keep-weekly=4 --keep-monthly=3 &lt;backup_dir&gt;
borg compact &lt;backup_dir&gt;</code></pre>
<h3 id="bulk-upload">Bulk upload</h3>
<p>immich-go does not work very well as it makes many of the uploaded file corrupted (but downloading and uploading them fixes them). Therefore, we will use: https://github.com/TheLastGimbus/GooglePhotosTakeoutHelper/tree/master?tab=readme-ov-file Download the script from the github, and run it on extracted takeout zips. This creates a flattened list of images which we can upload using bulk-upload script.</p>
<h1 id="dual-filetype">Dual filetype</h1>
<p>While working on a pandoc (markdown) file which contains some latex code, one needs to use the plugin features targeted toward each of the filetypes.</p>
<pre><code>:set ft=pandoc.tex</code></pre>
<p>This will likely have collisions between various snippets and keymaps, but seems to work for now.</p>
<p>Alternatively, you can temporarily change the filetype to tex using</p>
<pre><code>:set ft=tex</code></pre>
<p>do your tex editing, and come back to pandoc using</p>
<pre><code>:set ft=pandoc</code></pre>                    
                </div>
            </div>
            <script src="https://vjs.zencdn.net/5.4.4/video.js"></script>
        </div>
    </body>
</html>
